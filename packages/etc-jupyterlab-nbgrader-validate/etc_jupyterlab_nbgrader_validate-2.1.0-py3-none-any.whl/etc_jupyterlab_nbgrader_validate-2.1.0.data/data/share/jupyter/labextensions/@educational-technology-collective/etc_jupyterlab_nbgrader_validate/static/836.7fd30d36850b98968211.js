"use strict";(self.webpackChunk_educational_technology_collective_etc_jupyterlab_nbgrader_validate=self.webpackChunk_educational_technology_collective_etc_jupyterlab_nbgrader_validate||[]).push([[836],{836:(e,t,n)=>{n.r(t),n.d(t,{IJupyterLabPioneer:()=>S,default:()=>_});var o=n(576),i=n(152),l=n(930),a=n(483),d=n(429);async function s(e="",t={}){const n=d.ServerConnection.makeSettings(),o=a.URLExt.join(n.baseUrl,"jupyterlab-pioneer",e);let i;try{i=await d.ServerConnection.makeRequest(o,t,n)}catch(e){throw new d.ServerConnection.NetworkError(e)}let l=await i.text();if(l.length>0)try{l=JSON.parse(l)}catch(e){console.log("Not a JSON response body.",i)}if(!i.ok)throw new d.ServerConnection.ResponseError(i,l.message||l);return l}var c=n(211);class v{listen(e,t,n){e.content.activeCellChanged.connect((async(o,i)=>{var l,a;if(i&&e.content.widgets){const o={id:null==i?void 0:i.model.id,index:e.content.widgets.findIndex((e=>e===i))},d={eventName:v.id,eventTime:Date.now(),eventInfo:{cells:[o]}};await t.publishEvent(e,d,n,null===(a=null===(l=n.activeEvents)||void 0===l?void 0:l.find((e=>e.name==v.id)))||void 0===a?void 0:a.logWholeNotebook)}}))}}v.id="ActiveCellChangeEvent";class r{listen(e,t,n){var o;null===(o=e.content.model)||void 0===o||o.cells.changed.connect((async(o,i)=>{var l,a;if("add"===i.type){const o={id:i.newValues[0].id,index:i.newIndex},d={eventName:r.id,eventTime:Date.now(),eventInfo:{cells:[o]}};await t.publishEvent(e,d,n,null===(a=null===(l=n.activeEvents)||void 0===l?void 0:l.find((e=>e.name==r.id)))||void 0===a?void 0:a.logWholeNotebook)}}))}}r.id="CellAddEvent";class u{listen(e,t,n){var o,i;const l=async(o,i)=>{var l,a,d,s;await(null==i?void 0:i.ready);const c=null==i?void 0:i.editor,v={eventName:u.id,eventTime:Date.now(),eventInfo:{index:e.content.widgets.findIndex((e=>e===i)),doc:null===(a=null===(l=null==c?void 0:c.state)||void 0===l?void 0:l.doc)||void 0===a?void 0:a.toJSON()}};await t.publishEvent(e,v,n,null===(s=null===(d=n.activeEvents)||void 0===d?void 0:d.find((e=>e.name==u.id)))||void 0===s?void 0:s.logWholeNotebook)},a=async o=>{await(null==o?void 0:o.ready);const i=null==o?void 0:o.editor;null==i||i.injectExtension(c.EditorView.updateListener.of((async i=>{if(i.docChanged){const l={eventName:u.id,eventTime:Date.now(),eventInfo:{index:e.content.widgets.findIndex((e=>e===o)),changes:i.changes.toJSON()}};await t.publishEvent(e,l,n,!1)}})))};null===(o=null==e?void 0:e.content)||void 0===o||o.widgets.forEach((e=>{a(e)})),l(e.content,e.content.activeCell),null===(i=e.content.model)||void 0===i||i.cells.changed.connect((async(t,n)=>{var o;"add"===n.type&&a(null===(o=null==e?void 0:e.content)||void 0===o?void 0:o.widgets[n.newIndex])})),e.content.activeCellChanged.connect(l)}}u.id="CellEditEvent";class m{listen(e,t,n){o.NotebookActions.executed.connect((async(o,i)=>{var l,a;if(e.content===i.notebook){const o={id:i.cell.model.id,index:i.notebook.widgets.findIndex((e=>e==i.cell))},d={eventName:m.id,eventTime:Date.now(),eventInfo:{cells:[o],success:i.success,kernelError:i.success?null:i.error}};await t.publishEvent(e,d,n,null===(a=null===(l=n.activeEvents)||void 0===l?void 0:l.find((e=>e.name==m.id)))||void 0===a?void 0:a.logWholeNotebook)}}))}}m.id="CellExecuteEvent";class p{listen(e,t,n){var o;null===(o=e.content.model)||void 0===o||o.cells.changed.connect((async(o,i)=>{var l,a;if("remove"===i.type){const o={index:i.oldIndex},d={eventName:p.id,eventTime:Date.now(),eventInfo:{cells:[o]}};await t.publishEvent(e,d,n,null===(a=null===(l=n.activeEvents)||void 0===l?void 0:l.find((e=>e.name==p.id)))||void 0===a?void 0:a.logWholeNotebook)}}))}}p.id="CellRemoveEvent";class b{listen(e,t,n){e.node.addEventListener("copy",(async()=>{var o,i,l,a;const d={id:null===(o=e.content.activeCell)||void 0===o?void 0:o.model.id,index:e.content.widgets.findIndex((t=>t===e.content.activeCell))},s=null===(i=document.getSelection())||void 0===i?void 0:i.toString(),c={eventName:b.id,eventTime:Date.now(),eventInfo:{cells:[d],selection:s}};await t.publishEvent(e,c,n,null===(a=null===(l=n.activeEvents)||void 0===l?void 0:l.find((e=>e.name==b.id)))||void 0===a?void 0:a.logWholeNotebook)}))}}b.id="ClipboardCopyEvent";class h{listen(e,t,n){e.node.addEventListener("cut",(async()=>{var o,i,l,a;const d={id:null===(o=e.content.activeCell)||void 0===o?void 0:o.model.id,index:e.content.widgets.findIndex((t=>t===e.content.activeCell))},s=null===(i=document.getSelection())||void 0===i?void 0:i.toString(),c={eventName:h.id,eventTime:Date.now(),eventInfo:{cells:[d],selection:s}};await t.publishEvent(e,c,n,null===(a=null===(l=n.activeEvents)||void 0===l?void 0:l.find((e=>e.name==h.id)))||void 0===a?void 0:a.logWholeNotebook)}))}}h.id="ClipboardCutEvent";class g{listen(e,t,n){e.node.addEventListener("paste",(async o=>{var i,l,a;const d={id:null===(i=e.content.activeCell)||void 0===i?void 0:i.model.id,index:e.content.widgets.findIndex((t=>t===e.content.activeCell))},s=(o.clipboardData||window.clipboardData).getData("text"),c={eventName:g.id,eventTime:Date.now(),eventInfo:{cells:[d],selection:s}};await t.publishEvent(e,c,n,null===(a=null===(l=n.activeEvents)||void 0===l?void 0:l.find((e=>e.name==g.id)))||void 0===a?void 0:a.logWholeNotebook)}))}}g.id="ClipboardPasteEvent";class f{listen(e,t,n){document.addEventListener("visibilitychange",(async o=>{var i,l;if("hidden"===document.visibilityState&&document.contains(e.node)){const o={eventName:f.id,eventTime:Date.now(),eventInfo:null};await t.publishEvent(e,o,n,null===(l=null===(i=n.activeEvents)||void 0===i?void 0:i.find((e=>e.name==f.id)))||void 0===l?void 0:l.logWholeNotebook)}}))}}f.id="NotebookHiddenEvent";class E{constructor(){this.produced=!1}async listen(e,t,n){var o,i;if(!this.produced){const l={eventName:E.id,eventTime:Date.now(),eventInfo:{environ:await s("environ")}};await t.publishEvent(e,l,n,null===(i=null===(o=n.activeEvents)||void 0===o?void 0:o.find((e=>e.name==E.id)))||void 0===i?void 0:i.logWholeNotebook),this.produced=!0}}}E.id="NotebookOpenEvent";class w{listen(e,t,n){e.context.saveState.connect((async(o,i)=>{var l,a;if(i.match("completed")){const o={eventName:w.id,eventTime:Date.now(),eventInfo:null};await t.publishEvent(e,o,n,null===(a=null===(l=n.activeEvents)||void 0===l?void 0:l.find((e=>e.name==w.id)))||void 0===a?void 0:a.logWholeNotebook)}}))}}w.id="NotebookSaveEvent";const y=e=>{const t=[];for(let n=0;n<e.content.widgets.length;n++){const o=e.content.widgets[n],i=o.node.offsetTop,l=o.node.offsetTop+o.node.offsetHeight,a=e.content.node.scrollTop;i<=e.content.node.scrollTop+e.content.node.clientHeight&&l>=a&&t.push({id:o.model.id,index:n})}return t};class N{constructor(){this.timeout=0}listen(e,t,n){e.content.node.addEventListener("scroll",(async o=>{var i,l;o.stopPropagation(),clearTimeout(this.timeout),await new Promise((e=>this.timeout=window.setTimeout(e,1500)));const a={eventName:N.id,eventTime:Date.now(),eventInfo:{cells:y(e)}};await t.publishEvent(e,a,n,null===(l=null===(i=n.activeEvents)||void 0===i?void 0:i.find((e=>e.name==N.id)))||void 0===l?void 0:l.logWholeNotebook)}))}}N.id="NotebookScrollEvent";class k{listen(e,t,n){document.addEventListener("visibilitychange",(async()=>{var o,i;if("visible"===document.visibilityState&&document.contains(e.node)){const l={eventName:k.id,eventTime:Date.now(),eventInfo:{cells:y(e)}};await t.publishEvent(e,l,n,null===(i=null===(o=n.activeEvents)||void 0===o?void 0:o.find((e=>e.name==k.id)))||void 0===i?void 0:i.logWholeNotebook)}}))}}k.id="NotebookVisibleEvent";const x=[v,r,m,p,u,b,h,g,f,E,w,N,k];var C=n(29),T=n(178);const I=(e,t)=>{const n=e.map((e=>{var t;return(null===(t=e.args)||void 0===t?void 0:t.id)||e.type})).join(" & ");let o;o=t&&n?`Telemetry data is being logged to ${n} through jupyterlab-pioneer. \n See Help menu -> JupyterLab Pioneer for more details.`:t&&!n?"Telemetry data is being logged through jupyterlab-pioneer. \n See Help menu -> JupyterLab Pioneer for more details.":`Embedded telemetry settings loaded. Telemetry data is being logged to ${n} now.`,T.Notification.info(o,{autoClose:2e4})},j="jupyterlab-pioneer:plugin",S=new l.Token(j);class D{async publishEvent(e,t,n,o){var i,l;if(!e)throw Error("router is listening to a null notebook panel");const a={eventDetail:t,notebookState:{sessionID:null===(i=null==e?void 0:e.sessionContext.session)||void 0===i?void 0:i.id,notebookPath:null==e?void 0:e.context.path,notebookContent:o?null===(l=null==e?void 0:e.model)||void 0===l?void 0:l.toJSON():null},exporter:n},d=await s("export",{method:"POST",body:JSON.stringify(a)});console.log(d)}}const _={id:j,autoStart:!0,requires:[o.INotebookTracker,i.IMainMenu],provides:S,activate:async(e,t,n)=>{const o=await s("version");console.log(`${j}: ${o}`);const i=await s("config"),l=new D;return((e,t,n)=>{e.commands.addCommand("help:pioneer",{label:"JupyterLab Pioneer",execute:()=>{const e=C.createElement("span",{className:"jp-About-header"},"JupyterLab Pioneer",C.createElement("div",{className:"jp-About-header-info"},C.createElement("span",{className:"jp-About-version-info"},C.createElement("span",{className:"jp-About-version"},"Version ",n)))),t=C.createElement("span",{className:"jp-About-externalLinks"},C.createElement("a",{href:"https://github.com/educational-technology-collective/jupyterlab-pioneer/graphs/contributors",target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},"CONTRIBUTOR LIST"),C.createElement("a",{href:"https://jupyterlab-pioneer.readthedocs.io/en/latest/",target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},"DOCUMENTATION"),C.createElement("a",{href:"https://github.com/educational-technology-collective/jupyterlab-pioneer",target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},"GITHUB REPO")),o=C.createElement("span",{className:"jp-About-copyright"},"Â© 2023 Educational Technology Collective"),i=C.createElement("div",{className:"jp-About-body"},t,o);return(0,T.showDialog)({title:e,body:i,buttons:[T.Dialog.createButton({label:"Dismiss",className:"jp-About-button jp-mod-reject jp-mod-styled"})]})}}),t.helpMenu.addGroup([{command:"help:pioneer"}])})(e,n,o),I(i.exporters,!0),t.widgetAdded.connect((async(e,t)=>{var n,o;await t.revealed,await t.sessionContext.ready;const a=i.activeEvents,d=(null===(n=t.content.model)||void 0===n?void 0:n.getMetadata("exporters"))||i.exporters,s=a&&a.length?d.map((e=>(e.activeEvents||(e.activeEvents=a),e))):d.filter((e=>e.activeEvents&&e.activeEvents.length));console.log(s),s.forEach((e=>{x.forEach((n=>{var o;(null===(o=e.activeEvents)||void 0===o?void 0:o.map((e=>e.name)).includes(n.id))&&(new n).listen(t,l,e)}))})),(null===(o=t.content.model)||void 0===o?void 0:o.getMetadata("exporters"))&&I(s,!1)})),l}}}}]);