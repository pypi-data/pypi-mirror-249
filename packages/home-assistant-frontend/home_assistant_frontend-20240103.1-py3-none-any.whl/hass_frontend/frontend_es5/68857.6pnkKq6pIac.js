"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[68857],{59708:function(e,t,n){n.d(t,{K:function(){return i}});var i=function(e,t){var n=matchMedia(e),i=function(e){return t(e.matches)};return n.addListener(i),t(n.matches),function(){return n.removeListener(i)}}},68857:function(e,t,n){n.r(t);var i=n(99312),r=n(81043),s=n(33368),o=n(71650),a=n(82390),u=n(69205),d=n(70906),c=n(91808),l=(n(97393),n(51358),n(46798),n(47084),n(5239),n(98490),n(51467),n(95260)),h=n(50467),f=n(69715),v=n(51153);(0,c.Z)([(0,l.Mo)("hui-conditional-card")],(function(e,t){var c,l=function(t){(0,u.Z)(i,t);var n=(0,d.Z)(i);function i(){var t;(0,o.Z)(this,i);for(var r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return t=n.call.apply(n,[this].concat(s)),e((0,a.Z)(t)),t}return(0,s.Z)(i)}(t);return{F:l,d:[{kind:"method",static:!0,key:"getConfigElement",value:(c=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(42850),n.e(41985),n.e(96055),n.e(77426),n.e(11994),n.e(17333),n.e(68331),n.e(18900),n.e(21948),n.e(46653),n.e(26876)]).then(n.bind(n,7901));case 2:return e.abrupt("return",document.createElement("hui-conditional-card-editor"));case 3:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"conditional",conditions:[],card:{}}}},{kind:"method",key:"setConfig",value:function(e){if(this.validateConfig(e),!e.card)throw new Error("No card configured");this._element=this._createCardElement(e.card)}},{kind:"method",key:"getCardSize",value:function(){return(0,h.N)(this._element)}},{kind:"method",key:"_createCardElement",value:function(e){var t=this,n=(0,v.Z6)(e);return this.hass&&(n.hass=this.hass),n.addEventListener("ll-rebuild",(function(n){n.stopPropagation(),t._rebuildCard(e)}),{once:!0}),n}},{kind:"method",key:"_rebuildCard",value:function(e){this._element=this._createCardElement(e),this.lastChild&&this.replaceChild(this._element,this.lastChild)}}]}}),f.g)},41787:function(e,t,n){n.d(t,{E:function(){return o},s:function(){return u}});n(40271),n(60163),n(76843),n(46798),n(9849),n(13526),n(49089);var i=n(76680),r=n(56007);function s(e,t){var n=e.entity&&t.states[e.entity]?t.states[e.entity].state:r.nZ;return null!=e.state?(0,i.r)(e.state).includes(n):!(0,i.r)(e.state_not).includes(n)}function o(e,t){return e.every((function(e){if("condition"in e)switch(e.condition){case"screen":return!!(n=e).media_query&&matchMedia(n.media_query).matches;case"user":return function(e,t){var n;return!(!e.users||null===(n=t.user)||void 0===n||!n.id)&&e.users.includes(t.user.id)}(e,t);case"numeric_state":return function(e,t){var n,i=null!==(n=e.entity?t.states[e.entity]:void 0)&&void 0!==n?n:void 0;if(!i)return!1;var r=Number(i.state);return!isNaN(r)&&(null==e.above||e.above<r)&&(null==e.below||e.below>r)}(e,t);case"and":return function(e,t){return!e.conditions||o(e.conditions,t)}(e,t);case"or":return function(e,t){return!e.conditions||e.conditions.some((function(e){return o([e],t)}))}(e,t);default:return s(e,t)}var n;return s(e,t)}))}function a(e){return null!=e.entity&&(null!=e.state||null!=e.state_not)}function u(e){return e.every((function(e){if("condition"in e)switch(e.condition){case"screen":return null!=e.media_query;case"user":return function(e){return null!=e.users}(e);case"numeric_state":return function(e){return null!=e.entity&&(null!=e.above||null!=e.below)}(e);case"and":case"or":return function(e){return null!=e.conditions}(e);default:return a(e)}return a(e)}))}},69715:function(e,t,n){n.d(t,{g:function(){return k}});var i=n(33368),r=n(71650),s=n(82390),o=n(69205),a=n(70906),u=n(91808),d=n(34541),c=n(47838),l=n(53709),h=(n(34997),n(46798),n(9849),n(12148),n(36513),n(97393),n(51467),n(50289),n(94167),n(68144)),f=n(95260),v=n(59708),m=n(36639),_=n(41787);function y(e){return e.reduce((function(e,t){return"conditions"in t&&t.conditions&&e.push.apply(e,(0,l.Z)(y(t.conditions))),"condition"in t&&"screen"===t.condition&&t.media_query&&e.push(t.media_query),e}),[])}var k=(0,u.Z)([(0,f.Mo)("hui-conditional-base")],(function(e,t){var n=function(t){(0,o.Z)(u,t);var n=(0,a.Z)(u);function u(){var t;(0,r.Z)(this,u);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e((0,s.Z)(t)),t}return(0,i.Z)(u)}(t);return{F:n,d:[{kind:"field",decorators:[(0,f.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,f.Cb)()],key:"editMode",value:void 0},{kind:"field",decorators:[(0,f.Cb)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Boolean,reflect:!0})],key:"hidden",value:function(){return!1}},{kind:"field",key:"_element",value:void 0},{kind:"field",key:"_mediaQueriesListeners",value:function(){return[]}},{kind:"field",key:"_mediaQueries",value:function(){return[]}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"validateConfig",value:function(e){if(!e.conditions)throw new Error("No conditions configured");if(!Array.isArray(e.conditions))throw new Error("Conditions need to be an array");if(!(0,_.s)(e.conditions))throw new Error("Conditions are invalid");this.lastChild&&this.removeChild(this.lastChild),this._config=e}},{kind:"method",key:"disconnectedCallback",value:function(){(0,d.Z)((0,c.Z)(n.prototype),"disconnectedCallback",this).call(this),this._clearMediaQueries()}},{kind:"method",key:"connectedCallback",value:function(){(0,d.Z)((0,c.Z)(n.prototype),"connectedCallback",this).call(this),this._listenMediaQueries(),this._updateVisibility()}},{kind:"method",key:"_clearMediaQueries",value:function(){for(this._mediaQueries=[];this._mediaQueriesListeners.length;)this._mediaQueriesListeners.pop()()}},{kind:"method",key:"_listenMediaQueries",value:function(){var e=this;if(this._config){var t=y(this._config.conditions);if(!(0,m.v)(t,this._mediaQueries)){for(this._mediaQueries=t;this._mediaQueriesListeners.length;)this._mediaQueriesListeners.pop()();t.forEach((function(t){var n=(0,v.K)(t,(function(t){1===e._config.conditions.length&&"condition"in e._config.conditions[0]&&"screen"===e._config.conditions[0].condition?e._setVisibility(t):e._updateVisibility()}));e._mediaQueriesListeners.push(n)}))}}}},{kind:"method",key:"update",value:function(e){(0,d.Z)((0,c.Z)(n.prototype),"update",this).call(this,e),(e.has("_element")||e.has("_config")||e.has("hass"))&&(this._listenMediaQueries(),this._updateVisibility())}},{kind:"method",key:"_updateVisibility",value:function(){if(this._element&&this.hass&&this._config){this._element.editMode=this.editMode;var e=(0,_.E)(this._config.conditions,this.hass);this._setVisibility(e)}}},{kind:"method",key:"_setVisibility",value:function(e){if(this._element&&this.hass){var t=this.editMode||e;this.hidden=!t,this.style.setProperty("display",t?"":"none"),t?(this._element.hass=this.hass,this._element.parentElement||this.appendChild(this._element)):this._element.parentElement&&this.removeChild(this._element)}}}]}}),h.fl)}}]);
//# sourceMappingURL=68857.6pnkKq6pIac.js.map