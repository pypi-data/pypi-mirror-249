"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[27308],{48932:function(e,t,n){var r,i,a,o=n(88962),s=n(33368),u=n(71650),c=n(82390),l=n(69205),d=n(70906),h=n(91808),f=n(34541),v=n(47838),m=(n(97393),n(76843),n(51467),n(68144)),p=n(95260),g=n(47181),b=n(6936);n(10983),(0,h.Z)([(0,p.Mo)("ha-menu-button")],(function(e,t){var n=function(t){(0,l.Z)(r,t);var n=(0,d.Z)(r);function r(){var t;(0,u.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,c.Z)(t)),t}return(0,s.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,p.Cb)({type:Boolean})],key:"hassio",value:function(){return!1}},{kind:"field",decorators:[(0,p.Cb)()],key:"narrow",value:void 0},{kind:"field",decorators:[(0,p.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_hasNotifications",value:function(){return!1}},{kind:"field",decorators:[(0,p.SB)()],key:"_show",value:function(){return!1}},{kind:"field",key:"_alwaysVisible",value:function(){return!1}},{kind:"field",key:"_attachNotifOnConnect",value:function(){return!1}},{kind:"field",key:"_unsubNotifications",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,f.Z)((0,v.Z)(n.prototype),"connectedCallback",this).call(this),this._attachNotifOnConnect&&(this._attachNotifOnConnect=!1,this._subscribeNotifications())}},{kind:"method",key:"disconnectedCallback",value:function(){(0,f.Z)((0,v.Z)(n.prototype),"disconnectedCallback",this).call(this),this._unsubNotifications&&(this._attachNotifOnConnect=!0,this._unsubNotifications(),this._unsubNotifications=void 0)}},{kind:"method",key:"render",value:function(){if(!this._show)return m.Ld;var e=this._hasNotifications&&(this.narrow||"always_hidden"===this.hass.dockedSidebar);return(0,m.dy)(r||(r=(0,o.Z)([' <ha-icon-button .label="','" .path="','" @click="','"></ha-icon-button> '," "])),this.hass.localize("ui.sidebar.sidebar_toggle"),"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",this._toggleMenu,e?(0,m.dy)(i||(i=(0,o.Z)(['<div class="dot"></div>']))):"")}},{kind:"method",key:"firstUpdated",value:function(e){(0,f.Z)((0,v.Z)(n.prototype),"firstUpdated",this).call(this,e),this.hassio&&(this._alwaysVisible=(Number(window.parent.frontendVersion)||0)<20190710)}},{kind:"method",key:"willUpdate",value:function(e){if((0,f.Z)((0,v.Z)(n.prototype),"willUpdate",this).call(this,e),e.has("narrow")||e.has("hass")){var t=e.has("hass")?e.get("hass"):this.hass,r=(e.has("narrow")?e.get("narrow"):this.narrow)||"always_hidden"===(null==t?void 0:t.dockedSidebar),i=this.narrow||"always_hidden"===this.hass.dockedSidebar;this.hasUpdated&&r===i||(this._show=i||this._alwaysVisible,i?this._subscribeNotifications():this._unsubNotifications&&(this._unsubNotifications(),this._unsubNotifications=void 0))}}},{kind:"method",key:"_subscribeNotifications",value:function(){var e=this;if(this._unsubNotifications)throw new Error("Already subscribed");this._unsubNotifications=(0,b.r)(this.hass.connection,(function(t){e._hasNotifications=t.length>0}))}},{kind:"method",key:"_toggleMenu",value:function(){(0,g.B)(this,"hass-toggle-menu")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,m.iv)(a||(a=(0,o.Z)([":host{position:relative}.dot{pointer-events:none;position:absolute;background-color:var(--accent-color);width:12px;height:12px;top:9px;right:7px;border-radius:50%;border:2px solid var(--app-header-background-color)}"])))}}]}}),m.oi)},22814:function(e,t,n){n.d(t,{Cp:function(){return u},TZ:function(){return c},W2:function(){return s},YY:function(){return l},iI:function(){return o},oT:function(){return a}});var r=n(99312),i=n(81043),a=(n(83609),n(97393),n(46349),n(70320),n(22859),n(85717),n(46798),n(47084),n(88770),n(40271),n(60163),n(2094),"".concat(location.protocol,"//").concat(location.host),function(e){return e.map((function(e){if("string"!==e.type)return e;switch(e.name){case"username":return Object.assign(Object.assign({},e),{},{autocomplete:"username"});case"password":return Object.assign(Object.assign({},e),{},{autocomplete:"current-password"});case"code":return Object.assign(Object.assign({},e),{},{autocomplete:"one-time-code"});default:return e}}))}),o=function(e,t){return e.callWS({type:"auth/sign_path",path:t})},s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS({type:"config/auth_provider/homeassistant/create",user_id:n,username:i,password:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),u=function(e,t,n){return e.callWS({type:"config/auth_provider/homeassistant/change_password",current_password:t,new_password:n})},c=function(e,t,n){return e.callWS({type:"config/auth_provider/homeassistant/admin_change_password",user_id:t,password:n})},l=function(e){return e.callWS({type:"auth/delete_all_refresh_tokens"})}},36877:function(e,t,n){function r(e){return"strategy"in e}n.d(t,{Oh:function(){return a},Q2:function(){return i},Tx:function(){return r},vj:function(){return o}});var i=function(e,t,n){return e.sendMessagePromise({type:"lovelace/config",url_path:t,force:n})},a=function(e,t,n){return e.callWS({type:"lovelace/config/save",url_path:t,config:n})},o=function(e,t){return e.callWS({type:"lovelace/config/delete",url_path:t})}},33464:function(e,t,n){function r(e){return"strategy"in e}n.d(t,{s:function(){return r}})},9893:function(e,t,n){n.d(t,{IT:function(){return c},Qo:function(){return i},V0:function(){return l},cs:function(){return u},kb:function(){return o},tS:function(){return s}});var r=n(53709),i=(n(97393),n(85472),n(46798),n(9849),n(90126),n(88640),n(17692),"custom:"),a=window;"customCards"in a||(a.customCards=[]),"customCardFeatures"in a||(a.customCardFeatures=[]),"customTileFeatures"in a||(a.customTileFeatures=[]);var o=a.customCards,s=function(){return[].concat((0,r.Z)(a.customCardFeatures),(0,r.Z)(a.customTileFeatures))},u=function(e){return o.find((function(t){return t.type===e}))},c=function(e){return e.startsWith(i)},l=function(e){return e.slice(i.length)}},6936:function(e,t,n){n.d(t,{r:function(){return a}});var r=n(71650),i=n(33368),a=(n(65974),n(85717),n(10733),function(e,t){var n=new o,r=e.subscribeMessage((function(e){return t(n.processMessage(e))}),{type:"persistent_notification/subscribe"});return function(){r.then((function(e){return null==e?void 0:e()}))}}),o=function(){function e(){(0,r.Z)(this,e),this.notifications=void 0,this.notifications={}}return(0,i.Z)(e,[{key:"processMessage",value:function(e){if("removed"===e.type)for(var t=0,n=Object.keys(e.notifications);t<n.length;t++){var r=n[t];delete this.notifications[r]}else this.notifications=Object.assign(Object.assign({},this.notifications),e.notifications);return Object.values(this.notifications)}}]),e}()},4289:function(e,t,n){n.d(t,{Fr:function(){return m},wt:function(){return v}});var r,i,a=n(88962),o=n(33368),s=n(71650),u=n(82390),c=n(69205),l=n(70906),d=n(91808),h=(n(97393),n(68144)),f=n(95260),v=(n(91937),n(52039),function(e){var t=document.createElement("hui-error-badge");return t.setConfig(e),t}),m=function(e){return{type:"error",error:e}};(0,d.Z)([(0,f.Mo)("hui-error-badge")],(function(e,t){var n=function(t){(0,c.Z)(r,t);var n=(0,l.Z)(r);function r(){var t;(0,s.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,u.Z)(t)),t}return(0,o.Z)(r)}(t);return{F:n,d:[{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,f.SB)()],key:"_config",value:void 0},{kind:"method",key:"setConfig",value:function(e){this._config=e}},{kind:"method",key:"render",value:function(){return this._config?(0,h.dy)(r||(r=(0,a.Z)([' <ha-label-badge label="Error" description="','"> <ha-svg-icon .path="','"></ha-svg-icon> </ha-label-badge> '])),this._config.error,"M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z"):h.Ld}},{kind:"get",static:!0,key:"styles",value:function(){return(0,h.iv)(i||(i=(0,a.Z)([":host{--ha-label-badge-color:var(--label-badge-red, #fce588)}"])))}}]}}),h.oi)},73953:function(e,t,n){n.d(t,{J:function(){return o}});n(51358),n(46798),n(78399),n(5239),n(56086),n(47884),n(81912),n(64584),n(41483),n(12367),n(9454),n(98490),n(47084),n(71948);var r=n(7778),i=new Set(["error","state-label"]),a={"entity-filter":function(){return n.e(68045).then(n.bind(n,68045))}},o=function(e){return(0,r.Tw)("badge",e,i,a,void 0,"state-label")}},51153:function(e,t,n){n.d(t,{Do:function(){return u},Z6:function(){return s},l$:function(){return o}});n(51358),n(46798),n(78399),n(5239),n(56086),n(47884),n(81912),n(64584),n(41483),n(12367),n(9454),n(98490),n(47084),n(17349),n(80251),n(17274),n(14888),n(69377),n(95035),n(6169),n(41043),n(57464),n(24617),n(2464),n(82778);var r=n(7778),i=new Set(["entity","entities","button","entity-button","glance","grid","light","sensor","thermostat","weather-forecast","tile"]),a={"alarm-panel":function(){return Promise.all([n.e(42850),n.e(77639)]).then(n.bind(n,77639))},area:function(){return Promise.all([n.e(97282),n.e(15896)]).then(n.bind(n,95795))},calendar:function(){return Promise.resolve().then(n.bind(n,80251))},conditional:function(){return n.e(68857).then(n.bind(n,68857))},"empty-state":function(){return n.e(67284).then(n.bind(n,67284))},"energy-compare":function(){return Promise.all([n.e(36857),n.e(55424),n.e(5240)]).then(n.bind(n,61046))},"energy-carbon-consumed-gauge":function(){return Promise.all([n.e(33829),n.e(36857),n.e(55424),n.e(43283),n.e(23389)]).then(n.bind(n,19490))},"energy-date-selection":function(){return Promise.all([n.e(42850),n.e(41985),n.e(36857),n.e(37812),n.e(55424),n.e(13814),n.e(48152)]).then(n.bind(n,10346))},"energy-devices-graph":function(){return Promise.all([n.e(36857),n.e(69519),n.e(55424),n.e(62336),n.e(82121)]).then(n.bind(n,47420))},"energy-distribution":function(){return Promise.all([n.e(36857),n.e(55424),n.e(88023)]).then(n.bind(n,9928))},"energy-gas-graph":function(){return Promise.all([n.e(36857),n.e(11110),n.e(55424),n.e(62336),n.e(41305)]).then(n.bind(n,41305))},"energy-water-graph":function(){return Promise.all([n.e(36857),n.e(11110),n.e(55424),n.e(62336),n.e(89127)]).then(n.bind(n,89127))},"energy-grid-neutrality-gauge":function(){return Promise.all([n.e(33829),n.e(36857),n.e(55424),n.e(78474)]).then(n.bind(n,32176))},"energy-solar-consumed-gauge":function(){return Promise.all([n.e(33829),n.e(36857),n.e(55424),n.e(43283),n.e(40737)]).then(n.bind(n,85930))},"energy-self-sufficiency-gauge":function(){return Promise.all([n.e(33829),n.e(36857),n.e(55424),n.e(43283),n.e(90279)]).then(n.bind(n,61724))},"energy-solar-graph":function(){return Promise.all([n.e(36857),n.e(11110),n.e(55424),n.e(62336),n.e(70310)]).then(n.bind(n,70310))},"energy-sources-table":function(){return Promise.all([n.e(36857),n.e(38838),n.e(55424),n.e(16938)]).then(n.bind(n,16938))},"energy-usage-graph":function(){return Promise.all([n.e(36857),n.e(11110),n.e(55424),n.e(62336),n.e(9897)]).then(n.bind(n,9897))},"entity-filter":function(){return n.e(33688).then(n.bind(n,33688))},error:function(){return Promise.all([n.e(96055),n.e(77426),n.e(55796)]).then(n.bind(n,55796))},gauge:function(){return n.e(43283).then(n.bind(n,43283))},"history-graph":function(){return Promise.all([n.e(69519),n.e(62336),n.e(3876),n.e(88171)]).then(n.bind(n,38026))},"horizontal-stack":function(){return n.e(89173).then(n.bind(n,89173))},humidifier:function(){return n.e(68558).then(n.bind(n,68558))},iframe:function(){return n.e(95018).then(n.bind(n,95018))},logbook:function(){return Promise.all([n.e(97740),n.e(98056)]).then(n.bind(n,8436))},map:function(){return Promise.all([n.e(13786),n.e(60076)]).then(n.bind(n,60076))},markdown:function(){return n.e(51282).then(n.bind(n,51282))},"media-control":function(){return Promise.all([n.e(96055),n.e(82692),n.e(67794),n.e(88387)]).then(n.bind(n,88387))},"picture-elements":function(){return Promise.all([n.e(97282),n.e(6361)]).then(n.bind(n,83358))},"picture-entity":function(){return Promise.all([n.e(97282),n.e(40571)]).then(n.bind(n,41500))},"picture-glance":function(){return Promise.all([n.e(97282),n.e(27472)]).then(n.bind(n,66621))},picture:function(){return n.e(45338).then(n.bind(n,45338))},"plant-status":function(){return n.e(48723).then(n.bind(n,48723))},"recovery-mode":function(){return Promise.all([n.e(3762),n.e(47398),n.e(99734)]).then(n.bind(n,50437))},"todo-list":function(){return Promise.all([n.e(42850),n.e(3762),n.e(41985),n.e(71673),n.e(20400)]).then(n.bind(n,20400))},"shopping-list":function(){return Promise.all([n.e(42850),n.e(3762),n.e(41985),n.e(71673),n.e(20400),n.e(74827)]).then(n.bind(n,74827))},starting:function(){return n.e(47873).then(n.bind(n,47873))},"statistics-graph":function(){return n.e(95396).then(n.bind(n,95396))},statistic:function(){return n.e(99897).then(n.bind(n,99897))},"vertical-stack":function(){return n.e(26136).then(n.bind(n,26136))}},o=function(e){return(0,r.Xm)("card",e,i,a,void 0,void 0)},s=function(e){return(0,r.Tw)("card",e,i,a,void 0,void 0)},u=function(e){return(0,r.ED)(e,"card",i,a)}},7778:function(e,t,n){n.d(t,{ED:function(){return m},N2:function(){return c},Pc:function(){return u},Tw:function(){return f},Xm:function(){return v}});var r=n(99312),i=n(81043),a=n(76775),o=(n(51358),n(46798),n(47084),n(5239),n(98490),n(40271),n(60163),n(51467),n(97393),n(47181)),s=n(9893),u=function(e){var t=document.createElement("hui-error-card");return customElements.get("hui-error-card")?t.setConfig(e):(Promise.all([n.e(96055),n.e(77426),n.e(55796)]).then(n.bind(n,55796)),customElements.whenDefined("hui-error-card").then((function(){customElements.upgrade(t),t.setConfig(e)}))),t},c=function(e,t){return{type:"error",error:e,origConfig:t}},l=function(e,t){var n=document.createElement(e);return n.setConfig(t),n},d=function(e,t){return u(c(e,t))},h=function(e){return(0,s.IT)(e)?(0,s.V0)(e):void 0},f=function(e,t,n,r,i,a){try{return v(e,t,n,r,i,a)}catch(o){return console.error(e,t.type,o),d(o.message,t)}},v=function(e,t,n,r,i,s){if(!t||"object"!==(0,a.Z)(t))throw new Error("Config is not an object");if(!(t.type||s||i&&"entity"in t))throw new Error("No card type configured");var u,c=t.type?h(t.type):void 0;if(c)return function(e,t){if(customElements.get(e))return l(e,t);var n=d("Custom element doesn't exist: ".concat(e,"."),t);if(!e.includes("-"))return n;n.style.display="None";var r=window.setTimeout((function(){n.style.display=""}),2e3);return customElements.whenDefined(e).then((function(){clearTimeout(r),(0,o.B)(n,"ll-rebuild")})),n}(c,t);if(i&&!t.type&&t.entity){var f=t.entity.split(".",1)[0];u="".concat(i[f]||i._domain_not_found,"-entity")}else u=t.type||s;if(void 0===u)throw new Error("No type specified");var v="hui-".concat(u,"-").concat(e);if(r&&u in r)return r[u](),function(e,t){if(customElements.get(e))return l(e,t);var n=document.createElement(e);return customElements.whenDefined(e).then((function(){try{customElements.upgrade(n),n.setConfig(t)}catch(e){(0,o.B)(n,"ll-rebuild")}})),n}(v,t);if(n&&n.has(u))return l(v,t);throw new Error("Unknown type encountered: ".concat(u))},m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){var o,s,u,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=h(t))){e.next=8;break}if(!(s=customElements.get(o))){e.next=5;break}return e.abrupt("return",s);case 5:if(o.includes("-")){e.next=7;break}throw new Error("Custom element not found: ".concat(o));case 7:return e.abrupt("return",new Promise((function(e,t){setTimeout((function(){return t(new Error("Custom element not found: ".concat(o)))}),2e3),customElements.whenDefined(o).then((function(){return e(customElements.get(o))}))})));case 8:if(u="hui-".concat(t,"-").concat(n),c=customElements.get(u),!i||!i.has(t)){e.next=12;break}return e.abrupt("return",c);case 12:if(!a||!(t in a)){e.next=14;break}return e.abrupt("return",c||a[t]().then((function(){return customElements.get(u)})));case 14:throw new Error("Unknown type: ".concat(t));case 15:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},89026:function(e,t,n){n.d(t,{Q:function(){return o},t:function(){return a}});n(51358),n(46798),n(47084),n(5239),n(98490);var r=n(7778),i={picture:function(){return n.e(69130).then(n.bind(n,69130))},buttons:function(){return Promise.all([n.e(61830),n.e(32587)]).then(n.bind(n,32587))},graph:function(){return n.e(22486).then(n.bind(n,22486))}},a=function(e){return(0,r.Tw)("header-footer",e,void 0,i,void 0,void 0)},o=function(e){return(0,r.ED)(e,"header-footer",void 0,i)}},37482:function(e,t,n){n.d(t,{T:function(){return u},m:function(){return s}});n(51358),n(46798),n(78399),n(5239),n(56086),n(47884),n(81912),n(64584),n(41483),n(12367),n(9454),n(98490),n(47084),n(70808),n(12141),n(31479),n(23266),n(65716),n(99931),n(83896),n(45340),n(56427),n(23658);var r=n(7778),i=new Set(["media-player-entity","scene-entity","script-entity","sensor-entity","simple-entity","toggle-entity","button","call-service"]),a={"button-entity":function(){return n.e(85611).then(n.bind(n,85611))},"climate-entity":function(){return n.e(35642).then(n.bind(n,35642))},"cover-entity":function(){return n.e(16755).then(n.bind(n,16755))},"date-entity":function(){return Promise.all([n.e(42850),n.e(17489)]).then(n.bind(n,17489))},"datetime-entity":function(){return Promise.all([n.e(42850),n.e(3762),n.e(49412),n.e(79344),n.e(12545),n.e(3590)]).then(n.bind(n,98208))},"event-entity":function(){return Promise.resolve().then(n.bind(n,70808))},"group-entity":function(){return n.e(81534).then(n.bind(n,81534))},"input-button-entity":function(){return n.e(83968).then(n.bind(n,83968))},"humidifier-entity":function(){return n.e(41102).then(n.bind(n,41102))},"input-datetime-entity":function(){return Promise.all([n.e(42850),n.e(3762),n.e(49412),n.e(12545),n.e(78284)]).then(n.bind(n,22350))},"input-number-entity":function(){return Promise.all([n.e(42850),n.e(12335)]).then(n.bind(n,33906))},"input-select-entity":function(){return Promise.all([n.e(3762),n.e(49412),n.e(25675)]).then(n.bind(n,25675))},"input-text-entity":function(){return Promise.all([n.e(42850),n.e(73943)]).then(n.bind(n,73943))},"lock-entity":function(){return n.e(61596).then(n.bind(n,61596))},"number-entity":function(){return Promise.all([n.e(42850),n.e(66778)]).then(n.bind(n,66778))},"select-entity":function(){return Promise.all([n.e(3762),n.e(49412),n.e(35994)]).then(n.bind(n,35994))},"text-entity":function(){return Promise.all([n.e(42850),n.e(97600)]).then(n.bind(n,97600))},"time-entity":function(){return Promise.all([n.e(42850),n.e(3762),n.e(49412),n.e(12545),n.e(66004)]).then(n.bind(n,35246))},"timer-entity":function(){return n.e(31203).then(n.bind(n,31203))},"update-entity":function(){return n.e(66798).then(n.bind(n,66798))},"valve-entity":function(){return n.e(81673).then(n.bind(n,81673))},conditional:function(){return n.e(97749).then(n.bind(n,97749))},"weather-entity":function(){return n.e(71850).then(n.bind(n,71850))},divider:function(){return n.e(41930).then(n.bind(n,41930))},section:function(){return n.e(94832).then(n.bind(n,94832))},weblink:function(){return n.e(44689).then(n.bind(n,44689))},cast:function(){return n.e(25840).then(n.bind(n,25840))},buttons:function(){return Promise.all([n.e(61830),n.e(82137)]).then(n.bind(n,82137))},attribute:function(){return Promise.resolve().then(n.bind(n,45340))},text:function(){return n.e(63459).then(n.bind(n,63459))}},o={_domain_not_found:"simple",alert:"toggle",automation:"toggle",button:"button",climate:"climate",cover:"cover",date:"date",datetime:"datetime",event:"event",fan:"toggle",group:"group",humidifier:"humidifier",input_boolean:"toggle",input_button:"input-button",input_datetime:"input-datetime",input_number:"input-number",input_select:"input-select",input_text:"input-text",light:"toggle",lock:"lock",media_player:"media-player",number:"number",remote:"toggle",scene:"scene",script:"script",select:"select",sensor:"sensor",siren:"toggle",switch:"toggle",text:"text",time:"time",timer:"timer",update:"update",vacuum:"toggle",valve:"valve",water_heater:"climate",weather:"weather"},s=function(e){return(0,r.Tw)("row",e,i,a,o,void 0)},u=function(e){return(0,r.ED)(e,"row",i,a)}},97504:function(e,t,n){n.d(t,{F:function(){return a},L:function(){return i}});n(51358),n(46798),n(47084),n(5239),n(98490);var r=n(47181),i=function(){return Promise.all([n.e(42850),n.e(28597),n.e(41985),n.e(11994),n.e(17333),n.e(32825),n.e(37168),n.e(46653),n.e(71687)]).then(n.bind(n,52408))},a=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"hui-dialog-create-card",dialogImport:i,dialogParams:t})}},62765:function(e,t,n){n.d(t,{K:function(){return i},k:function(){return a}});n(51358),n(46798),n(47084),n(5239),n(98490);var r=n(47181),i=function(){return n.e(95050).then(n.bind(n,95050))},a=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"hui-dialog-delete-card",dialogImport:i,dialogParams:t})}},18678:function(e,t,n){n.d(t,{I:function(){return i},x:function(){return a}});n(51358),n(46798),n(47084),n(5239),n(98490);var r=n(47181),i=function(){return Promise.all([n.e(28597),n.e(96055),n.e(77426),n.e(68331),n.e(21948),n.e(90614)]).then(n.bind(n,42609))},a=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"hui-dialog-edit-card",dialogImport:i,dialogParams:t})}},54324:function(e,t,n){n.d(t,{BN:function(){return s},LG:function(){return u},PT:function(){return g},Uo:function(){return v},Y7:function(){return d},YI:function(){return m},Z0:function(){return o},c5:function(){return h},f1:function(){return c},mA:function(){return p},qD:function(){return l},wI:function(){return f}});var r=n(53709),i=n(68990),a=(n(46798),n(9849),n(50289),n(94167),n(36513),n(51467),n(97393),n(85717),n(46349),n(70320),n(87438),n(22890),n(17692),n(41353),n(13526),n(33464)),o=function(e,t,n){var o=(0,i.Z)(t,1)[0],s=[];return e.views.forEach((function(t,i){if(i===o){if((0,a.s)(t))throw new Error("You cannot add a card in a strategy view.");var u=t.cards?[].concat((0,r.Z)(t.cards),[n]):[n];s.push(Object.assign(Object.assign({},t),{},{cards:u}))}else s.push(e.views[i])})),Object.assign(Object.assign({},e),{},{views:s})},s=function(e,t,n){var o=(0,i.Z)(t,1)[0],s=[];return e.views.forEach((function(t,i){if(i===o){if((0,a.s)(t))throw new Error("You cannot add cards in a strategy view.");var u=t.cards?[].concat((0,r.Z)(t.cards),(0,r.Z)(n)):(0,r.Z)(n);s.push(Object.assign(Object.assign({},t),{},{cards:u}))}else s.push(e.views[i])})),Object.assign(Object.assign({},e),{},{views:s})},u=function(e,t,n){var r=(0,i.Z)(t,2),o=r[0],s=r[1],u=[];return e.views.forEach((function(t,r){if(r===o){if((0,a.s)(t))throw new Error("You cannot replace a card in a strategy view.");u.push(Object.assign(Object.assign({},t),{},{cards:(t.cards||[]).map((function(e,t){return t===s?n:e}))}))}else u.push(e.views[r])})),Object.assign(Object.assign({},e),{},{views:u})},c=function(e,t){var n=(0,i.Z)(t,2),r=n[0],o=n[1],s=[];return e.views.forEach((function(t,n){if(n===r){if((0,a.s)(t))throw new Error("You cannot delete a card in a strategy view.");s.push(Object.assign(Object.assign({},t),{},{cards:(t.cards||[]).filter((function(e,t){return t!==o}))}))}else s.push(e.views[n])})),Object.assign(Object.assign({},e),{},{views:s})},l=function(e,t,n){var o=(0,i.Z)(t,2),s=o[0],u=o[1],c=[];return e.views.forEach((function(t,i){if(i===s){if((0,a.s)(t))throw new Error("You cannot insert a card in a strategy view.");var o=t.cards?[].concat((0,r.Z)(t.cards.slice(0,u)),[n],(0,r.Z)(t.cards.slice(u))):[n];c.push(Object.assign(Object.assign({},t),{},{cards:o}))}else c.push(e.views[i])})),Object.assign(Object.assign({},e),{},{views:c})},d=function(e,t,n){var r=e.views[t[0]],i=e.views[n[0]];if((0,a.s)(r)||(0,a.s)(i))throw new Error("You cannot move swap cards in a strategy view.");var o=r.cards[t[1]],s=i.cards[n[1]],u=Object.assign(Object.assign({},r),{},{cards:r.cards.map((function(e,n){return n===t[1]?s:e}))}),c=t[0]===n[0]?u:i,l=Object.assign(Object.assign({},c),{},{cards:c.cards.map((function(e,t){return t===n[1]?o:e}))});return Object.assign(Object.assign({},e),{},{views:e.views.map((function(e,r){return r===n[0]?l:r===t[0]?u:e}))})},h=function(e,t,n){var i=e.views[t[0]];if((0,a.s)(i))throw new Error("You cannot move a card in a strategy view.");var o=t[1],s=Math.max(Math.min(n-1,i.cards.length-1),0),u=(0,r.Z)(i.cards),c=u[o];u.splice(o,1),u.splice(s,0,c);var l=Object.assign(Object.assign({},i),{},{cards:u});return Object.assign(Object.assign({},e),{},{views:e.views.map((function(e,n){return n===t[0]?l:e}))})},f=function(e,t,n){if(t[0]===n[0])throw new Error("You cannot move a card to the view it is in.");var i=e.views[t[0]],o=e.views[n[0]];if((0,a.s)(i))throw new Error("You cannot move a card from a strategy view.");if((0,a.s)(o))throw new Error("You cannot move a card to a strategy view.");var s=i.cards[t[1]],u=Object.assign(Object.assign({},i),{},{cards:(i.cards||[]).filter((function(e,n){return n!==t[1]}))}),c=o.cards?[].concat((0,r.Z)(o.cards),[s]):[s],l=Object.assign(Object.assign({},o),{},{cards:c});return Object.assign(Object.assign({},e),{},{views:e.views.map((function(e,r){return r===n[0]?l:r===t[0]?u:e}))})},v=function(e,t,n){if(n.path&&t.views.some((function(e){return e.path===n.path})))throw new Error(e.localize("ui.panel.lovelace.editor.edit_view.error_same_url"));return Object.assign(Object.assign({},t),{},{views:t.views.concat(n)})},m=function(e,t,n,r){if(r.path&&t.views.some((function(e,t){return e.path===r.path&&t!==n})))throw new Error(e.localize("ui.panel.lovelace.editor.edit_view.error_same_url"));return Object.assign(Object.assign({},t),{},{views:t.views.map((function(e,t){return t===n?r:e}))})},p=function(e,t,n){var r=e.views[t],i=e.views[n];return Object.assign(Object.assign({},e),{},{views:e.views.map((function(e,a){return a===n?r:a===t?i:e}))})},g=function(e,t){return Object.assign(Object.assign({},e),{},{views:e.views.filter((function(e,n){return n!==t}))})}},12042:function(e,t,n){n.d(t,{ar:function(){return f},lN:function(){return l},mQ:function(){return v},to:function(){return h}});var r=n(99312),i=n(81043),a=(n(51358),n(46798),n(47084),n(5239),n(98490),n(97393),n(88640),n(51467),n(17692),n(85717),n(46349),n(70320),n(36877)),o=n(33464),s=n(6769),u="custom:",c={dashboard:{"original-states":function(){return n.e(1529).then(n.bind(n,1529))}},view:{"original-states":function(){return Promise.all([n.e(36857),n.e(55424),n.e(47680),n.e(53299)]).then(n.bind(n,7616))},energy:function(){return Promise.all([n.e(36857),n.e(55424),n.e(1906)]).then(n.bind(n,1242))}}},l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n in c[t])){e.next=5;break}return e.next=3,c[t][n]();case 3:return a="".concat(n,"-").concat(t,"-strategy"),e.abrupt("return",customElements.get(a));case 5:if(n.startsWith(u)){e.next=7;break}throw new Error("Unknown strategy");case 7:return o="ll-strategy-".concat(n.slice(7)),s="ll-strategy-".concat(t,"-").concat(n.slice(7)),e.next=11,Promise.race([customElements.whenDefined(o),customElements.whenDefined(s),new Promise((function(e){setTimeout((function(){return e(!0)}),5e3)}))]);case 11:if(e.t0=e.sent,!0!==e.t0){e.next=14;break}throw new Error("Timeout waiting for strategy element ".concat(s," to be registered"));case 14:return e.abrupt("return",null!==(i=customElements.get(s))&&void 0!==i?i:customElements.get(o));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){var o,u,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.type){e.next=3;break}return e.abrupt("return",n("No strategy type found"));case 3:return e.prev=3,e.next=6,l(t,o);case 6:if(u=e.sent,!(0,s.sR)(u)){e.next=16;break}if("dashboard"!==t||!("generateDashboard"in u)){e.next=12;break}return e.next=11,u.generateDashboard({config:{strategy:i,views:[]},hass:a});case 11:case 15:case 19:return e.abrupt("return",e.sent);case 12:if("view"!==t||!("generateView"in u)){e.next=16;break}return e.next=15,u.generateView({config:{views:[]},view:{strategy:i},hass:a});case 16:return c=(0,s.n2)(i),e.next=19,u.generate(c,a);case 22:return e.prev=22,e.t0=e.catch(3),"timeout"!==e.t0.message&&console.error(e.t0),e.abrupt("return",n(e.t0));case 26:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d("dashboard",(function(e){return{views:[{title:"Error",cards:[{type:"markdown",content:"Error loading the dashboard strategy:\n> ".concat(e)}]}]}}),t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d("view",(function(e){return{cards:[{type:"markdown",content:"Error loading the view strategy:\n> ".concat(e)}]}}),t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,a.Tx)(t)){e.next=6;break}return e.next=3,h(t.strategy,n);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=Object.assign({},t);case 7:return i=e.t0,e.next=10,Promise.all(i.views.map((function(e){return(0,o.s)(e)?f(e.strategy,n):e})));case 10:return i.views=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},6769:function(e,t,n){n.d(t,{n2:function(){return o},sR:function(){return i},ug:function(){return a}});var r=n(76775),i=(n(65974),n(85717),function(e){return!("generate"in e)}),a=function(e){return 2===Object.keys(e).length&&"options"in e&&"object"===(0,r.Z)(e.options)},o=function(e){if(!a(e))return e;var t=Object.assign(Object.assign({},e),e.options);return delete t.options,t}},13192:function(e,t,n){n.d(t,{Jh:function(){return i},Zx:function(){return r},cW:function(){return o},rQ:function(){return a}});var r="masonry",i="panel",a="sidebar",o=[i,a]},51292:function(e,t,n){var r,i,a,o,s=n(99312),u=n(81043),c=n(33368),l=n(71650),d=n(82390),h=n(69205),f=n(70906),v=n(91808),m=n(34541),p=n(47838),g=(n(97393),n(76843),n(46798),n(9849),n(50289),n(94167),n(85717),n(46349),n(70320),n(68144)),b=n(95260),y=n(62877),w=(n(6315),n(52039),n(4289)),k=n(90271),_=n(73953),Z=n(51153),E=n(7778),x=(n(51358),n(78399),n(5239),n(56086),n(47884),n(81912),n(64584),n(41483),n(12367),n(9454),n(98490),n(47084),n(68990)),C=n(40039),j=n(88962),O=(n(36513),n(34997),n(12148),n(83448)),P=n(47181),T=n(87744),N=n(96151),M=n(50467),S=function(e,t){for(var n=0,r=0;r<e.length;r++){if(e[r]<5){n=r;break}e[r]<e[n]&&(n=r)}return e[n]+=t,n},B=(0,v.Z)(null,(function(e,t){var v,y=function(t){(0,h.Z)(r,t);var n=(0,f.Z)(r);function r(){var t;(0,l.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,d.Z)(t)),t}return(0,c.Z)(r)}(t);return{F:y,d:[{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,b.Cb)({type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,b.Cb)({type:Number})],key:"index",value:void 0},{kind:"field",decorators:[(0,b.Cb)({type:Boolean})],key:"isStrategy",value:function(){return!1}},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"cards",value:function(){return[]}},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"badges",value:function(){return[]}},{kind:"field",decorators:[(0,b.SB)()],key:"_columns",value:void 0},{kind:"field",key:"_createColumnsIteration",value:function(){return 0}},{kind:"field",key:"_mqls",value:void 0},{kind:"field",key:"_mqlListenerRef",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,m.Z)((0,p.Z)(y.prototype),"connectedCallback",this).call(this),this._initMqls()}},{kind:"method",key:"disconnectedCallback",value:function(){var e,t=this;(0,m.Z)((0,p.Z)(y.prototype),"disconnectedCallback",this).call(this),null===(e=this._mqls)||void 0===e||e.forEach((function(e){e.removeListener(t._mqlListenerRef)})),this._mqlListenerRef=void 0,this._mqls=void 0}},{kind:"method",key:"setConfig",value:function(e){}},{kind:"method",key:"render",value:function(){var e,t;return(0,g.dy)(r||(r=(0,j.Z)([" ",' <div id="columns" class="','"></div> '," "])),this.badges.length>0?(0,g.dy)(i||(i=(0,j.Z)(['<div class="badges">',"</div>"])),this.badges):"",null!==(e=this.lovelace)&&void 0!==e&&e.editMode?"edit-mode":"",null!==(t=this.lovelace)&&void 0!==t&&t.editMode?(0,g.dy)(a||(a=(0,j.Z)([' <ha-fab .label="','" extended @click="','" class="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> '])),this.hass.localize("ui.panel.lovelace.editor.edit_card.add"),this._addCard,(0,O.$)({rtl:(0,T.HE)(this.hass)}),"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"):"")}},{kind:"method",key:"_initMqls",value:function(){var e=this;this._mqls=[300,600,900,1200].map((function(t){var n=window.matchMedia("(min-width: ".concat(t,"px)"));return e._mqlListenerRef||(e._mqlListenerRef=e._updateColumns.bind(e)),n.addListener(e._mqlListenerRef),n}))}},{kind:"get",key:"mqls",value:function(){return this._mqls||this._initMqls(),this._mqls}},{kind:"method",key:"willUpdate",value:function(e){var t;if((0,m.Z)((0,p.Z)(y.prototype),"willUpdate",this).call(this,e),null!==(t=this.lovelace)&&void 0!==t&&t.editMode&&n.e(49826).then(n.bind(n,49826)),e.has("hass")){var r=e.get("hass");if(this.hass.dockedSidebar!==(null==r?void 0:r.dockedSidebar))return void this._updateColumns()}if(e.has("narrow"))this._updateColumns();else{var i=e.get("lovelace");(e.has("cards")||e.has("lovelace")&&i&&(i.config!==this.lovelace.config||i.editMode!==this.lovelace.editMode))&&this._createColumns()}}},{kind:"method",key:"_addCard",value:function(){(0,P.B)(this,"ll-create-card")}},{kind:"method",key:"_createRootElement",value:function(e){for(var t=this.shadowRoot.getElementById("columns");t.lastChild;)t.removeChild(t.lastChild);e.forEach((function(e){return t.appendChild(e)}))}},{kind:"method",key:"_createColumns",value:(v=(0,u.Z)((0,s.Z)().mark((function e(){var t,n,r,i,a,o,u,c,l,d,h,f,v,m,p,g,b,y=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._columns){e.next=2;break}return e.abrupt("return");case 2:for(this._createColumnsIteration++,t=this._createColumnsIteration,n=[],r=[],i=0;i<Math.min(this._columns,this.cards.length);i++)(a=document.createElement("div")).classList.add("column"),n.push(0),r.push(a);this.hasUpdated?this._createRootElement(r):this.updateComplete.then((function(){y._createRootElement(r)})),c=(0,C.Z)(this.cards.entries()),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=27;break}return d=(0,x.Z)(l.value,2),h=d[0],f=d[1],void 0===o&&(o=(0,N.y)().then((function(){o=void 0,u=void 0}))),v=void 0,void 0===u?u=new Date:(new Date).getTime()-u.getTime()>16&&(v=o),m=(0,M.N)(f),e.next=19,Promise.all([m,v]);case 19:if(p=e.sent,g=(0,x.Z)(p,1),b=g[0],t===this._createColumnsIteration){e.next=24;break}return e.abrupt("return");case 24:this._addCardToColumn(r[S(n,b)],h,this.lovelace.editMode);case 25:e.next=11;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(9),c.e(e.t0);case 32:return e.prev=32,c.f(),e.finish(32);case 35:r.forEach((function(e){e.lastChild||e.parentElement.removeChild(e)}));case 36:case"end":return e.stop()}}),e,this,[[9,29,32,35]])}))),function(){return v.apply(this,arguments)})},{kind:"method",key:"_addCardToColumn",value:function(e,t,n){var r=this.cards[t];if(!n||this.isStrategy)r.editMode=!1,e.appendChild(r);else{var i=document.createElement("hui-card-options");i.hass=this.hass,i.lovelace=this.lovelace,i.path=[this.index,t],r.editMode=!0,i.appendChild(r),e.appendChild(i)}}},{kind:"method",key:"_updateColumns",value:function(){var e=this.mqls.reduce((function(e,t){return e+Number(t.matches)}),0),t=Math.max(1,e-Number(!this.narrow&&"docked"===this.hass.dockedSidebar));t!==this._columns&&(this._columns=t,this._createColumns())}},{kind:"get",static:!0,key:"styles",value:function(){return(0,g.iv)(o||(o=(0,j.Z)([":host{display:block;padding-top:4px}.badges{margin:8px 16px;font-size:85%;text-align:center}#columns{display:flex;flex-direction:row;justify-content:center;margin-left:4px;margin-right:4px}#columns.edit-mode{margin-bottom:72px}.column{flex:1 0 0;max-width:500px;min-width:0}.column:has(> *){flex-grow:1}.column:not(:has(> :not([hidden]))){flex-grow:0}.column>:not([hidden]){display:block;margin:var(--masonry-view-card-margin,4px 4px 8px)}ha-fab{position:fixed;right:calc(16px + env(safe-area-inset-right));bottom:calc(16px + env(safe-area-inset-bottom));z-index:1}ha-fab.rtl{right:auto;left:calc(16px + env(safe-area-inset-left))}@media (max-width:500px){.column>*{margin-left:0;margin-right:0}}@media (max-width:599px){.column{max-width:600px}}"])))}}]}}),g.oi);customElements.define("hui-masonry-view",B);var L=new Set(["masonry"]),V={panel:function(){return n.e(48480).then(n.bind(n,48480))},sidebar:function(){return n.e(60999).then(n.bind(n,60999))}},D=n(97504),q=n(18678),H=(n(51467),n(33464)),F=n(26765),R=n(81796),I=function(e,t,n){var r={message:t.localize("ui.common.successfully_deleted")};n&&(r.action={action:n,text:t.localize("ui.common.undo")}),(0,R.C)(e,r)},U=n(62765),Y=n(54324);function A(){return A=(0,u.Z)((0,s.Z)().mark((function e(t,n,r,i){var a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.config.views[i[0]],!(0,H.s)(a)){e.next=3;break}throw new Error("Deleting cards in a strategy view is not supported.");case 3:o=a.cards[i[1]],(0,U.k)(t,{cardConfig:o,deleteCard:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var a,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,Y.f1)(r.config,i),e.next=4,r.saveConfig(a);case 4:c=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.saveConfig((0,Y.qD)(a,i,o));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I(t,n,c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,F.showAlertDialog)(t,{text:"Deleting failed: ".concat(e.t0.message)});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()});case 5:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}var z=n(12042),W=n(13192);(0,v.Z)([(0,b.Mo)("hui-view")],(function(e,t){var n,r=function(t){(0,h.Z)(r,t);var n=(0,f.Z)(r);function r(){var t;(0,l.Z)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),e((0,d.Z)(t)),t}return(0,c.Z)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,b.Cb)({type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,b.Cb)({type:Number})],key:"index",value:void 0},{kind:"field",decorators:[(0,b.SB)()],key:"_cards",value:function(){return[]}},{kind:"field",decorators:[(0,b.SB)()],key:"_badges",value:function(){return[]}},{kind:"field",key:"_layoutElementType",value:void 0},{kind:"field",key:"_layoutElement",value:void 0},{kind:"field",key:"_viewConfigTheme",value:void 0},{kind:"method",key:"createCardElement",value:function(e){var t=this,n=(0,Z.Z6)(e);try{n.hass=this.hass}catch(r){return(0,E.Pc)((0,E.N2)(r.message,e))}return n.addEventListener("ll-rebuild",(function(r){t.lovelace.editMode||(r.stopPropagation(),t._rebuildCard(n,e))}),{once:!0}),n}},{kind:"method",key:"createBadgeElement",value:function(e){var t=this,n=(0,_.J)(e);try{n.hass=this.hass}catch(r){return(0,w.wt)((0,w.Fr)(r.message))}return n.addEventListener("ll-badge-rebuild",(function(){t._rebuildBadge(n,e)}),{once:!0}),n}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"willUpdate",value:function(e){(0,m.Z)((0,p.Z)(r.prototype),"willUpdate",this).call(this,e);var t=e.get("lovelace");(e.has("index")||e.has("lovelace")&&(!t||this.lovelace.config.views[this.index]!==t.config.views[this.index]))&&this._initializeConfig()}},{kind:"method",key:"update",value:function(e){var t=this;if((0,m.Z)((0,p.Z)(r.prototype),"update",this).call(this,e),this._layoutElement){if(e.has("hass")){this._badges.forEach((function(e){try{e.hass=t.hass}catch(n){t._rebuildBadge(e,(0,w.Fr)(n.message))}})),this._cards.forEach((function(e){try{e.hass=t.hass}catch(n){t._rebuildCard(e,(0,E.N2)(n.message,null))}})),this._layoutElement.hass=this.hass;var n=e.get("hass");n&&this.hass.themes===n.themes&&this.hass.selectedTheme===n.selectedTheme||(0,y.R)(this,this.hass.themes,this._viewConfigTheme)}e.has("narrow")&&(this._layoutElement.narrow=this.narrow),e.has("lovelace")&&(this._layoutElement.lovelace=this.lovelace),e.has("_cards")&&(this._layoutElement.cards=this._cards),e.has("_badges")&&(this._layoutElement.badges=this._badges)}}},{kind:"method",key:"_initializeConfig",value:(n=(0,u.Z)((0,s.Z)().mark((function e(){var t,n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.lovelace.config.views[this.index],n=!1,!(0,H.s)(t)){e.next=7;break}return n=!0,e.next=6,(0,z.ar)(t.strategy,this.hass);case 6:t=e.sent;case 7:if(t=Object.assign(Object.assign({},t),{},{type:t.panel?W.Jh:t.type||W.Zx}),r=!1,this._layoutElement&&this._layoutElementType===t.type||(r=!0,this._createLayoutElement(t)),this._createBadges(t),this._createCards(t),this._layoutElement.isStrategy=n,this._layoutElement.hass=this.hass,this._layoutElement.narrow=this.narrow,this._layoutElement.lovelace=this.lovelace,this._layoutElement.index=this.index,this._layoutElement.cards=this._cards,this._layoutElement.badges=this._badges,(0,y.R)(this,this.hass.themes,t.theme),this._viewConfigTheme=t.theme,r){for(;this.lastChild;)this.removeChild(this.lastChild);this.appendChild(this._layoutElement)}case 22:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_createLayoutElement",value:function(e){var t=this;this._layoutElement=function(e){return(0,E.Tw)("view",e,L,V)}(e),this._layoutElementType=e.type,this._layoutElement.addEventListener("ll-create-card",(function(){(0,D.F)(t,{lovelaceConfig:t.lovelace.config,saveConfig:t.lovelace.saveConfig,path:[t.index]})})),this._layoutElement.addEventListener("ll-edit-card",(function(e){(0,q.x)(t,{lovelaceConfig:t.lovelace.config,saveConfig:t.lovelace.saveConfig,path:e.detail.path})})),this._layoutElement.addEventListener("ll-delete-card",(function(e){if(e.detail.confirm)!function(e,t,n,r){A.apply(this,arguments)}(t,t.hass,t.lovelace,e.detail.path);else{var n=(0,Y.f1)(t.lovelace.config,e.detail.path);t.lovelace.saveConfig(n)}}))}},{kind:"method",key:"_createBadges",value:function(e){var t=this;if(e&&e.badges&&Array.isArray(e.badges)){var n=(0,k.A)(e.badges);this._badges=n.map((function(e){var n=(0,_.J)(e);try{n.hass=t.hass}catch(r){return(0,w.wt)((0,w.Fr)(r.message))}return n}))}else this._badges=[]}},{kind:"method",key:"_createCards",value:function(e){var t=this;e&&e.cards&&Array.isArray(e.cards)?this._cards=e.cards.map((function(e){var n=t.createCardElement(e);try{n.hass=t.hass}catch(r){return(0,E.Pc)((0,E.N2)(r.message,e))}return n})):this._cards=[]}},{kind:"method",key:"_rebuildCard",value:function(e,t){var n=this.createCardElement(t);try{n.hass=this.hass}catch(r){n=(0,E.Pc)((0,E.N2)(r.message,t))}e.parentElement&&e.parentElement.replaceChild(n,e),this._cards=this._cards.map((function(t){return t===e?n:t}))}},{kind:"method",key:"_rebuildBadge",value:function(e,t){var n=this.createBadgeElement(t);try{n.hass=this.hass}catch(r){n=(0,w.wt)((0,w.Fr)(r.message))}e.parentElement&&e.parentElement.replaceChild(n,e),this._badges=this._badges.map((function(t){return t===e?n:t}))}}]}}),g.fl)}}]);
//# sourceMappingURL=27308.ey-bIhIYkmU.js.map