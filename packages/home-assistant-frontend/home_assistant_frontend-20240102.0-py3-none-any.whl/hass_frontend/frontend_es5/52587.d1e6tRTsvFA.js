(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[52587],{58556:function(e,t,n){"use strict";var r;n(46798),n(94570),n(91584),(r="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)||"undefined"!=typeof navigator&&"ReactNative"===navigator.product?global:self).Proxy||(r.Proxy=n(87082)(),r.Proxy.revocable=r.Proxy.revocable)},87082:function(e,t,n){var r=n(3355).default;n(51467),n(30535),n(17692),n(80628),n(30419),n(46798),n(9849),n(50289),n(94167),n(40720),n(37792),e.exports=function(){var e,t=null;function n(e){return!!e&&("object"===r(e)||"function"==typeof e)}function o(e){if(null!==e&&!n(e))throw new TypeError("Object prototype may only be an Object or null: "+e)}var i=Object,a=Boolean(i.create)||!({__proto__:null}instanceof i),c=i.create||(a?function(e){return o(e),{__proto__:e}}:function(e){if(o(e),null===e)throw new SyntaxError("Native Object.create is required to create objects with null prototype");var t=function(){};return t.prototype=e,new t}),s=function(){return null},u=i.getPrototypeOf||([].__proto__===Array.prototype?function(e){var t=e.__proto__;return n(t)?t:null}:s);return e=function(r,f){if(void 0===(this&&this instanceof e?this.constructor:void 0))throw new TypeError("Constructor Proxy requires 'new'");if(!n(r)||!n(f))throw new TypeError("Cannot create proxy with a non-object as target or handler");var l=function(){};t=function(){r=null,l=function(e){throw new TypeError("Cannot perform '".concat(e,"' on a proxy that has been revoked"))}},setTimeout((function(){t=null}),0);var p=f;for(var d in f={get:null,set:null,apply:null,construct:null},p){if(!(d in f))throw new TypeError("Proxy polyfill does not support trap '".concat(d,"'"));f[d]=p[d]}"function"==typeof p&&(f.apply=p.apply.bind(p));var y,h=u(r),w=!1,v=!1;"function"==typeof r?(y=function(){var e=this&&this.constructor===y,t=Array.prototype.slice.call(arguments);return l(e?"construct":"apply"),e&&f.construct?f.construct.call(this,r,t):!e&&f.apply?f.apply(r,this,t):e?(t.unshift(r),new(r.bind.apply(r,t))):r.apply(this,t)},w=!0):r instanceof Array?(y=[],v=!0):y=a||null!==h?c(h):{};var b=f.get?function(e){return l("get"),f.get(this,e,y)}:function(e){return l("get"),this[e]},m=f.set?function(e,t){l("set");f.set(this,e,t,y)}:function(e,t){l("set"),this[e]=t},x=i.getOwnPropertyNames(r),_={};x.forEach((function(e){if(!w&&!v||!(e in y)){var t=i.getOwnPropertyDescriptor(r,e),n={enumerable:Boolean(t.enumerable),get:b.bind(r,e),set:m.bind(r,e)};i.defineProperty(y,e,n),_[e]=!0}}));var g=!0;if(w||v){var k=i.setPrototypeOf||([].__proto__===Array.prototype?function(e,t){return o(t),e.__proto__=t,e}:s);h&&k(y,h)||(g=!1)}if(f.get||!g)for(var P in r)_[P]||i.defineProperty(y,P,{get:b.bind(r,P)});return i.seal(r),i.seal(y),y},e.revocable=function(n,r){return{proxy:new e(n,r),revoke:t}},e}},52587:function(e,t,n){"use strict";n.r(t),n.d(t,{ExternalAuth:function(){return w},createExternalAuth:function(){return v}});var r=n(99312),o=n(81043),i=n(71650),a=n(33368);n(51467);function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}n(36251),n(46798),n(48226),n(30535);function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n(58556);var u=n(76775);function f(e,t){if(t&&("object"===(0,u.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}n(47084),n(88770);var p=n(10280),d=function(){function e(){(0,i.Z)(this,e),this.config=void 0,this.commands={},this.msgId=0,this._commandHandler=void 0}var t;return(0,a.Z)(e,[{key:"attach",value:(t=(0,o.Z)((0,r.Z)().mark((function e(){var t=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.externalBus=function(e){return t.receiveMessage(e)},window.addEventListener("connection-status",(function(e){return t.fireMessage({type:"connection-status",payload:{event:e.detail}})})),e.next=4,this.sendMessage({type:"config/get"});case 4:this.config=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"addCommandHandler",value:function(e){this._commandHandler=e}},{key:"sendMessage",value:function(e){var t=this,n=++this.msgId;return e.id=n,this._sendExternal(e),new Promise((function(e,r){t.commands[n]={resolve:e,reject:r}}))}},{key:"fireMessage",value:function(e){e.id||(e.id=++this.msgId),this._sendExternal(e)}},{key:"receiveMessage",value:function(e){if("command"!==e.type){var t=this.commands[e.id];t?"result"===e.type&&(e.success?t.resolve(e.result):t.reject(e.error)):console.warn("Received unknown msg ID",e.id)}else{var n,r;this._commandHandler&&this._commandHandler(e)||(this._commandHandler?(n="not_ready",r="Command handler not ready"):(n="unknown_command",r="Unknown command ".concat(e.command)),console.warn(r,e),this.fireMessage({id:e.id,type:"result",success:!1,error:{code:n,message:r}}))}}},{key:"_sendExternal",value:function(e){window.externalApp?window.externalApp.externalBus(JSON.stringify(e)):window.webkit.messageHandlers.externalBus.postMessage(e)}}]),e}(),y="externalAuthSetToken",h="externalAuthRevokeToken";if(!window.externalApp&&!window.webkit)throw new Error("External auth requires either externalApp or webkit defined on Window object.");var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(u,e);var t,n,s=l(u);function u(e){var t;return(0,i.Z)(this,u),(t=s.call(this,{hassUrl:e,clientId:"",refresh_token:"",access_token:"",expires_in:0,expires:0})).external=void 0,t._tokenCallbackPromise=void 0,t}return(0,a.Z)(u,[{key:"refreshAccessToken",value:(n=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._tokenCallbackPromise||t){e.next=10;break}return e.prev=1,e.next=4,this._tokenCallbackPromise;case 4:return e.abrupt("return");case 7:e.prev=7,e.t0=e.catch(1),this._tokenCallbackPromise=void 0;case 10:return n={callback:y},t&&(n.force=!0),this._tokenCallbackPromise=new Promise((function(e,t){window[y]=function(n,r){return n?e(r):t(r)}})),e.next=15,Promise.resolve();case 15:return window.externalApp?window.externalApp.getExternalAuth(JSON.stringify(n)):window.webkit.messageHandlers.getExternalAuth.postMessage(n),e.next=18,this._tokenCallbackPromise;case 18:o=e.sent,this.data.access_token=o.access_token,this.data.expires=1e3*o.expires_in+Date.now(),this._tokenCallbackPromise=void 0;case 22:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e){return n.apply(this,arguments)})},{key:"revoke",value:(t=(0,o.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={callback:h},n=new Promise((function(e,t){window[h]=function(n,r){return n?e(r):t(r)}})),e.next=4,Promise.resolve();case 4:return window.externalApp?window.externalApp.revokeExternalAuth(JSON.stringify(t)):window.webkit.messageHandlers.revokeExternalAuth.postMessage(t),e.next=7,n;case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),u}(p.gx),v=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=new w(t),!(null!==(n=window.externalApp)&&void 0!==n&&n.externalBus||window.webkit&&window.webkit.messageHandlers.externalBus)){e.next=5;break}return o.external=new d,e.next=5,o.external.attach();case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},3355:function(e,t,n){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}n(94738),n(98214),n(46798),n(20254),n(51358),n(5239),n(98490),e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},1319:function(e,t,n){"use strict";var r=n(55418),o=n(9160),i=n(38475),a=n(55229),c=n(88755),s=n(39760),u=Function,f=r([].concat),l=r([].join),p={};e.exports=s?u.bind:function(e){var t=o(this),n=t.prototype,r=c(arguments,1),s=function(){var n=f(r,c(arguments));return this instanceof s?function(e,t,n){if(!a(p,t)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";p[t]=u("C,a","return new C("+l(r,",")+")")}return p[t](e,n)}(t,n.length,n):t.apply(e,n)};return i(n)&&(s.prototype=n),s}},80628:function(e,t,n){"use strict";var r=n(68077),o=n(19480),i=n(10228),a=n(1991),c=n(35102),s=n(54108);r({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=o(this),n=i(t),r=arguments.length;if(r){s(n+r);for(var u=n;u--;){var f=u+r;u in t?t[f]=t[u]:c(t,f)}for(var l=0;l<r;l++)t[l]=arguments[l]}return a(t,n+r)}})},40720:function(e,t,n){"use strict";var r=n(68077),o=n(18431),i=n(17460),a=n(25245).f,c=n(58849);r({target:"Object",stat:!0,forced:!c||o((function(){a(1)})),sham:!c},{getOwnPropertyDescriptor:function(e,t){return a(i(e),t)}})},30419:function(e,t,n){"use strict";var r=n(68077),o=n(18431),i=n(16102).f;r({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})},37792:function(e,t,n){"use strict";var r=n(68077),o=n(38475),i=n(70276).onFreeze,a=n(91452),c=n(18431),s=Object.seal;r({target:"Object",stat:!0,forced:c((function(){s(1)})),sham:!a},{seal:function(e){return s&&o(e)?s(i(e)):e}})},36251:function(e,t,n){"use strict";var r=n(68077),o=n(29694),i=n(35449),a=n(1319),c=n(50683),s=n(22933),u=n(38475),f=n(9885),l=n(18431),p=o("Reflect","construct"),d=Object.prototype,y=[].push,h=l((function(){function e(){}return!(p((function(){}),[],e)instanceof e)})),w=!l((function(){p((function(){}))})),v=h||w;r({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(e,t){c(e),s(t);var n=arguments.length<3?e:c(arguments[2]);if(w&&!h)return p(e,t,n);if(e===n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return i(y,r,t),new(i(a,e,r))}var o=n.prototype,l=f(u(o)?o:d),v=i(e,l,t);return u(v)?v:l}})},48226:function(e,t,n){"use strict";var r=n(68077),o=n(5813),i=n(48357);r({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)}}]);
//# sourceMappingURL=52587.d1e6tRTsvFA.js.map