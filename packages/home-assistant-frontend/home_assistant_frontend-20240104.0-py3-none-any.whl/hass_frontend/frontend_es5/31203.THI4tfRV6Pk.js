"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[31203],{91168:function(t,n,i){i.d(n,{Z:function(){return a}});i(97393);var e=function(t){return t<10?"0".concat(t):t};function a(t){var n=Math.floor(t/3600),i=Math.floor(t%3600/60),a=Math.floor(t%3600%60);return n>0?"".concat(n,":").concat(e(i),":").concat(e(a)):i>0?"".concat(i,":").concat(e(a)):a>0?""+a:null}},40958:function(t,n,i){i.d(n,{rv:function(){return u},eF:function(){return r},WH:function(){return o},aT:function(){return a},mK:function(){return c},mZ:function(){return s}});i(85717),i(97393),i(46349),i(70320),i(76843);var e=i(91168),a=function(t){return t.callWS({type:"timer/list"})},r=function(t,n){return t.callWS(Object.assign({type:"timer/create"},n))},s=function(t,n,i){return t.callWS(Object.assign({type:"timer/update",timer_id:n},i))},o=function(t,n){return t.callWS({type:"timer/delete",timer_id:n})},c=function(t){if(t.attributes.remaining){var n,i,e=(n=t.attributes.remaining,3600*(i=n.split(":").map(Number))[0]+60*i[1]+i[2]);if("active"===t.state){var a=(new Date).getTime(),r=new Date(t.last_changed).getTime();e=Math.max(e-(a-r)/1e3,0)}return e}},u=function(t,n,i){if(!n)return null;if("idle"===n.state||0===i)return t.formatEntityState(n);var a=(0,e.Z)(i||0);return"paused"===n.state&&(a="".concat(a," (").concat(t.formatEntityState(n),")")),a}},31203:function(t,n,i){i.r(n);var e,a,r=i(88962),s=i(33368),o=i(71650),c=i(82390),u=i(69205),l=i(70906),h=i(91808),d=i(34541),f=i(47838),v=(i(97393),i(51467),i(68144)),m=i(95260),_=i(40958),g=i(53658),y=(i(91476),i(75502));(0,h.Z)([(0,m.Mo)("hui-timer-entity-row")],(function(t,n){var i=function(n){(0,u.Z)(e,n);var i=(0,l.Z)(e);function e(){var n;(0,o.Z)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=i.call.apply(i,[this].concat(r)),t((0,c.Z)(n)),n}return(0,s.Z)(e)}(n);return{F:i,d:[{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,m.SB)()],key:"_timeRemaining",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"setConfig",value:function(t){if(!t)throw new Error("Invalid configuration");if(this._config=t,this.hass){var n=this.hass.states[this._config.entity];n?this._startInterval(n):this._clearInterval()}}},{kind:"method",key:"disconnectedCallback",value:function(){(0,d.Z)((0,f.Z)(i.prototype),"disconnectedCallback",this).call(this),this._clearInterval()}},{kind:"method",key:"connectedCallback",value:function(){if((0,d.Z)((0,f.Z)(i.prototype),"connectedCallback",this).call(this),this._config&&this._config.entity){var t,n=null===(t=this.hass)||void 0===t?void 0:t.states[this._config.entity];n&&this._startInterval(n)}}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return v.Ld;var t=this.hass.states[this._config.entity];return t?(0,v.dy)(a||(a=(0,r.Z)([' <hui-generic-entity-row .hass="','" .config="','"> <div class="text-content"> '," </div> </hui-generic-entity-row> "])),this.hass,this._config,(0,_.rv)(this.hass,t,this._timeRemaining)):(0,v.dy)(e||(e=(0,r.Z)([" <hui-warning> "," </hui-warning> "])),(0,y.i)(this.hass,this._config.entity))}},{kind:"method",key:"shouldUpdate",value:function(t){return!!t.has("_timeRemaining")||(0,g.G2)(this,t)}},{kind:"method",key:"updated",value:function(t){if((0,d.Z)((0,f.Z)(i.prototype),"updated",this).call(this,t),this._config&&t.has("hass")){var n=this.hass.states[this._config.entity],e=t.get("hass");(e?e.states[this._config.entity]:void 0)!==n?this._startInterval(n):n||this._clearInterval()}}},{kind:"method",key:"_clearInterval",value:function(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}},{kind:"method",key:"_startInterval",value:function(t){var n=this;this._clearInterval(),this._calculateRemaining(t),"active"===t.state&&(this._interval=window.setInterval((function(){return n._calculateRemaining(t)}),1e3))}},{kind:"method",key:"_calculateRemaining",value:function(t){this._timeRemaining=(0,_.mK)(t)}}]}}),v.oi)}}]);
//# sourceMappingURL=31203.THI4tfRV6Pk.js.map