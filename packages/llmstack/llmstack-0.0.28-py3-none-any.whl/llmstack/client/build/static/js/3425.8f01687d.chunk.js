"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[3425],{6195:function(e,n,t){t.d(n,{s:function(){return s}});var o=t(75942),r=t(2116),a=t(84116),i=t(82334),l=t(37881);function s(e){return(0,l.jsx)("div",{children:(0,l.jsxs)(o.Z,{fullWidth:!0,children:[(0,l.jsx)(r.Z,{id:"app-select-label",children:"Select an App"}),(0,l.jsx)(a.Z,{labelId:"app-select-label",id:"app-select",value:e.value||"",label:"Select an application",onChange:function(n){return e.onChange(n.target.value)},variant:"filled",sx:{lineHeight:"0.5em"},children:e.apps.map((function(e){return(0,l.jsx)(i.Z,{value:e.published_uuid,children:e.name},e.published_uuid)}))})]})})}},36492:function(e,n,t){t.d(n,{Z:function(){return v}});var o=t(1413),r=t(57707),a=t(14485),i=t(6195),l=t(87969),s=t(18282),u=t(64350),c=t(92886),d=t(37881),p={properties:{job_name:{type:"string",title:"Job Name"},application:{type:"string",title:"Application",widget:"appselect"},frequency:{type:"string",title:"Frequency",widget:"frequencyPicker"}}},f={"ui:order":["job_name","application","frequency"],job_name:{"ui:description":"Enter a name for this job."},application:{"ui:description":"Application to run with this job.","ui:widget":"appselect"},frequency:{"ui:description":"Select a frequency to run the application.","ui:widget":"frequencyPicker"}};function v(e){var n=((0,s.sJ)(u.C_)||[]).filter((function(e){return e.published_uuid}));return(0,d.jsx)(c.Z,{sx:{width:"95%",margin:"5px"},children:(0,d.jsx)(a.Z,{disableAdvanced:!0,schema:p,validator:r.ZP,uiSchema:(0,o.Z)((0,o.Z)({},f),{"ui:submitButtonOptions":{norender:!0}}),formData:e.value,onChange:function(t){var r=t.formData;e.onChange((0,o.Z)((0,o.Z)({},r),{},{appDetail:n.find((function(e){return e.published_uuid===(null===r||void 0===r?void 0:r.application)})),frequencyObj:null!==r&&void 0!==r&&r.frequency?JSON.parse((null===r||void 0===r?void 0:r.frequency)||"{}"):null}))},widgets:{appselect:function(e){return(0,d.jsx)(i.s,(0,o.Z)((0,o.Z)({},e),{},{apps:n,value:e.value}))},frequencyPicker:function(e){return(0,d.jsx)(l.Z,(0,o.Z)((0,o.Z)({},e),{},{value:e.value,id:"frequency-picker"}))}}})})}},87969:function(e,n,t){t.d(n,{Z:function(){return m}});var o=t(1413),r=(t(71233),t(92886)),a=t(75942),i=t(2116),l=t(84116),s=t(82334),u=t(6874),c=t(83155),d=t(8535),p=t(83663),f=t.n(p),v=t(49945),h=t(58705),x=t(37881);function m(e){var n=e.onChange,t=e.id,p=e.value,m=e.minStartTime,Z=e.maxStartTime,j=p?JSON.parse(p):null,b=function(e){n(JSON.stringify(e))};return(0,x.jsxs)(r.Z,{sx:{display:"flex"},children:[(0,x.jsxs)(a.Z,{sx:{width:"120px"},children:[(0,x.jsx)(i.Z,{id:"".concat(t,"-label"),children:"Frequency"}),(0,x.jsxs)(l.Z,{labelId:"".concat(t,"-label"),id:t,label:"Frequency",value:(null===j||void 0===j?void 0:j.type)||"",onChange:function(e){return b({type:e.target.value})},placeholder:"Select a frequency",variant:"filled",sx:{lineHeight:"0.5em"},children:[(0,x.jsx)(s.Z,{value:"run_once",children:"Run Once"}),(0,x.jsx)(s.Z,{value:"repeat",children:"Repeat"}),(0,x.jsx)(s.Z,{value:"cron",children:"Cron Job"})]})]}),"run_once"===(null===j||void 0===j?void 0:j.type)&&(0,x.jsx)(c._,{dateAdapter:d.Q,children:(0,x.jsx)(v.x,{minDateTime:m,maxDateTime:Z,timeSteps:{minutes:15},disablePast:!0,value:f()(null===j||void 0===j?void 0:j.scheduled_time),onChange:function(e){b((0,o.Z)((0,o.Z)({},j),{},{type:"run_once",start_date:e.format("YYYY-MM-DD"),start_time:e.format("HH:mm:ss"),scheduled_time:e}))},label:"Schedule Time"})}),"repeat"===(null===j||void 0===j?void 0:j.type)&&(0,x.jsx)("div",{children:(0,x.jsxs)(c._,{dateAdapter:d.Q,children:[(0,x.jsx)(v.x,{minDateTime:m,maxDateTime:Z,timeSteps:{minutes:15},disablePast:!0,value:f()(null===j||void 0===j?void 0:j.scheduled_time),onChange:function(e){b((0,o.Z)((0,o.Z)({},j),{},{type:"repeat",start_date:e.format("YYYY-MM-DD"),start_time:e.format("HH:mm:ss"),scheduled_time:e}))},label:"Schedule Start Time"}),(0,x.jsx)(u.Z,{label:"Repeat Interval (in days)",value:null===j||void 0===j?void 0:j.interval,type:"number",onChange:function(e){return b((0,o.Z)((0,o.Z)({},j),{},{type:"repeat",interval:e.target.value}))}}),(0,x.jsx)(h.M,{disablePast:!0,value:f()(null===j||void 0===j?void 0:j.end_date,"YYYY-MM-DD"),onChange:function(e){b((0,o.Z)((0,o.Z)({},j),{},{type:"repeat",end_date:e.format("YYYY-MM-DD")}))},label:"Schedule End Date"})]})}),"cron"===(null===j||void 0===j?void 0:j.type)&&(0,x.jsxs)(c._,{dateAdapter:d.Q,children:[(0,x.jsx)(u.Z,{label:"Cron Job Expression",value:null===j||void 0===j?void 0:j.cron_expression,onChange:function(e){return b((0,o.Z)((0,o.Z)({},j),{},{type:"cron",cron_expression:e.target.value}))}}),(0,x.jsx)(h.M,{disablePast:!0,value:f()(null===j||void 0===j?void 0:j.end_date,"YYYY-MM-DD"),onChange:function(e){b((0,o.Z)((0,o.Z)({},j),{},{type:"cron",end_date:e.format("YYYY-MM-DD")}))},label:"Schedule End Date"})]})]})}},74224:function(e,n,t){t.d(n,{Z:function(){return _}});var o=t(93433),r=t(4942),a=t(1413),i=t(29439),l=t(71233),s=t(62326),u=t(92886),c=t(44984),d=t(64236),p=t(83037),f=t(87841),v=t(80833),h=t(11225),x=t(54744),m=t(6083),Z=t(13606),j=t(60696),b=t(83864),y=t(74696),g=t(38183),w=t(41348),C=t(91013),k=t(37881);function _(e){var n=e.columnData,t=e.rowData,_=e.onChange,S=(0,m.vE)().readString,M=(0,l.useState)({}),D=(0,i.Z)(M,2),R=D[0],T=D[1],z=(0,l.useRef)(null),O=(0,l.useState)(null),A=(0,i.Z)(O,2),H=A[0],N=A[1];(0,l.useEffect)((function(){if(H){var e=new FileReader;e.onload=function(e){var t=e.target.result;S(t,{header:!0,worker:!0,complete:function(e){if(0===e.data.length)return(0,C.yv)("No data found in file",{variant:"warning"}),void N(null);var t=Object.keys(e.data[0]);if(t.length!==n.length)return(0,C.yv)("Headers do not match expected headers",{variant:"error"}),void N(null);t.forEach((function(e){if(!n.find((function(n){return n.headerName===e})))return(0,C.yv)("Headers do not match expected headers",{variant:"error"}),void N(null)}));for(var o=[],r=function(){var r=e.data[a];if(Object.keys(r).length!==t.length)return 1;var i={_id:a,_isNew:!0};n.forEach((function(e){i[e.field]=r[e.headerName]})),o.push(i)},a=0;a<e.data.length;a++)r();_(o)}})},e.readAsText(H)}}),[H,n,_,S]);var P=function(e){return function(){T((0,a.Z)((0,a.Z)({},R),{},(0,r.Z)({},e,{mode:d.se.Edit})))}},Y=function(e){return function(){T((0,a.Z)((0,a.Z)({},R),{},(0,r.Z)({},e,{mode:d.se.View})))}},q=function(e){return function(){_(t.filter((function(n){return n._id!==e})))}},J=function(e){return function(){T((0,a.Z)((0,a.Z)({},R),{},(0,r.Z)({},e,{mode:d.se.View,ignoreModifications:!0}))),t.find((function(n){return n._id===e}))._isNew&&_(t.filter((function(n){return n._id!==e})))}},E=function(){z.current.click()},I=function(e){var n=e.target.files[0];N(n)};return(0,k.jsx)(u.Z,{sx:{width:"100%","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"},"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}},children:(0,k.jsx)(v._$,{rows:t,getRowId:function(e){return e._id},columns:[].concat((0,o.Z)(n),[{field:"actions",type:"actions",headerName:"Actions",width:100,cellClassName:"actions",flex:1,maxWidth:100,getActions:function(e){var n,t=e.id;return(null===(n=R[t])||void 0===n?void 0:n.mode)===d.se.Edit?[(0,k.jsx)(h.u,{icon:(0,k.jsx)(b.Z,{}),label:"Save",sx:{color:"primary.main"},onClick:Y(t)}),(0,k.jsx)(h.u,{icon:(0,k.jsx)(y.Z,{}),label:"Cancel",className:"textPrimary",onClick:J(t),color:"inherit"})]:[(0,k.jsx)(h.u,{icon:(0,k.jsx)(g.Z,{}),label:"Edit",className:"textPrimary",onClick:P(t),color:"inherit"}),(0,k.jsx)(h.u,{icon:(0,k.jsx)(w.Z,{}),label:"Delete",onClick:q(t),color:"inherit"})]}}]),editMode:"row",autoHeight:!0,rowModesModel:R,onRowModesModelChange:function(e){T(e)},onRowEditStop:function(e,n){e.reason===c.U.rowFocusOut&&(n.defaultMuiPrevented=!0)},processRowUpdate:function(e){var n=(0,a.Z)((0,a.Z)({},e),{},{_isNew:!1});return _(t.map((function(t){return t._id===e._id?n:t}))),n},pageSizeOptions:[5,10],initialState:{pagination:{paginationModel:{pageSize:5}}},slots:{toolbar:function(e){var t=e.setRowModesModel;return(0,k.jsxs)(p.D,{sx:{alignSelf:"flex-end"},children:[(0,k.jsx)(s.Z,{color:"primary",startIcon:(0,k.jsx)(Z.Z,{}),type:"file",variant:"contained",onClick:E,size:"small",children:"Upload CSV"}),(0,k.jsx)("input",{type:"file",accept:".csv",onChange:I,ref:z,style:{display:"none"}}),(0,k.jsx)(s.Z,{color:"secondary",startIcon:(0,k.jsx)(j.Z,{}),onClick:function(){var e=(0,x.kb)(),i={_id:e,_isNew:!0};n.forEach((function(e){i[e.field]=" "})),_((function(e){return[].concat((0,o.Z)(e),[i])})),t((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},e,{mode:d.se.Edit,fieldToFocus:n[0].field}))}))},variant:"contained",size:"small",children:"Add Record"}),(0,k.jsx)(f.Zh,{csvOptions:{includeColumnGroupsHeaders:!1,fileName:"input_data"},printOptions:{disableToolbarButton:!0}})]})}},slotProps:{toolbar:{setRowModesModel:T}}})})}},1325:function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var o=t(1413),r=t(93433),a=t(29439),i=t(71233),l=t(84368),s=t(13263),u=t(76508),c=t(32318),d=t(78617),p=t(62326),f=t(94766),v=t(98083),h=t(92886),x=t(2794),m=t(45734),Z=t(73261),j=t(29088),b=t(60830),y=t(68858),g=t(4182),w=t(20151),C=t(59323),k=t(97157),_=t(83663),S=t.n(_),M=t(83969),D=t(18282),R=t(64350),T=t(91013),z=t(64991),O=t(43078),A=t(36492),H=t(74224),N=t(37881);function P(e){var n,t=(0,i.useState)([]),r=(0,a.Z)(t,2),u=r[0],c=r[1],v=(0,i.useState)({}),h=(0,a.Z)(v,2),x=h[0],Z=h[1],j=(0,i.useState)([]),b=(0,a.Z)(j,2),y=b[0],g=b[1];return(0,i.useEffect)((function(){if(null!==x&&void 0!==x&&x.appDetail){var e=null===x||void 0===x?void 0:x.appDetail.data.input_fields.map((function(e){return{field:e.name,headerName:e.title,width:"text"===e.type?300:200,disableColumnMenu:!0,sortable:!1,editable:!0,flex:1}}));c(e),g([])}}),[x]),(0,N.jsxs)(l.Z,{open:!0,maxWidth:"lg",fullWidth:!0,onClose:e.onClose,children:[(0,N.jsx)(s.Z,{children:"Schedule App Run Job"}),(0,N.jsxs)(m.ZP,{children:[(0,N.jsx)(m.ZP,{item:!0,xs:12,children:(0,N.jsx)(z.Z,{sx:{alignItems:"start",margin:"5px"},children:(0,N.jsx)(A.Z,{onChange:function(e){Z(e)},value:x})})}),(null===x||void 0===x?void 0:x.frequency)&&(null===x||void 0===x?void 0:x.job_name)&&(0,N.jsx)(m.ZP,{item:!0,xs:12,sx:{margin:"10px"},children:(0,N.jsxs)(z.Z,{sx:{alignItems:"start",margin:"5px"},children:[(0,N.jsx)(f.Z,{variant:"h7",sx:{marginLeft:"2px"},children:"Batch Input to the App"}),(0,N.jsx)(O.Z,{}),(0,N.jsx)(f.Z,{variant:"caption",sx:{marginLeft:"2px"},children:"Enter the input data for the app run. You can also upload a CSV file with the input data. Make sure the column names match the input fields of the app."}),(0,N.jsx)("br",{}),null!==x&&void 0!==x&&x.appDetail?(0,N.jsx)(H.Z,{columnData:u,rowData:y,onChange:function(e){g(e)}}):(0,N.jsx)("strong",{children:"Please select an application."})]})})]}),(0,N.jsx)(d.Z,{children:(0,N.jsx)(p.Z,{variant:"contained",color:"primary",disabled:!(null!==x&&void 0!==x&&null!==(n=x.appDetail)&&void 0!==n&&n.uuid&&null!==x&&void 0!==x&&x.frequencyObj&&y&&y.length>0),onClick:function(){var e,n=y.map((function(e){var n=(0,o.Z)({},e);return delete n._id,delete n._isNew,n}));(0,M.o)().post("/api/jobs/app_run",{job_name:null===x||void 0===x?void 0:x.job_name,app_uuid:null===x||void 0===x||null===(e=x.appDetail)||void 0===e?void 0:e.uuid,frequency:null===x||void 0===x?void 0:x.frequencyObj,app_run_data:n}).then((function(e){(0,T.yv)("Successfully Scheduled App Run",{variant:"success"}),window.location.href="/jobs"})).catch((function(e){var n,t;null!==(n=e.response)&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.message&&(0,T.yv)(e.response.data.message,{variant:"error"})}))},children:"Submit"})})]})}var Y=t(72411),q=t(47857),J=t(70708),E=t(62754),I=t(70920),F=t(20243),V=t(38921),B=t(10749),L=t(40697),W=t(27090),Q=t(66381),U=t(52087),G=t(59446),K=t(2133),$=t(82334),X=t(61428);function ee(e){var n,t,r=e.options,l=e.sx,s=(0,i.useState)(!1),u=(0,a.Z)(s,2),c=u[0],d=u[1],f=(0,i.useRef)(null),v=(0,i.useState)(0),h=(0,a.Z)(v,2),x=h[0],m=h[1],Z=function(e){f.current&&f.current.contains(e.target)||d(!1)};return(0,N.jsxs)(i.Fragment,{children:[(0,N.jsxs)(L.Z,{variant:"contained",ref:f,"aria-label":"split button",sx:l,children:[(0,N.jsx)(p.Z,{onClick:function(){r[x].onClick()},sx:{textTransform:"none"},startIcon:(null===(n=r[x])||void 0===n?void 0:n.startIcon)||null,children:null===(t=r[x])||void 0===t?void 0:t.title}),(0,N.jsx)(p.Z,{size:"small","aria-controls":c?"split-button-menu":void 0,"aria-expanded":c?"true":void 0,"aria-label":"select merge strategy","aria-haspopup":"menu",onClick:function(){d((function(e){return!e}))},children:(0,N.jsx)(X.Z,{})})]}),(0,N.jsx)(W.Z,{sx:{zIndex:50},open:c,anchorEl:f.current,role:void 0,transition:!0,disablePortal:!0,children:function(e){var n=e.TransitionProps,t=e.placement;return(0,N.jsx)(Q.Z,(0,o.Z)((0,o.Z)({},n),{},{style:{transformOrigin:"bottom"===t?"center top":"center bottom"},children:(0,N.jsx)(U.Z,{children:(0,N.jsx)(G.Z,{onClickAway:Z,children:(0,N.jsx)(K.Z,{id:"split-button-menu",autoFocusItem:!0,children:r.map((function(e,n){return(0,N.jsx)($.Z,{disabled:!0===(null===r||void 0===r?void 0:r.isDisabled),selected:n===x,onClick:function(e){return function(e,n){m(n),d(!1)}(0,n)},children:e.title},e.key)}))})})})}))}})]})}function ne(e){var n=e.open,t=e.onOk,o=e.onCancel,r=e.title,a=e.text;return(0,N.jsxs)(l.Z,{title:r||"Logged Out",open:n,onCancel:o,children:[(0,N.jsx)(s.Z,{id:"delete-modal-title",children:r}),(0,N.jsx)(u.Z,{children:(0,N.jsx)(c.Z,{children:a})}),(0,N.jsxs)(d.Z,{children:[(0,N.jsx)(p.Z,{onClick:o,children:"Cancel"},"cancel"),",",(0,N.jsx)(p.Z,{variant:"contained",type:"primary",onClick:t,children:"Confirm"},"submit"),","]})]})}function te(e){var n=e.modalType,t=e.open,o=e.onCancel,r=e.onOk,a=e.jobId;switch(n){case"delete":return(0,N.jsx)(ne,{id:"delete-job",open:t,onOk:function(){(0,M.o)().delete("/api/jobs/".concat(a)).then((function(e){window.location.reload()})).catch((function(e){(0,T.yv)(e.message,{variant:"error"})})).finally((function(){r()}))},onCancel:o,title:"Delete Job",text:"Are you sure you want to delete this job?"});case"pause":return(0,N.jsx)(ne,{id:"pause-job",open:t,onOk:function(){(0,M.o)().post("/api/jobs/".concat(a,"/pause")).then((function(e){window.location.reload()})).catch((function(e){(0,T.yv)(e.message,{variant:"error"})})).finally((function(){r()}))},onCancel:o,title:"Pause Job",text:"Are you sure you want to pause this job?"});case"resume":return(0,N.jsx)(ne,{id:"resume-job",open:t,onOk:function(){(0,M.o)().post("/api/jobs/".concat(a,"/resume")).then((function(e){window.location.reload()})).catch((function(e){(0,T.yv)(e.message,{variant:"error"})})).finally((function(){r()}))},onCancel:o,title:"Resume Job",text:"Are you sure you want to resume this job?"});case"run":return(0,N.jsx)(ne,{id:"run-job",open:t,onOk:function(){(0,M.o)().post("/api/jobs/".concat(a,"/run")).then((function(e){window.location.reload()})).catch((function(e){(0,T.yv)(e.message,{variant:"error"})})).finally((function(){r()}))},onCancel:o,title:"Run Job",text:"Are you sure you want to run this job now?"});default:return null}}function oe(){var e=(0,D.sJ)(R.a6),n=(0,i.useState)(1),t=(0,a.Z)(n,2),l=t[0],s=t[1],u=(0,i.useState)([]),c=(0,a.Z)(u,2),d=c[0],_=c[1],T=(0,i.useState)(!1),z=(0,a.Z)(T,2),O=z[0],A=z[1],H=(0,i.useState)(null),L=(0,a.Z)(H,2),W=L[0],Q=L[1],U=(0,i.useState)(null),G=(0,a.Z)(U,2),K=G[0],$=G[1],X=(0,i.useState)(!1),ne=(0,a.Z)(X,2),oe=ne[0],re=ne[1],ae=function(){Q(null),$(null),A(!1)},ie=function(e){var n,t,o,r,a,i,l,s,u=null===(n=e.result)||void 0===n||null===(t=n.filter((function(e){return"success"===e.status})))||void 0===t?void 0:t.length,c=null===(o=e.result)||void 0===o||null===(r=o.filter((function(e){return"failed"===e.status})))||void 0===r?void 0:r.length,d=null===(a=e.result)||void 0===a||null===(i=a.filter((function(e){return"started"===e.status})))||void 0===i?void 0:i.length,p=null===(l=e.result)||void 0===l?void 0:l.filter((function(e){return"not_started"===e.status})).length,f=null===(s=e.result)||void 0===s?void 0:s.length;return(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{children:["Total Rows: ",f]}),u&&f!==u?(0,N.jsxs)("div",{children:[(0,N.jsx)("br",{}),"Success: ",u]}):null,c?(0,N.jsxs)("div",{children:["Failed: ",c]}):null,d?(0,N.jsxs)("div",{children:["Started: ",d]}):null,p?(0,N.jsxs)("div",{children:["Pending: ",p]}):null]})},le=[{title:"Name",key:"name",render:function(e,n){return(0,N.jsxs)(f.Z,{sx:{display:"flex",fontSize:"0.9rem",fontWeight:n.expand?"600":"inherit",gap:1},children:[n.expand?(0,N.jsx)(Y.Z,{fontSize:"10px",sx:{color:"#999",margin:"auto 0"}}):(0,N.jsx)(q.Z,{fontSize:"10px",sx:{color:"#999",margin:"auto 0"}}),e]})}},{title:"Type",key:"model",render:function(e,n){return(0,N.jsxs)("div",{children:[(0,N.jsx)(v.Z,{label:function(){switch(e){case"ScheduledJob":return"Scheduled";case"RepeatableJob":return"Repeatable";case"CronJob":return"Cron";default:return null}}(),color:"secondary",size:"small"}),(0,N.jsx)(v.Z,{label:function(){switch(null===n||void 0===n?void 0:n.task_category){case"app_run":return"App";case"datasource_refresh":return"Datasource";default:return null}}(),color:"primary",size:"small"})]})}},{title:"Source",key:"source_uuid",render:function(n,t){var o;return"app_run"===(null===t||void 0===t?void 0:t.task_category)?(0,N.jsx)(p.Z,{onClick:function(){window.location.href="/apps/".concat(n)},sx:{textTransform:"none",fontWeight:"inherit",textAlign:"left"},children:null===(o=e.find((function(e){return e.uuid===n})))||void 0===o?void 0:o.name}):null}},{title:"Status",key:"enabled",render:function(e,n){return n?(0,N.jsx)(v.Z,{label:"Enabled",color:"success",size:"small"}):(0,N.jsx)(v.Z,{label:"Disabled",color:"error",size:"small"})}},{title:"Created",key:"created_at",render:function(e,n){return null!==n&&void 0!==n&&n.created_at?S().utc(null===n||void 0===n?void 0:n.created_at).local().format("D-MMM-YYYY h:mm:ss A"):null}},{title:"Last Run",key:"last_run",render:function(e,n){return null!==n&&void 0!==n&&n.updated_at?S().utc(null===n||void 0===n?void 0:n.updated_at).local().fromNow():null}},{title:"Action",key:"operation",render:function(e,n){return(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{onClick:function(){$(n.uuid),Q("run"),A(!0)},color:"primary",children:(0,N.jsx)(B.Z,{})}),"ScheduledJob"!==(null===n||void 0===n?void 0:n.model)?null!==n&&void 0!==n&&n.enabled?(0,N.jsx)(x.Z,{onClick:function(){$(n.uuid),Q("pause"),A(!0)},color:"primary",children:(0,N.jsx)(F.Z,{})}):(0,N.jsx)(x.Z,{onClick:function(){$(n.uuid),Q("resume"),A(!0)},color:"primary",children:(0,N.jsx)(V.Z,{})}):null,(0,N.jsx)(x.Z,{onClick:function(){$(n.uuid),Q("delete"),A(!0)},color:"primary",children:(0,N.jsx)(E.Z,{})})]})}}];return(0,i.useEffect)((function(){(0,M.o)().get("/api/jobs").then((function(e){var n,t=e.data.scheduled_jobs.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{model:"ScheduledJob",expand:!1})})),a=e.data.repeatable_jobs.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{model:"RepeatableJob",expand:!1})})),i=e.data.cron_jobs.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{model:"CronJob",expand:!1})}));n=[].concat((0,r.Z)(t),(0,r.Z)(a),(0,r.Z)(i)).sort((function(e,n){return S().utc(n.created_at).local()-S().utc(e.created_at).local()})),_(n)}))}),[]),(0,N.jsxs)("div",{id:"schedule-page",style:{marginBottom:"120px"},children:[(0,N.jsxs)(m.ZP,{span:24,style:{padding:"10px"},children:[(0,N.jsx)(m.ZP,{item:!0,style:{width:"100%",padding:"15px 0px"},children:(0,N.jsx)(ee,{options:[{key:1,title:"App Run Job",startIcon:(0,N.jsx)(J.Z,{}),onClick:function(){re(!0)}}],sx:{float:"left",marginBottom:"10px",textTransform:"none"}})}),(0,N.jsxs)(m.ZP,{item:!0,style:{width:"100%"},children:[(0,N.jsxs)(Z.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,N.jsx)(j.Z,{children:(0,N.jsx)(b.Z,{children:le.map((function(e){return(0,N.jsx)(y.Z,{sx:{paddingLeft:"name"===e.key?"20px":"inherit",textAlign:"name"===e.key?"left":"center"},children:(0,N.jsx)("strong",{children:e.title})},e.key)}))})}),(0,N.jsx)(g.Z,{children:d.map((function(e){var n;return[(0,N.jsx)(b.Z,{sx:{cursor:"pointer",backgroundColor:"inherit"},onClick:function(){"app_run"===e.task_category&&function(e){var n=(0,r.Z)(d),t=n.findIndex((function(n){return n.uuid===e.uuid}));n[t].expand=!n[t].expand,_(n),n[t].expand&&(0,M.o)().get("/api/jobs/".concat(e.uuid,"/tasks")).then((function(n){var t=(0,r.Z)(d),o=t.findIndex((function(n){return n.uuid===e.uuid}));t[o].tasks=n.data,_(t)}))}(e)},children:le.map((function(n){var t=e[n.key];return(0,N.jsx)(y.Z,{align:n.align,sx:{fontWeight:"inherit",textAlign:"name"===n.key?"left":"center"},children:n.render?n.render(t,e):t},n.key)}))},e.uuid),(0,N.jsx)(b.Z,{children:(0,N.jsx)(y.Z,{style:{paddingBottom:0,paddingTop:0,border:0},colSpan:12,children:(0,N.jsx)(w.Z,{in:e.expand,timeout:"auto",unmountOnExit:!0,children:(0,N.jsx)(h.Z,{sx:{margin:1},children:(0,N.jsxs)(Z.Z,{size:"small","aria-label":"tasks",children:[(0,N.jsx)(j.Z,{children:(0,N.jsxs)(b.Z,{children:[(0,N.jsx)(y.Z,{children:(0,N.jsx)("strong",{children:"Created At"})}),(0,N.jsx)(y.Z,{children:(0,N.jsx)("strong",{children:"Status"})}),(0,N.jsx)(y.Z,{children:(0,N.jsx)("strong",{children:"Actions"})})]})}),(0,N.jsx)(g.Z,{children:null===(n=e.tasks)||void 0===n?void 0:n.map((function(n){var t,o,r;return(0,N.jsxs)(b.Z,{children:[(0,N.jsx)(y.Z,{children:S().utc(n.created_at).local().format("D-MMM-YYYY h:mm:ss A")}),(0,N.jsx)(y.Z,{children:(0,N.jsx)(C.Z,{title:ie(n),children:"started"===n.status&&(null===(t=n.result)||void 0===t||null===(o=t.filter((function(e){return"success"===e.status})))||void 0===o?void 0:o.length)===(null===(r=n.result)||void 0===r?void 0:r.length)?(0,N.jsx)(v.Z,{label:"Finished",color:"success",size:"small"}):"started"===n.status?(0,N.jsx)(v.Z,{label:"Started",color:"warning",size:"small"}):(0,N.jsx)(v.Z,{label:"Failed",color:"error",size:"small"})})}),(0,N.jsx)(y.Z,{children:(0,N.jsx)(p.Z,{variant:"outlined",size:"small",startIcon:(0,N.jsx)(I.Z,{}),disabled:"failed"===n.status,onClick:function(){window.open("/api/jobs/".concat(e.uuid,"/tasks/").concat(n.uuid,"/download"))},sx:{textTransform:"none"},children:"Download"})})]},n.uuid)}))})]})})})})},"".concat(e.uuid,"_details"))]}))})]}),d.length>0&&(0,N.jsx)(k.Z,{variant:"outlined",shape:"rounded",page:l,onChange:function(e,n){s(n)},sx:{marginTop:2,float:"right"}})]})]}),O&&(0,N.jsx)(te,{open:O,modalType:W,onCancel:ae,jobId:K,onOk:ae}),oe&&(0,N.jsx)(P,{open:oe,onClose:function(){return re(!1)}})]})}},70708:function(e,n,t){var o=t(64836);n.Z=void 0;var r=o(t(94185)),a=t(37881),i=(0,r.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined");n.Z=i},61428:function(e,n,t){var o=t(64836);n.Z=void 0;var r=o(t(94185)),a=t(37881),i=(0,r.default)((0,a.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");n.Z=i},62754:function(e,n,t){var o=t(64836);n.Z=void 0;var r=o(t(94185)),a=t(37881),i=(0,r.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4h-3.5z"}),"DeleteOutlineOutlined");n.Z=i},70920:function(e,n,t){var o=t(64836);n.Z=void 0;var r=o(t(94185)),a=t(37881),i=(0,r.default)((0,a.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zm-8 2V5h2v6h1.17L12 13.17 9.83 11H11zm-6 7h14v2H5z"}),"DownloadOutlined");n.Z=i},20243:function(e,n,t){var o=t(64836);n.Z=void 0;var r=o(t(94185)),a=t(37881),i=(0,r.default)((0,a.jsx)("path",{d:"M9 16h2V8H9v8zm3-14C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm1-4h2V8h-2v8z"}),"PauseCircleOutlined");n.Z=i},38921:function(e,n,t){var o=t(64836);n.Z=void 0;var r=o(t(94185)),a=t(37881),i=(0,r.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2.5-3.5 7-4.5-7-4.5v9z"}),"PlayCircleOutlined");n.Z=i},10749:function(e,n,t){var o=t(64836);n.Z=void 0;var r=o(t(94185)),a=t(37881),i=(0,r.default)((0,a.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"RefreshOutlined");n.Z=i},72411:function(e,n,t){var o=t(83883),r=t(37881);n.Z=(0,o.Z)((0,r.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDownOutlined")},47857:function(e,n,t){var o=t(83883),r=t(37881);n.Z=(0,o.Z)((0,r.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined")},32318:function(e,n,t){t.d(n,{Z:function(){return m}});var o=t(63366),r=t(87462),a=t(71233),i=t(1482),l=t(42947),s=t(19468),u=t(36985),c=t(94766),d=t(72352),p=t(16426);function f(e){return(0,p.Z)("MuiDialogContentText",e)}(0,d.Z)("MuiDialogContentText",["root"]);var v=t(37881),h=["children","className"],x=(0,s.ZP)(c.Z,{shouldForwardProp:function(e){return(0,s.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,n){return n.root}})({}),m=a.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiDialogContentText"}),a=t.className,s=(0,o.Z)(t,h),c=function(e){var n=e.classes,t=(0,l.Z)({root:["root"]},f,n);return(0,r.Z)({},n,t)}(s);return(0,v.jsx)(x,(0,r.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:s,className:(0,i.Z)(c.root,a)},t,{classes:c}))}))},73261:function(e,n,t){t.d(n,{Z:function(){return Z}});var o=t(63366),r=t(87462),a=t(71233),i=t(1482),l=t(42947),s=t(79063),u=t(36985),c=t(19468),d=t(72352),p=t(16426);function f(e){return(0,p.Z)("MuiTable",e)}(0,d.Z)("MuiTable",["root","stickyHeader"]);var v=t(37881),h=["className","component","padding","size","stickyHeader"],x=(0,c.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.stickyHeader&&n.stickyHeader]}})((function(e){var n=e.theme,t=e.ownerState;return(0,r.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,r.Z)({},n.typography.body2,{padding:n.spacing(2),color:(n.vars||n).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})})),m="table",Z=a.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiTable"}),c=t.className,d=t.component,p=void 0===d?m:d,Z=t.padding,j=void 0===Z?"normal":Z,b=t.size,y=void 0===b?"medium":b,g=t.stickyHeader,w=void 0!==g&&g,C=(0,o.Z)(t,h),k=(0,r.Z)({},t,{component:p,padding:j,size:y,stickyHeader:w}),_=function(e){var n=e.classes,t={root:["root",e.stickyHeader&&"stickyHeader"]};return(0,l.Z)(t,f,n)}(k),S=a.useMemo((function(){return{padding:j,size:y,stickyHeader:w}}),[j,y,w]);return(0,v.jsx)(s.Z.Provider,{value:S,children:(0,v.jsx)(x,(0,r.Z)({as:p,role:p===m?null:"table",ref:n,className:(0,i.Z)(_.root,c),ownerState:k},C))})}))},4182:function(e,n,t){t.d(n,{Z:function(){return j}});var o=t(87462),r=t(63366),a=t(71233),i=t(1482),l=t(42947),s=t(21567),u=t(36985),c=t(19468),d=t(72352),p=t(16426);function f(e){return(0,p.Z)("MuiTableBody",e)}(0,d.Z)("MuiTableBody",["root"]);var v=t(37881),h=["className","component"],x=(0,c.ZP)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:function(e,n){return n.root}})({display:"table-row-group"}),m={variant:"body"},Z="tbody",j=a.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiTableBody"}),a=t.className,c=t.component,d=void 0===c?Z:c,p=(0,r.Z)(t,h),j=(0,o.Z)({},t,{component:d}),b=function(e){var n=e.classes;return(0,l.Z)({root:["root"]},f,n)}(j);return(0,v.jsx)(s.Z.Provider,{value:m,children:(0,v.jsx)(x,(0,o.Z)({className:(0,i.Z)(b.root,a),as:d,ref:n,role:d===Z?null:"rowgroup",ownerState:j},p))})}))},29088:function(e,n,t){t.d(n,{Z:function(){return j}});var o=t(87462),r=t(63366),a=t(71233),i=t(1482),l=t(42947),s=t(21567),u=t(36985),c=t(19468),d=t(72352),p=t(16426);function f(e){return(0,p.Z)("MuiTableHead",e)}(0,d.Z)("MuiTableHead",["root"]);var v=t(37881),h=["className","component"],x=(0,c.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:function(e,n){return n.root}})({display:"table-header-group"}),m={variant:"head"},Z="thead",j=a.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiTableHead"}),a=t.className,c=t.component,d=void 0===c?Z:c,p=(0,r.Z)(t,h),j=(0,o.Z)({},t,{component:d}),b=function(e){var n=e.classes;return(0,l.Z)({root:["root"]},f,n)}(j);return(0,v.jsx)(s.Z.Provider,{value:m,children:(0,v.jsx)(x,(0,o.Z)({as:d,className:(0,i.Z)(b.root,a),ref:n,role:d===Z?null:"rowgroup",ownerState:j},p))})}))},60830:function(e,n,t){t.d(n,{Z:function(){return b}});var o=t(4942),r=t(87462),a=t(63366),i=t(71233),l=t(1482),s=t(42947),u=t(61133),c=t(21567),d=t(36985),p=t(19468),f=t(72352),v=t(16426);function h(e){return(0,v.Z)("MuiTableRow",e)}var x=(0,f.Z)("MuiTableRow",["root","selected","hover","head","footer"]),m=t(37881),Z=["className","component","hover","selected"],j=(0,p.ZP)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.head&&n.head,t.footer&&n.footer]}})((function(e){var n,t=e.theme;return n={color:"inherit",display:"table-row",verticalAlign:"middle",outline:0},(0,o.Z)(n,"&.".concat(x.hover,":hover"),{backgroundColor:(t.vars||t).palette.action.hover}),(0,o.Z)(n,"&.".concat(x.selected),{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,u.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,u.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}),n})),b=i.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiTableRow"}),o=t.className,u=t.component,p=void 0===u?"tr":u,f=t.hover,v=void 0!==f&&f,x=t.selected,b=void 0!==x&&x,y=(0,a.Z)(t,Z),g=i.useContext(c.Z),w=(0,r.Z)({},t,{component:p,hover:v,selected:b,head:g&&"head"===g.variant,footer:g&&"footer"===g.variant}),C=function(e){var n=e.classes,t={root:["root",e.selected&&"selected",e.hover&&"hover",e.head&&"head",e.footer&&"footer"]};return(0,s.Z)(t,h,n)}(w);return(0,m.jsx)(j,(0,r.Z)({as:p,ref:n,className:(0,l.Z)(C.root,o),role:"tr"===p?null:"row",ownerState:w},y))}))}}]);
//# sourceMappingURL=3425.8f01687d.chunk.js.map