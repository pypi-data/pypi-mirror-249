!function(a,e){if("function"==typeof define&&define.amd)define(["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var t={exports:{}};e(t.exports),a.modContainer=t.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.container=void 0;const e=MyAMS.$,t=a.container={switchElementAttribute:a=>function(a,t){MyAMS.require("ajax","alert","i18n").then((()=>{const t=a.parents("td").first(),n=e("i",t),s=t.parents("tr"),o=s.parents("table"),d=e(`thead th:nth-child(${t.index()+1})`,o);let r=a.data("ams-location")||d.data("ams-location")||s.data("ams-location")||o.data("ams-location")||"";r&&(r+="/");const i=a.data("ams-update-target")||d.data("ams-update-target")||s.data("ams-update-target")||o.data("ams-update-target")||"switch-element-attribute.json",l=s.data("ams-element-name"),c=n.attr("data-original-title")||n.attr("title");n.tooltip("hide").replaceWith('<i class="fas fa-spinner fa-spin"></i>'),MyAMS.ajax.post(r+i,{object_name:l,attribute_name:d.data("ams-attribute-name")}).then(((a,n,s)=>{let o=e("i",t);"success"===a.status?(a.state?o.replaceWith(`<i class="${d.data("ams-icon-on")}"></i>`):o.replaceWith(`<i class="${d.data("ams-icon-off")}"></i>`),c&&(o=e("i",t),o.addClass("hint").attr("data-original-title",c)),a.handle_json&&MyAMS.ajax.handleJSON(a)):MyAMS.ajax.handleJSON(a)}))}))},moveToGrandParent:(a,t)=>new Promise(((n,s)=>{const o=e(t.draggable),d=e(a.target),r=e(a.target).parents("table"),i=r.data("ams-location");MyAMS.require("ajax","error").then((()=>{MyAMS.ajax.post(`${i}/${d.data("ams-drop-action")||r.data("ams-drop-action")}`,{source:o.data("ams-element-name")}).then((a=>{"success"===a.status?(o.remove(),r.hasClass("datatable")?r.DataTable().row(o).remove().draw():o.remove(),a.handle_json&&MyAMS.ajax.handleJSON(a)):MyAMS.ajax.handleJSON(a),n(a)}))}),s)})),moveToNewParent:(a,t)=>new Promise(((n,s)=>{const o=e(t.draggable),d=e(a.target),r=e(a.target).parents("table"),i=r.data("ams-location");MyAMS.require("ajax","error").then((()=>{MyAMS.ajax.post(`${i}/${d.data("ams-drop-action")||r.data("ams-drop-action")}`,{source:o.data("ams-element-name"),parent:d.data("ams-element-name")}).then((a=>{"success"===a.status?(o.remove(),r.hasClass("datatable")?r.DataTable().row(o).remove().draw():o.remove(),a.handle_json&&MyAMS.ajax.handleJSON(a)):MyAMS.ajax.handleJSON(a),n(a)}))}),s)})),deleteElement:a=>function(a,t){MyAMS.require("ajax","alert","i18n").then((()=>{MyAMS.alert.bigBox({status:"danger",icon:"fas fa-bell",title:MyAMS.i18n.WARNING,message:MyAMS.i18n.CONFIRM_REMOVE,successLabel:MyAMS.i18n.CONFIRM,cancelLabel:MyAMS.i18n.BTN_CANCEL}).then((t=>{if("success"!==t)return;const n=a.parents("td"),s=n.parents("tr"),o=s.parents("table"),d=e(`thead th:nth-child(${n.index()+1})`,o);let r=a.data("ams-location")||d.data("ams-location")||s.data("ams-location")||o.data("ams-location")||"";r&&(r+="/");const i=a.data("ams-delete-target")||d.data("ams-delete-target")||s.data("ams-delete-target")||o.data("ams-delete-target")||"delete-element.json",l=s.data("ams-element-name");MyAMS.ajax.post(r+i,{object_name:l}).then(((a,e,t)=>{"success"===a.status?(o.hasClass("datatable")?o.DataTable().row(s).remove().draw():s.remove(),a.handle_json&&MyAMS.ajax.handleJSON(a)):MyAMS.ajax.handleJSON(a)}))}))}))}};window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("container"):(MyAMS.container=t,console.debug("MyAMS: container module loaded...")))}));