import{S as fe,i as ce,s as ue,k as z,a as Z,q as de,e as F,l as M,m as T,h as k,c as x,r as he,n as A,F as b,p as X,b as P,a0 as D,G as be,v as Y,d as v,f as B,g as p,u as _e,X as ve,Y as ke,a3 as we,a4 as te,y as K,z as O,A as q,B as U,O as Se,a1 as $e,a2 as ye}from"./index.6d58eddb.js";import{a1 as Ee,am as Ve,ag as N,R as Pe,ah as Fe,au as Ie,aD as Ne,V as De,at as Ae,az as Re,d as Ce,bB as Le,aE as ze,bC as Me,bD as Te,a8 as Ye}from"./Commands.d28f9758.js";import{C as Be,a as Ke}from"./ChevronUp.d4050376.js";import{s as le}from"./notificationsStore.a58b8b24.js";function ne(r,e,l){const t=r.slice();return t[2]=e[l],t}function Oe(r){let e,l;return e=new Be({}),{c(){K(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function qe(r){let e,l;return e=new Ke({}),{c(){K(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function ae(r){var o;let e,l=(r[0].formattedValue||((o=r[0].children)!=null&&o.length?"":"n/a"))+"",t,n;return{c(){e=z("div"),t=de(l),this.h()},l(i){e=M(i,"DIV",{title:!0,class:!0});var s=T(e);t=he(s,l),s.forEach(k),this.h()},h(){var i,s;A(e,"title",n=(i=r[0].value)==null?void 0:i.toString()),A(e,"class","truncated text-right svelte-1woyz4e"),b(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(i,s){P(i,e,s),D(e,t)},p(i,s){var a,f,c;s&1&&l!==(l=(i[0].formattedValue||((a=i[0].children)!=null&&a.length?"":"n/a"))+"")&&_e(t,l),s&1&&n!==(n=(f=i[0].value)==null?void 0:f.toString())&&A(e,"title",n),s&1&&b(e,"italic",!i[0].formattedValue&&!((c=i[0].children)!=null&&c.length))},d(i){i&&k(e)}}}function ie(r){let e,l=[],t=new Map,n,o,i=r[0].children;const s=a=>Ee(a[2].path);for(let a=0;a<i.length;a+=1){let f=ne(r,i,a),c=s(f);t.set(c,l[a]=re(c,f))}return{c(){e=z("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=M(a,"DIV",{});var f=T(e);for(let c=0;c<l.length;c+=1)l[c].l(f);f.forEach(k),this.h()},h(){b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal)},m(a,f){P(a,e,f);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);o=!0},p(a,f){f&1&&(i=a[0].children,Y(),l=ve(l,f,s,1,a,i,t,e,ke,re,null,ne),B()),(!o||f&1)&&b(e,"bg-blue-100",a[0].isSignal),(!o||f&1)&&b(e,"bg-emerald-100",a[0].isPreviewSignal)},i(a){if(!o){for(let f=0;f<i.length;f+=1)p(l[f]);a&&we(()=>{o&&(n||(n=te(e,le,{},!0)),n.run(1))}),o=!0}},o(a){for(let f=0;f<l.length;f+=1)v(l[f]);a&&(n||(n=te(e,le,{},!1)),n.run(0)),o=!1},d(a){a&&k(e);for(let f=0;f<l.length;f+=1)l[f].d();a&&n&&n.end()}}}function re(r,e){let l,t,n;return t=new ge({props:{node:e[2]}}),{key:r,first:null,c(){l=F(),K(t.$$.fragment),this.h()},l(o){l=F(),O(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,i){P(o,l,i),q(t,o,i),n=!0},p(o,i){e=o;const s={};i&1&&(s.node=e[2]),t.$set(s)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){v(t.$$.fragment,o),n=!1},d(o){o&&k(l),U(t,o)}}}function Ue(r){var j;let e,l,t,n,o,i,s=r[0].fieldName+"",a,f,c,d,g,S,y;const R=[qe,Oe],w=[];function H(u,h){return u[0].expanded?0:1}t=H(r),n=w[t]=R[t](r);let m=(r[0].formattedValue||!((j=r[0].children)!=null&&j.length))&&ae(r),_=r[0].children&&r[0].expanded&&ie(r);return{c(){e=z("div"),l=z("button"),n.c(),o=Z(),i=z("div"),a=de(s),f=Z(),m&&m.c(),c=Z(),_&&_.c(),d=F(),this.h()},l(u){e=M(u,"DIV",{class:!0});var h=T(e);l=M(h,"BUTTON",{class:!0});var $=T(l);n.l($),$.forEach(k),o=x(h),i=M(h,"DIV",{class:!0});var E=T(i);a=he(E,s),E.forEach(k),f=x(h),m&&m.l(h),h.forEach(k),c=x(u),_&&_.l(u),d=F(),this.h()},h(){var u;A(l,"class","p-1"),b(l,"invisible",!((u=r[0].children)!=null&&u.length)),A(i,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),X(i,"min-width","10ch"),A(e,"class","flex items-center gap-x-1 pr-2 text-xs"),b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal),b(e,"bg-teal-100",r[0].isLabel),X(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),X(e,"line-height","1.7rem")},m(u,h){P(u,e,h),D(e,l),w[t].m(l,null),D(e,o),D(e,i),D(i,a),D(e,f),m&&m.m(e,null),P(u,c,h),_&&_.m(u,h),P(u,d,h),g=!0,S||(y=be(l,"click",r[1]),S=!0)},p(u,[h]){var E,C;let $=t;t=H(u),t!==$&&(Y(),v(w[$],1,1,()=>{w[$]=null}),B(),n=w[t],n||(n=w[t]=R[t](u),n.c()),p(n,1),n.m(l,null)),(!g||h&1)&&b(l,"invisible",!((E=u[0].children)!=null&&E.length)),(!g||h&1)&&s!==(s=u[0].fieldName+"")&&_e(a,s),u[0].formattedValue||!((C=u[0].children)!=null&&C.length)?m?m.p(u,h):(m=ae(u),m.c(),m.m(e,null)):m&&(m.d(1),m=null),(!g||h&1)&&b(e,"bg-blue-100",u[0].isSignal),(!g||h&1)&&b(e,"bg-emerald-100",u[0].isPreviewSignal),(!g||h&1)&&b(e,"bg-teal-100",u[0].isLabel),h&1&&X(e,"padding-left",.25+(u[0].path.length-1)*.5+"rem"),u[0].children&&u[0].expanded?_?(_.p(u,h),h&1&&p(_,1)):(_=ie(u),_.c(),p(_,1),_.m(d.parentNode,d)):_&&(Y(),v(_,1,1,()=>{_=null}),B())},i(u){g||(p(n),p(_),g=!0)},o(u){v(n),v(_),g=!1},d(u){u&&k(e),w[t].d(),m&&m.d(),u&&k(c),_&&_.d(u),u&&k(d),S=!1,y()}}}function me(r){r.expanded=!0,r.children&&r.children.forEach(me)}function He(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&me(t),l(0,t)};return r.$$set=o=>{"node"in o&&l(0,t=o.node)},[t,n]}class ge extends fe{constructor(e){super(),ce(this,e,He,Ue,ue,{node:0})}}function se(r,e,l){const t=r.slice();return t[7]=e[l],t}function je(r){let e,l;return e=new Ce({props:{lines:3,paragraph:!0,class:"w-full"}}),{c(){K(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p:$e,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Ge(r){let e,l,t=r[0].children||[],n=[];for(let i=0;i<t.length;i+=1)n[i]=oe(se(r,t,i));const o=i=>v(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=F()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);e=F()},m(i,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,s);P(i,e,s),l=!0},p(i,s){if(s&1){t=i[0].children||[];let a;for(a=0;a<t.length;a+=1){const f=se(i,t,a);n[a]?(n[a].p(f,s),p(n[a],1)):(n[a]=oe(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(Y(),a=t.length;a<n.length;a+=1)o(a);B()}},i(i){if(!l){for(let s=0;s<t.length;s+=1)p(n[s]);l=!0}},o(i){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)v(n[s]);l=!1},d(i){ye(n,i),i&&k(e)}}}function oe(r){let e,l;return e=new ge({props:{node:r[7]}}),{c(){K(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){q(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.node=t[7]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function We(r){let e,l,t,n;const o=[Ge,je],i=[];function s(a,f){return a[0]?0:1}return e=s(r),l=i[e]=o[e](r),{c(){l.c(),t=F()},l(a){l.l(a),t=F()},m(a,f){i[e].m(a,f),P(a,t,f),n=!0},p(a,[f]){let c=e;e=s(a),e===c?i[e].p(a,f):(Y(),v(i[c],1,1,()=>{i[c]=null}),B(),l=i[e],l?l.p(a,f):(l=i[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){v(l),n=!1},d(a){i[e].d(a),a&&k(t)}}}function Xe(r,e,l){let t,n,{row:o=void 0}=e,{selectRowsSchema:i=void 0}=e,{highlightedFields:s}=e;const a=Ve();Se(r,a,c=>l(5,n=c));function f(c){var u,h,$,E,C;const d=N.field(c),g=N.path(c);let S=N.value(c),y=N.span(c);if(((u=d==null?void 0:d.dtype)==null?void 0:u.type)==="string_span"&&(y=y||S,y!=null)){const V=[];for(let I=g.length-1;I>=0;I--){const J=g.slice(0,I),G=Pe(i.schema,J);let L=null;if(((h=G.map)==null?void 0:h.input_path)!=null?L=G.map.input_path:(($=G.dtype)==null?void 0:$.type)==="string"&&(L=J),L!=null){const Q=o!=null?Fe(o,L):null;if(Q){const W=N.value(Q);if(W){V.push(W.slice(y.start,y.end));break}}}}S=V}const R=((E=n.data)==null?void 0:E.some(V=>{var I;return V.name===((I=d==null?void 0:d.signal)==null?void 0:I.signal_name)}))||!1,w=d?Ie(d):!1,H=d?Ne(d):!1;let m;R||w&&(d==null?void 0:d.dtype)==null||((C=d==null?void 0:d.dtype)==null?void 0:C.type)==="embedding"||(d==null?void 0:d.repeated_field)!=null?m="":S==null?m=null:m=De(S);function _(V){const{[Le]:I,[ze]:J,[Me]:G,[Te]:L,[Ye]:Q,...W}=V;return Object.values(W).filter(pe=>{var ee;return((ee=N.field(pe))==null?void 0:ee.label)==null})}const j=s.some(V=>Ae(V.path,g));return{children:Array.isArray(c)?c.map(f):_(c).map(f),fieldName:g[g.length-1],field:d,path:g,expanded:j,isSignal:w,isLabel:H,isPreviewSignal:i!=null?Re(i,g):!1,isEmbeddingSignal:R,value:S,formattedValue:m}}return r.$$set=c=>{"row"in c&&l(2,o=c.row),"selectRowsSchema"in c&&l(3,i=c.selectRowsSchema),"highlightedFields"in c&&l(4,s=c.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=o!=null?f(o):null)},[t,a,o,i,s]}class et extends fe{constructor(e){super(),ce(this,e,Xe,We,ue,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{et as I};
