import{a as e,_ as t,S as a}from"./SLDelete-A5hC9Eru.js";import{S as s}from"./SLStatusLabel-XajZ26uy.js";import{C as l,f as i,o as n,b as r,E as u,G as o,g as d,h as c,e as p,s as m,_ as v,r as x,i as f,H as h,q as g,j as y,u as _,a as w,t as k,k as b,c as $,F as S,m as j,I as C,A as E,w as L,T as I,v as D}from"./index-P3eFTPEJ.js";import"./SLLoading-IwCfH2dK.js";const M={__name:"StopButton",setup(e){const t=l(),a=t.id,s=t.status,v=i((()=>0===s)),x=()=>{o(d("experiment.index.header.stop.modal.title"),d("experiment.index.header.stop.modal.text"),d("experiment.index.header.stop.button")).then(f)},f=async()=>{const{data:e}=await c.get(`/experiment/${a}/stop`);e&&(t.setUpateTIme(e.update_time),p().setExperimentStatus(a,-1),m.success("State changed"))};return(e,t)=>(n(),r("button",{class:u(["underline text-dimmest ml-2",v.value?"":"cursor-not-allowed"]),onClick:x}," is over? ",2))}},T={class:"w-full px-6 pt-6 text-default relative"},N={class:"flex items-center gap-3"},q={class:"text-2xl font-semibold text-default"},B={key:0,class:"flex items-center pt-5 w-full overflow-hidden"},F={class:"break-words"},H={class:"flex justify-between pt-6 pb-2 flex-wrap"},R={class:"min-w-[400px] max-w-[50%] pr-4"},U={class:"flex items-center pb-4"},A={class:"title"},G={key:0,class:"flex pb-4"},P={class:"title"},z=["title"],J={key:1,class:"text-dimmest"},O=["href"],Q={key:0,class:"w-1/2 min-w-[400px]"},W={class:"title"},K=["title"],V=v({__name:"ExperimentHeader",setup(a){const u=l(),o=x(u.experiment),v=p(),C=f("show_error"),E=h(),L=i((()=>[{title:"start_time",value:g(o.value.create_time)},{title:"last_time",value:V.value},{title:"version",value:`v${o.value.version}`},{title:"git",value:o.value.system.git_remote,isLink:!0}])),I=i((()=>{var e,t;const a="experiment.index.header.experiment_device";return[o.value.system.cpu?d(`${a}.cpu`,{value:o.value.system.cpu}):"",(null==(e=o.value.system.gpu)?void 0:e.cores)?d(`${a}.gpu`,{value:o.value.system.gpu.cores}):"",(null==(t=o.value.system.gpu)?void 0:t.type[0])?d(`${a}.type`,{value:o.value.system.gpu.type[0]}):""].filter((e=>""!==e)).join(" | ")})),D=i((()=>[{title:"hostname",value:o.value.system.hostname||""},{title:"os",value:o.value.system.os||""},{title:"python",value:o.value.system.python||""},{title:"executable",value:o.value.system.executable||""},{title:"hardware",value:I.value}])),V=i((()=>{const e=new Date(o.value.create_time),t=new Date,a=0===o.value.status?new Date(t.getTime()-288e5):new Date(o.value.update_time);if(isNaN(e.getTime())||isNaN(a.getTime()))return"Invalid date";const s=Math.abs(a-e),l=Math.floor(s/1e3)%60,i=Math.floor(s/6e4)%60,n=Math.floor(s/36e5)%24,r=Math.floor(s/864e5),u=[];return r>0&&u.push(`${r}${d("experiment.index.header.experiment_infos.time.day")}`),n>0&&u.push(`${n}${d("experiment.index.header.experiment_infos.time.hour")}`),i>0&&u.push(`${i}${d("experiment.index.header.experiment_infos.time.minute")}`),l>0&&u.push(`${l}${d("experiment.index.header.experiment_infos.time.second")}`),u.join("")||"less than 1s"})),X=async(e,t)=>{const a=u.id,{data:s}=await c.patch(`/experiment/${a}`,e);u.setExperiment(s.experiment),v.setExperimentInfo(a,e),t()},Y=()=>{c.delete(`/experiment/${u.id}`).then((({data:e})=>{v.setProject(e.project),E.replace("/").then((()=>{m.success("Delete Successfully")}))})).catch((({data:e})=>{C(e.code,e.message)}))};return(a,l)=>{const i=t;return n(),r("div",T,[y(i,{class:"absolute top-5 right-4",disabled:_(u).isRunning,type:"experiment",onConfirm:Y},null,8,["disabled"]),w("div",N,[w("span",q,k(_(u).name),1),y(e,{type:"experiment",onModify:X,disabled:_(u).isRunning},null,8,["disabled"])]),_(u).description?(n(),r("div",B,[w("p",F,k(_(u).description),1)])):b("",!0),w("div",H,[w("div",R,[w("div",U,[w("div",A,k(a.$t("experiment.index.header.experiment_infos.status")),1),y(s,{name:o.value.name,id:o.value.id,status:o.value.status},null,8,["name","id","status"]),_(u).isRunning?(n(),$(M,{key:0})):b("",!0)]),(n(!0),r(S,null,j(L.value,(e=>(n(),r("div",{key:e.title},[e.value||"git"===e.title?(n(),r("div",G,[w("div",P,k(a.$t(`experiment.index.header.experiment_infos.${e.title}`)),1),e.isLink?"git"!==e.title||e.value?(n(),r("a",{key:2,href:e.value,target:"_blank",class:"hover:underline break-all"},k(e.value),9,O)):(n(),r("div",J,"None")):(n(),r("div",{key:0,title:e.value},k(e.value),9,z))])):b("",!0)])))),128))]),o.value.system?(n(),r("div",Q,[(n(!0),r(S,null,j(D.value,(e=>(n(),r("div",{key:e.title,class:"flex pb-4"},[w("div",W,k(a.$t(`experiment.index.header.experiment_device.${e.title}`)),1),w("div",{title:e.value},k(e.value||"Unkown"),9,K)])))),128))])):b("",!0)])])}}},[["__scopeId","data-v-6a01c312"]]),X={class:"w-full"},Y={class:"text-lg font-semibold"},Z=v({__name:"ExtendBlock",props:{title:{type:String,required:!0},icon:{type:String,required:!0},retract:{type:Boolean,default:!0}},setup(e){const t=x(!0);return(a,s)=>(n(),r("div",X,[w("button",{class:u(["flex items-center py-4",e.retract?"":"pl-6 cursor-default"]),onClick:s[0]||(s[0]=()=>e.retract&&(t.value=!t.value))},[e.retract?(n(),$(C,{key:0,icon:"down",class:u(["w-5 h-5 mx-1 text-dimmest",t.value?"rotate-show":"rotate-hidden"])},null,8,["class"])):b("",!0),y(C,{icon:e.icon,class:"w-6 h-6 mr-2"},null,8,["icon"]),w("span",Y,k(e.title),1)],2),w("div",{class:u(["transition-all duration-200 pr-5",e.retract?t.value?"max-h-[500px] overflow-auto":"max-h-0 overflow-hidden":""])},[E(a.$slots,"default",{},void 0,!0)],2)]))}},[["__scopeId","data-v-2a090e66"]]),ee={__name:"SLHelp",props:{iconClass:{type:String,default:""},content:{type:String,default:""},contentClass:{type:String,default:""},document:{type:String}},setup(e){const t=e,a=()=>{t.document&&window.open(t.document,"_blank")};return(t,s)=>(n(),$(_(I),{trigger:"mouseenter",placement:"right",class:u(e.document?"cursor-pointer":""),onClick:a},{content:L((()=>[w("div",{class:u(e.contentClass)},k(e.content),3),E(t.$slots,"default")])),default:L((()=>[w("div",{class:u(["w-5 h-5 flex items-center justify-center text-sm rounded-full pointer-events-none bg-overlay text-white-default font-semibold",e.iconClass])}," ? ",2)])),_:3},8,["class"]))}},te={class:"pl-6 w-full grid lg:grid-cols-2 lg:gap-10"},ae={class:"flex items-center pb-4"},se={class:"font-semibold pr-2"},le={key:0},ie={key:0,class:"flex items-center pb-4"},ne={class:"font-semibold pr-2"},re=w("div",{class:"w-full h-6"},null,-1),ue={__name:"ExperimentConfig",setup(e){const t=x(l().experiment),s=[{title:"key",key:"key"},{title:"value",key:"value"}],u=i((()=>{const e=[];for(const a in t.value.config)e.push({key:a,value:t.value.config[a]});return e})),o=x([]),d=x(l().id);return c.get(`/experiment/${d.value}/summary`).then((({data:e})=>{o.value=e.summaries||{}})).catch((e=>{})),(e,t)=>(n(),$(Z,{class:"pt-2 pr-5",icon:"config",title:e.$t("experiment.index.config.title"),retract:!1},{default:L((()=>{var t,l;return[w("div",te,[w("div",null,[w("div",ae,[w("p",se,k(e.$t("experiment.index.config.detail")),1),y(ee,{document:"https://geektechstudio.feishu.cn/wiki/EFi3wuACGiEWlLki5aDcQiSpngg"},{default:L((()=>[D(k(e.$t("experiment.index.config.help.config")),1)])),_:1})]),y(_(a),{column:s,data:u.value,flexable:""},null,8,["data"])]),0!==(null==(t=o.value)?void 0:t.length)?(n(),r("div",le,[0!==(null==(l=o.value)?void 0:l.length)?(n(),r("div",ie,[w("p",ne,k(e.$t("experiment.index.config.summarize")),1),y(ee,{document:"https://geektechstudio.feishu.cn/wiki/TudNwOSMyihFetky7l5cTI8UnJf"},{default:L((()=>[D(k(e.$t("experiment.index.config.help.summary")),1)])),_:1})])):b("",!0),y(_(a),{column:s,data:o.value,flexable:""},null,8,["data"])])):b("",!0)]),re]})),_:1},8,["title"]))}},oe=w("hr",null,null,-1),de=w("hr",null,null,-1),ce={__name:"IndexPage",setup:e=>(e,t)=>(n(),r(S,null,[y(V),oe,y(ue),de],64))};export{ce as default};
