import{_ as e,e as t,C as a,r as l,f as n,o,b as s,a as i,t as r,J as u,K as d,E as c,c as v,k as m,L as p,s as f,g as y,j as h,w as g,I as b,v as x,S as w,M as $,F as _,N as k,m as j,n as S,A as E,G as L}from"./index-P3eFTPEJ.js";import{_ as M}from"./SLLoading-IwCfH2dK.js";const W={class:"text-xl font-semibold"},A={class:"relative pt-4"},z={class:"font-semibold pb-3"},C=["placeholder"],V={class:"tip text-negative-default"},B={class:"relative"},I={class:"font-semibold pt-5 pb-3"},U=["placeholder"],Z={class:"tip text-negative-default"},T={class:"flex justify-end pt-10"},X=100,q=255,D=e({__name:"EditorWrap",props:{type:String},emits:["confirm"],setup(e,{emit:h}){const g=t(),b=a(),x=e,w=h,$=l({name:"project"===x.type?g.name:b.name,description:"project"===x.type?g.description:b.description}),_=l({name:"",description:""}),k=n((()=>{const e=$.value.name;if(e.length>X)return!1;if(e.startsWith("-")||e.endsWith("-")||e.startsWith("_")||e.endsWith("_"))return!1;return/^[a-zA-Z0-9_\-\u4e00-\u9fa5]+$/.test(e)})),j=n((()=>{const e=$.value.name;return!(e.length>X)&&(!/^[_-]|[_-]$/.test(e)&&!/[^a-zA-Z0-9_-]/.test(e))})),S=n((()=>{var e;return!$.value.description||!((null==(e=$.value.description)?void 0:e.length)>q)})),E=l(!1),L=async()=>{if(_.value={name:"",description:""},"project"===x.type&&!k.value)return f.warning("invalid project name"),_.value.name="too long or invalid characters";if(!j.value)return f.warning("invalid experiment name"),_.value.name="too long or invalid characters";if(!S.value)return f.warning("invalid description"),_.value.description="invalid description";if($.value.name===g.name&&$.value.description===g.description)return _.value.name="nothing changed in project config";if($.value.name===b.name&&$.value.description===b.description)return _.value.name="nothing changed in experiment config";let e=!1;"experiment"===x.type&&g.experiments.forEach((t=>{$.value.name===t.name&&$.value.name!==b.name&&(e=!0,_.value.name="The experiment name is duplicated")})),e||(E.value=!0,w("confirm",$.value,(()=>{E.value=!1,f.success(y("common.config-editor.save.success"))})))};return(t,a)=>{var l;return o(),s("form",{class:"w-full",onSubmit:p(L,["prevent"])},[i("h1",W,r(t.$t(`common.config-editor.title.${e.type}`)),1),i("div",A,[i("h2",z,r(t.$t(`common.config-editor.sub-title.${e.type}.name`)),1),u(i("input",{type:"text",class:"input","onUpdate:modelValue":a[0]||(a[0]=e=>$.value.name=e),placeholder:`edit your ${e.type} name here`,maxlength:X,pattern:"[a-zA-Z0-9_\\-\\u4e00-\\u9fa5]*",required:""},null,8,C),[[d,$.value.name]]),i("p",{class:c(["absolute bottom-[-20px] text-xs right-0",0===$.value.name.length||$.value.name.length===X?"text-negative-default":""])},r(`${$.value.name.length} / 100`),3),i("span",V,r(_.value.name),1)]),i("div",B,[i("h2",I,r(t.$t(`common.config-editor.sub-title.${e.type}.desc`)),1),u(i("textarea",{class:"input",rows:"10","onUpdate:modelValue":a[1]||(a[1]=e=>$.value.description=e),placeholder:`edit your ${e.type} description here`,maxlength:q},null,8,U),[[d,$.value.description]]),i("p",{class:c(["absolute bottom-[-20px] text-xs right-0",(null==(l=$.value.description)?void 0:l.length)===q?"text-negative-default":""])},r(`${$.value.description?$.value.description.length:0} / 255`),3),i("span",Z,r(_.value.description),1)]),i("div",T,[i("button",{type:"submit",class:c(["p-2 rounded bg-primary-default text-white-default transition-all flex items-center",E.value?"pointer-events-none cursor-not-allowed opacity-50 gap-2":"hover:rounded-lg active:opacity-70"])},[E.value?(o(),v(M,{key:0,size:"4"})):m("",!0),i("span",null,r(t.$t("common.config-editor.save."+(E.value?"savimg":"default"))),1)],2)])],32)}}},[["__scopeId","data-v-00907ea2"]]),F={__name:"ConfigEditor",props:{type:{type:String,validator:e=>["project","experiment"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["modify"],setup(e,{emit:t}){const a=l(!1),n=t,i=async(e,t)=>{n("modify",e,(()=>{a.value=!1,t()}))};return(t,l)=>(o(),s(_,null,[h(w,{class:c(["flex gap-2 items-center px-3 py-1.5 border rounded-lg text-sm",e.disabled?"cursor-not-allowed":""]),onClick:l[0]||(l[0]=()=>a.value=!0),theme:"primary",hollow:"",disabled:e.disabled,"disabled-tip":t.$t("common.config-editor.not-allowed")},{default:g((()=>[h(b,{icon:"modify",class:"w-3.5 h-3.5"}),x(" "+r(t.$t("common.config-editor.button")),1)])),_:1},8,["class","disabled","disabled-tip"]),h($,{class:"px-10 py-6","max-w":"550",modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e)},{default:g((()=>[h(D,{type:e.type,onConfirm:i},null,8,["type"])])),_:1},8,["modelValue"])],64))}},G={class:"w-full overflow-auto"},J={class:"border-b flex bg-higher table-header"},K=["onMouseover"],N=["title"],H=["onMousedown"],O=["title","onMouseover"],P={key:0},Q={key:1},R={key:0,class:"flex justify-center py-3"},Y={class:"data-empty"},ee=e({__name:"SLTable",props:{data:{type:Array,default:()=>[]},column:{type:Array,default:()=>[]},maxW:{type:String,default:"none"},highLight:{type:Boolean,default:!0},flexable:{type:Boolean,default:!1}},setup(e){const t=e,a=l(null),u=l([]),d=l(null),v=n((()=>{if(t.flexable)return"100%";let e=0;return u.value.forEach((({value:t})=>{e+=t})),e+2+"px"})),p=n((()=>{if(t.flexable){const e=t.column.length;return new Array(e).fill(1/e*100+"%")}return u.value.map((e=>(null==e?void 0:e.value)?(null==e?void 0:e.value)+"px":""))})),f=l(-1),y=n((()=>-1===h.value?f.value:h.value));k((()=>{t.column.forEach(((e,t)=>{if(u.value[t]={value:0,extended:!1},e.width){const a=e.width>150?e.width:150;u.value[t].value=e.border?a-2:a}else u.value[t].value=150}))}));const h=l(-1),g=l(0),b=l(0),w=l(70),$=e=>{let t=b.value+(e.clientX-g.value);t=t<w.value?w.value:t,u.value[h.value].value=t,a.value[h.value]=t},L=()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",L),document.body.style.userSelect="auto",document.body.style.cursor="",g.value=0,b.value=0,h.value=-1};return(t,l)=>(o(),s("div",G,[i("div",{class:"border",ref_key:"table",ref:d,style:S({width:v.value})},[i("div",J,[(o(!0),s(_,null,j(e.column,((t,n)=>(o(),s("div",{key:t.key,class:c(["relative w-full cell shrink-0",`${y.value===n?" bg-highest":"bg-higher"} ${t.border?"border-r":""}`]),onMouseover:()=>f.value=n,onMouseout:l[0]||(l[0]=()=>f.value=-1),style:S({width:p.value[n]}),ref_for:!0,ref_key:"columns",ref:a},[i("div",{class:c(["overflow-hidden w-full h-full flex items-center",t.style?t.style:"px-2 py-3"]),title:t.title},[x(r(t.title)+" ",1),e.column.unresizeable||e.flexable?m("",!0):(o(),s("span",{key:0,class:c(`${y.value===n?"bg-positive-dimmest":""} ${h.value===n?"!bg-primary-default":""}`),onMousedown:e=>((e,t)=>{document.body.style.userSelect="none",document.body.style.cursor="col-resize",h.value=t,g.value=e.clientX,p.value[t].endsWith("%")&&(u.value[t].value=a.value[t].offsetWidth),b.value=u.value[t].value,document.addEventListener("mousemove",$),document.addEventListener("mouseup",L)})(e,n)},null,42,H))],10,N)],46,K)))),128))]),(o(!0),s(_,null,j(e.data,((a,n)=>(o(),s("div",{key:a,class:c([-1===h.value?"hover:bg-higher":"","flex items-center"])},[(o(!0),s(_,null,j(e.column,((e,i)=>(o(),s("div",{key:e.key,title:a[e.key],class:c(["cell shrink-0 px-2 py-3",`${"swanlab-table-column-"+i} ${-1===h.value?"hover:bg-primary-dimmest":""} ${e.border?"border-r ":""} ${e.style} ${y.value===i?"bg-higher":""}`]),onMouseover:()=>f.value=i,onMouseout:l[1]||(l[1]=()=>f.value=-1),style:S({width:p.value[i]})},[e.slot?(o(),s("div",P,[E(t.$slots,e.slot,{row:a,index:n},void 0,!0)])):(o(),s("div",Q,r(a[e.key]||"-"),1))],46,O)))),128))],2)))),128)),e.data.length?m("",!0):(o(),s("div",R,[i("div",Y,r(t.$t("common.table.empty")),1)]))],4)]))}},[["__scopeId","data-v-65abf2d0"]]),te={class:"text-sm flex items-center gap-2"},ae={__name:"SLDelete",props:{type:String,validator:e=>["project","experiment"].includes(e)},emits:["confirm","cancel"],setup(e,{emit:t}){const a=e,l=t,n=()=>{L(y(`common.delete.title.${a.type}`),y(`common.delete.content.${a.type}`),{}).then((()=>{l("confirm")}))};return(e,t)=>(o(),v(w,{onClick:n,theme:"negative",hollow:"",class:"px-3 py-1.5 rounded-lg","disabled-tip":e.$t("common.delete.not-allowed")},{default:g((()=>[i("div",te,[h(b,{icon:"trash",class:"w-4 h-4"}),x(" "+r(e.$t("common.delete.button")),1)])])),_:1},8,["disabled-tip"]))}};export{ee as S,ae as _,F as a};
