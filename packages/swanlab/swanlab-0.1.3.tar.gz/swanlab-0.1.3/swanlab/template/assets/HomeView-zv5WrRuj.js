import{o as e,c as a,w as t,n as s,a as l,t as r,u as o,R as i,_ as c,b as n,p as u,d as m,e as p,f as d,i as v,r as f,g as w,h,j as x,k as y,l as b,m as g,F as j,q as _,s as k,v as S,x as $,y as E}from"./index-P3eFTPEJ.js";import{S as L}from"./SLStatusLabel-XajZ26uy.js";import{_ as q,a as P,S as T}from"./SLDelete-A5hC9Eru.js";import"./SLLoading-IwCfH2dK.js";const C=["title"],D={__name:"ExperimentName",props:{name:{type:String,required:!0},color:{type:String,required:!0},id:{required:!0}},setup:c=>(n,u)=>(e(),a(o(i),{class:"flex gap-2 items-center w-full",to:`/experiment/${c.id}`},{default:t((()=>[l("circle",{class:"w-3 h-3 rounded-full flex-shrink-0",style:s({backgroundColor:n.$props.color})},null,4),l("p",{class:"truncate",title:c.name},r(c.name),9,C)])),_:1},8,["to"]))},I={class:"flex-col justify-center items-center pt-10"},O=(e=>(u("data-v-bcdae545"),e=e(),m(),e))((()=>l("div",{class:"loader"},null,-1))),F={class:"text-center pt-10 text-lg"},H=c({__name:"EmptyTable",setup:a=>(a,t)=>(e(),n("div",I,[O,l("p",F,r(a.$t("home.empty.table")),1)]))},[["__scopeId","data-v-bcdae545"]]),M={class:"p-6 flex flex-col gap-5 text-dimmer border-b relative"},N={class:"flex gap-3"},R={class:"text-2xl font-semibold text-default"},V={key:0},z={class:"w-80 flex flex-col gap-4"},A={class:"flex justify-between"},B={class:"grow"},G={class:"w-36 whitespace-nowrap"},J={class:"flex justify-between"},K={class:"grow"},Q={class:"w-36 whitespace-nowrap"},U={class:"flex justify-between"},W={class:"grow"},X={class:"w-36 whitespace-nowrap"},Y={class:"p-6"},Z={class:"text-xl font-semibold mb-4"},ee=c({__name:"HomeView",setup(s){const i=p(),c=d((()=>void 0===i.experiments?(u(3500),[]):i.experiments)),u=v("show_error"),m=d((()=>_(i.createTime))),C=d((()=>_(i.updateTime))),I=f([{title:w("home.list.table.header.name"),slot:"name",style:"px-4",width:300,border:!0},{title:w("home.list.table.header.status"),slot:"status"},{title:w("home.list.table.header.create"),slot:"create"}]),O=[];c.value.map((e=>{Object.entries(e.config).forEach((([e])=>{O.some((a=>a.title===e))||O.push({key:e,slot:e,title:e})}))})),I.value.push(...O);const F=d((()=>c.value.map((e=>{const a=ae.value[e.name];return a?(Promise.all(Object.keys(a).map((async t=>{e[await te(t)]=a[t]}))),e):{}})))),ee=f(),ae=f({});async function te(e){return"swanlab-overview-table-key"+e}h.get("/project/summaries",{params:{experiment_names:(()=>{let e=[];return c.value.forEach((a=>{e.push(a.name)})),e.join(",")})()}}).then((async({data:e})=>{ee.value=await Promise.all(e.tags.map((async e=>({key:await te(e),title:e})))),I.value.push(...ee.value),ae.value=e.summaries}));const se=async(e,a)=>{const{data:t}=await h.patch("/project/update",e);i.setProject(t.project),a()},le=d((()=>{for(const e of c.value)if(0===e.status)return!0;return!1})),re=()=>{h.delete("/project/delete").then((()=>{k.success("Delete Successfully"),i.clearProject(),u(3500)})).catch((({data:e})=>{k.error("Error deleting project"),u(e.code,e.message)}))};return(s,u)=>(e(),n(j,null,[l("div",M,[x(q,{class:"absolute top-5 right-4",type:"project",onConfirm:re,disabled:le.value},null,8,["disabled"]),l("div",N,[l("h1",R,r(o(i).name),1),x(P,{type:"project",onModify:se})]),o(i).description?(e(),n("p",V,r(o(i).description),1)):y("",!0),l("div",z,[l("div",A,[l("div",B,r(s.$t("home.overview.create")),1),l("p",G,r(m.value),1)]),l("div",J,[l("div",K,r(s.$t("home.overview.latest")),1),l("p",Q,r(C.value),1)]),l("div",U,[l("div",W,r(s.$t("home.overview.total")),1),l("p",X,r(o(i).sum),1)])])]),l("div",Y,[l("h2",Z,r(s.$t("home.list.title")),1),ee.value?(e(),a(o(T),{key:0,column:I.value,data:F.value},b({name:t((({row:e})=>[x(D,{name:e.name,id:e.experiment_id,color:e.color},null,8,["name","id","color"])])),status:t((({row:e})=>[x(L,{id:e.experiment_id,status:e.status},null,8,["id","status"])])),create:t((({row:e})=>[S(r(o($)(o(E)(e.create_time))),1)])),_:2},[g(O,(e=>({name:e.key,fn:t((({row:a})=>[S(r(a.config[e.key]||"-"),1)]))})))]),1032,["column","data"])):0===c.value.length?(e(),a(H,{key:1})):y("",!0)])],64))}},[["__scopeId","data-v-d088b77e"]]);export{ee as default};
