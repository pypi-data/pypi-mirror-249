# Copyright UL Research Institutes
# SPDX-License-Identifier: Apache-2.0

repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: check-added-large-files
      - id: check-merge-conflict
      - id: end-of-file-fixer
      - id: fix-byte-order-marker
      - id: trailing-whitespace

  - repo: https://github.com/PyCQA/autoflake
    rev: "v2.2.1"
    hooks:
      - id: autoflake
        args:
          - "--in-place"
          - "--expand-star-imports"
          - "--remove-duplicate-keys"
          - "--remove-unused-variables"
          # - "--remove-all-unused-imports"

  - repo: https://github.com/psf/black
    rev: 23.11.0
    hooks:
      - id: black

  - repo: https://github.com/PyCQA/isort
    rev: "5.12.0"
    hooks:
      - id: isort

  - repo: https://github.com/seddonym/import-linter
    rev: "v1.12.1"
    hooks:
      - id: import-linter

  - repo: https://github.com/hadolint/hadolint
    rev: "v2.12.1-beta"
    hooks:
      - id: hadolint

  - repo: local
    hooks:
      - id: gen-config-listing
        name: Generate config listing
        description: Generate config listing
        language: system
        entry: make config-listing
        pass_filenames: false

  - repo: local
    hooks:
      - id: license-eye
        name: license-eye
        description: Run license-eye
        language: system
        entry: license-eye header fix
        types: [python, toml, yaml]
        pass_filenames: false

  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: "v3.1.0"
    hooks:
      - id: prettier

  - repo: https://github.com/norwoodj/helm-docs
    rev: "v1.11.3"
    hooks:
      - id: helm-docs

  - repo: https://github.com/jazzband/pip-tools
    rev: "7.3.0"
    hooks:
      - id: pip-compile
        name: pip-compile requirements.in
        args:
          [
            "--strip-extras",
            "--no-emit-index-url",
            "--upgrade",
            "requirements.in",
          ]
        files: "^requirements\\.(in|txt)$"

      - id: pip-compile
        name: pip-compile requirements-orchestrator.in
        args:
          [
            "--strip-extras",
            "--no-emit-index-url",
            "--upgrade",
            "requirements-orchestrator.in",
          ]
        files: "^requirements-orchestrator\\.(in|txt)$"

      - id: pip-compile
        name: pip-compile apps/api_proxy/requirements.in
        args:
          [
            "--strip-extras",
            "--no-emit-index-url",
            "--upgrade",
            "apps/api_proxy/requirements.in",
          ]
        files: "^apps/api_proxy/requirements\\.(in|txt)$"

      - id: pip-compile
        name: pip-compile docs/requirements.in
        args:
          [
            "--strip-extras",
            "--no-emit-index-url",
            "--upgrade",
            "docs/requirements.in",
          ]
        files: "^docs/requirements\\.(in|txt)$"
