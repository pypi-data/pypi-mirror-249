FROM python:3.8-bullseye

RUN python3 -m pip install --upgrade pip

COPY core/setup.py /alignment-labs/core/
COPY core/src/ /alignment-labs/core/src/
COPY apis/ /alignment-labs/apis/
COPY dyff/setup.py /alignment-labs/dyff/
COPY dyff/python/ /alignment-labs/dyff/python/

RUN python3 -m pip install /alignment-labs/core
RUN python3 -m pip install /alignment-labs/apis
RUN python3 -m pip install /alignment-labs/dyff

ENTRYPOINT [ "python3", "-m", "alignmentlabs.dyff.bin.prepare_inference_task" ]
