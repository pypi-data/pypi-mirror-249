/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
export const id = "src_panels_lovelace_cards_hui-statistics-graph-card_ts";
export const ids = ["src_panels_lovelace_cards_hui-statistics-graph-card_ts"];
export const modules = {

/***/ "./src/panels/lovelace/cards/hui-statistics-graph-card.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-statistics-graph-card.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_DAYS_TO_SHOW: () => (/* binding */ DEFAULT_DAYS_TO_SHOW),\n/* harmony export */   HuiStatisticsGraphCard: () => (/* binding */ HuiStatisticsGraphCard)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var _babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/esm/get.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var lit_directives_class_map__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit/directives/class-map */ \"./node_modules/lit/directives/class-map.js\");\n/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/ha-card */ \"./src/components/ha-card.ts\");\n/* harmony import */ var _data_recorder__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../data/recorder */ \"./src/data/recorder.ts\");\n/* harmony import */ var _common_find_entities__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/find-entities */ \"./src/panels/lovelace/common/find-entities.ts\");\n/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/has-changed */ \"./src/panels/lovelace/common/has-changed.ts\");\n/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/process-config-entities */ \"./src/panels/lovelace/common/process-config-entities.ts\");\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_DAYS_TO_SHOW = 30;\nlet HuiStatisticsGraphCard = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.customElement)(\"hui-statistics-graph-card\")], function (_initialize, _LitElement) {\n  class HuiStatisticsGraphCard extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HuiStatisticsGraphCard,\n    d: [{\n      kind: \"method\",\n      static: true,\n      key: \"getConfigElement\",\n      value: async function getConfigElement() {\n        await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_material_mwc-textfield_mwc-textfield-base_js-node_modules_material_mwc-t-b75c5d\"), __webpack_require__.e(\"vendors-node_modules_polymer_polymer_lib_utils_settings_js\"), __webpack_require__.e(\"vendors-node_modules_polymer_polymer_lib_utils_render-status_js-node_modules_polymer_polymer_-c63234\"), __webpack_require__.e(\"vendors-node_modules_vaadin_combo-box_lit_js-node_modules_vaadin_combo-box_theme_material_vaa-dad3c3\"), __webpack_require__.e(\"src_components_ha-combo-box_ts-node_modules_vaadin_vaadin-material-styles_font-icons_js-node_-a3c6e1\"), __webpack_require__.e(\"src_components_ha-selector_ha-selector_ts\"), __webpack_require__.e(\"src_common_string_filter_sequence-matching_ts\"), __webpack_require__.e(\"src_components_chart_ha-chart-base_ts\"), __webpack_require__.e(\"src_components_entity_ha-statistic-picker_ts-src_components_ha-list-item_ts\"), __webpack_require__.e(\"src_components_chart_statistics-chart_ts-src_util_documentation-url_ts\"), __webpack_require__.e(\"src_components_entity_ha-statistics-picker_ts-src_components_ha-textfield_ts\"), __webpack_require__.e(\"src_panels_lovelace_editor_config-elements_hui-statistics-graph-card-editor_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../editor/config-elements/hui-statistics-graph-card-editor */ \"./src/panels/lovelace/editor/config-elements/hui-statistics-graph-card-editor.ts\"));\n        return document.createElement(\"hui-statistics-graph-card-editor\");\n      }\n    }, {\n      kind: \"method\",\n      static: true,\n      key: \"getStubConfig\",\n      value: function getStubConfig(hass, entities, entitiesFill) {\n        const includeDomains = [\"sensor\"];\n        const maxEntities = 1;\n        const foundEntities = (0,_common_find_entities__WEBPACK_IMPORTED_MODULE_8__.findEntities)(hass, maxEntities, entities, entitiesFill, includeDomains, stateObj => \"state_class\" in stateObj.attributes);\n        return {\n          type: \"statistics-graph\",\n          entities: foundEntities.length ? [foundEntities[0]] : []\n        };\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_config\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_statistics\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_metadata\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_unit\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_entities\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      key: \"_names\",\n      value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      key: \"_interval\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_statTypes\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiStatisticsGraphCard.prototype), \"disconnectedCallback\", this).call(this);\n        if (this._interval) {\n          clearInterval(this._interval);\n          this._interval = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiStatisticsGraphCard.prototype), \"connectedCallback\", this).call(this);\n        if (!this.hasUpdated) {\n          return;\n        }\n        this._setFetchStatisticsTimer();\n      }\n    }, {\n      kind: \"method\",\n      key: \"getCardSize\",\n      value: function getCardSize() {\n        var _this$_config, _this$_config2, _this$_entities;\n        return 5 + ((_this$_config = this._config) !== null && _this$_config !== void 0 && _this$_config.title ? 2 : 0) + (!((_this$_config2 = this._config) !== null && _this$_config2 !== void 0 && _this$_config2.hide_legend) ? ((_this$_entities = this._entities) === null || _this$_entities === void 0 ? void 0 : _this$_entities.length) || 0 : 0);\n      }\n    }, {\n      kind: \"method\",\n      key: \"setConfig\",\n      value: function setConfig(config) {\n        if (!config.entities || !Array.isArray(config.entities)) {\n          throw new Error(\"Entities need to be an array\");\n        }\n        if (!config.entities.length) {\n          throw new Error(\"You must include at least one entity\");\n        }\n        const configEntities = config.entities ? (0,_common_process_config_entities__WEBPACK_IMPORTED_MODULE_10__.processConfigEntities)(config.entities, false) : [];\n        this._entities = [];\n        configEntities.forEach(entity => {\n          this._entities.push(entity.entity);\n          if (entity.name) {\n            this._names[entity.entity] = entity.name;\n          }\n        });\n        if (typeof config.stat_types === \"string\") {\n          this._statTypes = [config.stat_types];\n        } else if (!config.stat_types) {\n          this._statTypes = [\"change\", \"state\", \"sum\", \"min\", \"max\", \"mean\"];\n        } else {\n          this._statTypes = config.stat_types;\n        }\n        this._config = config;\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        return (0,_common_has_changed__WEBPACK_IMPORTED_MODULE_9__.hasConfigOrEntitiesChanged)(this, changedProps) || changedProps.size > 1 || !changedProps.has(\"hass\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiStatisticsGraphCard.prototype), \"willUpdate\", this).call(this, changedProps);\n        if (!this._config || !changedProps.has(\"_config\")) {\n          return;\n        }\n        const oldConfig = changedProps.get(\"_config\");\n        if (changedProps.has(\"_config\") && (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.entities) !== this._config.entities) {\n          this._getStatisticsMetaData(this._entities).then(() => {\n            this._setFetchStatisticsTimer();\n          });\n          return;\n        }\n        if (changedProps.has(\"_config\") && ((oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.stat_types) !== this._config.stat_types || (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.days_to_show) !== this._config.days_to_show || (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.period) !== this._config.period || (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.unit) !== this._config.unit)) {\n          this._setFetchStatisticsTimer();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setFetchStatisticsTimer\",\n      value: function _setFetchStatisticsTimer() {\n        this._getStatistics();\n        // statistics are created every hour\n        clearInterval(this._interval);\n        this._interval = window.setInterval(() => this._getStatistics(), this._intervalTimeout);\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.hass || !this._config) {\n          return lit__WEBPACK_IMPORTED_MODULE_3__.nothing;\n        }\n        return (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`\n      <ha-card .header=${this._config.title}>\n        <div\n          class=\"content ${(0,lit_directives_class_map__WEBPACK_IMPORTED_MODULE_5__.classMap)({\n          \"has-header\": !!this._config.title\n        })}\"\n        >\n          <statistics-chart\n            .hass=${this.hass}\n            .isLoadingData=${!this._statistics}\n            .statisticsData=${this._statistics}\n            .metadata=${this._metadata}\n            .period=${this._config.period}\n            .chartType=${this._config.chart_type || \"line\"}\n            .statTypes=${this._statTypes}\n            .names=${this._names}\n            .unit=${this._unit}\n            .hideLegend=${this._config.hide_legend || false}\n            .logarithmicScale=${this._config.logarithmic_scale || false}\n          ></statistics-chart>\n        </div>\n      </ha-card>\n    `;\n      }\n    }, {\n      kind: \"get\",\n      key: \"_intervalTimeout\",\n      value: function _intervalTimeout() {\n        var _this$_config3;\n        return (((_this$_config3 = this._config) === null || _this$_config3 === void 0 ? void 0 : _this$_config3.period) === \"5minute\" ? 5 : 60) * 1000 * 60;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getStatisticsMetaData\",\n      value: async function _getStatisticsMetaData(statisticIds) {\n        const statsMetadataArray = await (0,_data_recorder__WEBPACK_IMPORTED_MODULE_7__.getStatisticMetadata)(this.hass, statisticIds);\n        const statisticsMetaData = {};\n        statsMetadataArray.forEach(x => {\n          statisticsMetaData[x.statistic_id] = x;\n        });\n        this._metadata = statisticsMetaData;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getStatistics\",\n      value: async function _getStatistics() {\n        const startDate = new Date();\n        startDate.setTime(startDate.getTime() - 1000 * 60 * 60 * (24 * (this._config.days_to_show || DEFAULT_DAYS_TO_SHOW) + 1));\n        try {\n          let unitClass;\n          if (this._config.unit && this._metadata) {\n            const metadata = Object.values(this._metadata).find(metaData => (0,_data_recorder__WEBPACK_IMPORTED_MODULE_7__.getDisplayUnit)(this.hass, metaData === null || metaData === void 0 ? void 0 : metaData.statistic_id, metaData) === this._config.unit);\n            if (metadata) {\n              unitClass = metadata.unit_class;\n              this._unit = this._config.unit;\n            }\n          }\n          if (!unitClass && this._metadata) {\n            const metadata = this._metadata[this._entities[0]];\n            unitClass = metadata === null || metadata === void 0 ? void 0 : metadata.unit_class;\n            this._unit = unitClass ? (0,_data_recorder__WEBPACK_IMPORTED_MODULE_7__.getDisplayUnit)(this.hass, metadata.statistic_id, metadata) || undefined : undefined;\n          }\n          const unitconfig = unitClass ? {\n            [unitClass]: this._unit\n          } : undefined;\n          const statistics = await (0,_data_recorder__WEBPACK_IMPORTED_MODULE_7__.fetchStatistics)(this.hass, startDate, undefined, this._entities, this._config.period, unitconfig, this._statTypes);\n          this._statistics = {};\n          this._entities.forEach(id => {\n            if (id in statistics) {\n              this._statistics[id] = statistics[id];\n            }\n          });\n        } catch (err) {\n          this._statistics = undefined;\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_3__.css)`\n      ha-card {\n        height: 100%;\n      }\n      .content {\n        padding: 16px;\n      }\n      .has-header {\n        padding-top: 0;\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_3__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1zdGF0aXN0aWNzLWdyYXBoLWNhcmQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQW9RQTtBQUFBO0FBQUE7QUFwUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLXN0YXRpc3RpY3MtZ3JhcGgtY2FyZC50cz9mNWVmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhhc3NFbnRpdHkgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQge1xuICBjc3MsXG4gIENTU1Jlc3VsdEdyb3VwLFxuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgbm90aGluZyxcbn0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHN0YXRlIH0gZnJvbSBcImxpdC9kZWNvcmF0b3JzXCI7XG5pbXBvcnQgeyBjbGFzc01hcCB9IGZyb20gXCJsaXQvZGlyZWN0aXZlcy9jbGFzcy1tYXBcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2NvbXBvbmVudHMvaGEtY2FyZFwiO1xuaW1wb3J0IHtcbiAgZmV0Y2hTdGF0aXN0aWNzLFxuICBnZXREaXNwbGF5VW5pdCxcbiAgZ2V0U3RhdGlzdGljTWV0YWRhdGEsXG4gIFN0YXRpc3RpY3MsXG4gIFN0YXRpc3RpY3NNZXRhRGF0YSxcbiAgU3RhdGlzdGljVHlwZSxcbn0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvcmVjb3JkZXJcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZpbmRFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vZmluZC1lbnRpdGllc1wiO1xuaW1wb3J0IHsgaGFzQ29uZmlnT3JFbnRpdGllc0NoYW5nZWQgfSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyBwcm9jZXNzQ29uZmlnRW50aXRpZXMgfSBmcm9tIFwiLi4vY29tbW9uL3Byb2Nlc3MtY29uZmlnLWVudGl0aWVzXCI7XG5pbXBvcnQgeyBMb3ZlbGFjZUNhcmQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IFN0YXRpc3RpY3NHcmFwaENhcmRDb25maWcgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9EQVlTX1RPX1NIT1cgPSAzMDtcblxuQGN1c3RvbUVsZW1lbnQoXCJodWktc3RhdGlzdGljcy1ncmFwaC1jYXJkXCIpXG5leHBvcnQgY2xhc3MgSHVpU3RhdGlzdGljc0dyYXBoQ2FyZCBleHRlbmRzIExpdEVsZW1lbnQgaW1wbGVtZW50cyBMb3ZlbGFjZUNhcmQge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldENvbmZpZ0VsZW1lbnQoKSB7XG4gICAgYXdhaXQgaW1wb3J0KFwiLi4vZWRpdG9yL2NvbmZpZy1lbGVtZW50cy9odWktc3RhdGlzdGljcy1ncmFwaC1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1zdGF0aXN0aWNzLWdyYXBoLWNhcmQtZWRpdG9yXCIpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRTdHViQ29uZmlnKFxuICAgIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gICAgZW50aXRpZXM6IHN0cmluZ1tdLFxuICAgIGVudGl0aWVzRmlsbDogc3RyaW5nW11cbiAgKTogU3RhdGlzdGljc0dyYXBoQ2FyZENvbmZpZyB7XG4gICAgY29uc3QgaW5jbHVkZURvbWFpbnMgPSBbXCJzZW5zb3JcIl07XG4gICAgY29uc3QgbWF4RW50aXRpZXMgPSAxO1xuICAgIGNvbnN0IGZvdW5kRW50aXRpZXMgPSBmaW5kRW50aXRpZXMoXG4gICAgICBoYXNzLFxuICAgICAgbWF4RW50aXRpZXMsXG4gICAgICBlbnRpdGllcyxcbiAgICAgIGVudGl0aWVzRmlsbCxcbiAgICAgIGluY2x1ZGVEb21haW5zLFxuICAgICAgKHN0YXRlT2JqOiBIYXNzRW50aXR5KSA9PiBcInN0YXRlX2NsYXNzXCIgaW4gc3RhdGVPYmouYXR0cmlidXRlc1xuICAgICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwic3RhdGlzdGljcy1ncmFwaFwiLFxuICAgICAgZW50aXRpZXM6IGZvdW5kRW50aXRpZXMubGVuZ3RoID8gW2ZvdW5kRW50aXRpZXNbMF1dIDogW10sXG4gICAgfTtcbiAgfVxuXG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIGhhc3M/OiBIb21lQXNzaXN0YW50O1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2NvbmZpZz86IFN0YXRpc3RpY3NHcmFwaENhcmRDb25maWc7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfc3RhdGlzdGljcz86IFN0YXRpc3RpY3M7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBTdGF0aXN0aWNzTWV0YURhdGE+O1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX3VuaXQ/OiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfZW50aXRpZXM6IHN0cmluZ1tdID0gW107XG5cbiAgcHJpdmF0ZSBfbmFtZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuICBwcml2YXRlIF9pbnRlcnZhbD86IG51bWJlcjtcblxuICBwcml2YXRlIF9zdGF0VHlwZXM/OiBBcnJheTxTdGF0aXN0aWNUeXBlPjtcblxuICBwdWJsaWMgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodGhpcy5faW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuICAgICAgdGhpcy5faW50ZXJ2YWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgaWYgKCF0aGlzLmhhc1VwZGF0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fc2V0RmV0Y2hTdGF0aXN0aWNzVGltZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDYXJkU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiAoXG4gICAgICA1ICtcbiAgICAgICh0aGlzLl9jb25maWc/LnRpdGxlID8gMiA6IDApICtcbiAgICAgICghdGhpcy5fY29uZmlnPy5oaWRlX2xlZ2VuZCA/IHRoaXMuX2VudGl0aWVzPy5sZW5ndGggfHwgMCA6IDApXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBTdGF0aXN0aWNzR3JhcGhDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcuZW50aXRpZXMgfHwgIUFycmF5LmlzQXJyYXkoY29uZmlnLmVudGl0aWVzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW50aXRpZXMgbmVlZCB0byBiZSBhbiBhcnJheVwiKTtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpZy5lbnRpdGllcy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IGluY2x1ZGUgYXQgbGVhc3Qgb25lIGVudGl0eVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb25maWdFbnRpdGllcyA9IGNvbmZpZy5lbnRpdGllc1xuICAgICAgPyBwcm9jZXNzQ29uZmlnRW50aXRpZXMoY29uZmlnLmVudGl0aWVzLCBmYWxzZSlcbiAgICAgIDogW107XG5cbiAgICB0aGlzLl9lbnRpdGllcyA9IFtdO1xuICAgIGNvbmZpZ0VudGl0aWVzLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgdGhpcy5fZW50aXRpZXMucHVzaChlbnRpdHkuZW50aXR5KTtcbiAgICAgIGlmIChlbnRpdHkubmFtZSkge1xuICAgICAgICB0aGlzLl9uYW1lc1tlbnRpdHkuZW50aXR5XSA9IGVudGl0eS5uYW1lO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHR5cGVvZiBjb25maWcuc3RhdF90eXBlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhpcy5fc3RhdFR5cGVzID0gW2NvbmZpZy5zdGF0X3R5cGVzXTtcbiAgICB9IGVsc2UgaWYgKCFjb25maWcuc3RhdF90eXBlcykge1xuICAgICAgdGhpcy5fc3RhdFR5cGVzID0gW1wiY2hhbmdlXCIsIFwic3RhdGVcIiwgXCJzdW1cIiwgXCJtaW5cIiwgXCJtYXhcIiwgXCJtZWFuXCJdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdGF0VHlwZXMgPSBjb25maWcuc3RhdF90eXBlcztcbiAgICB9XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGhhc0NvbmZpZ09yRW50aXRpZXNDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcykgfHxcbiAgICAgIGNoYW5nZWRQcm9wcy5zaXplID4gMSB8fFxuICAgICAgIWNoYW5nZWRQcm9wcy5oYXMoXCJoYXNzXCIpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyB3aWxsVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICBzdXBlci53aWxsVXBkYXRlKGNoYW5nZWRQcm9wcyk7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgIWNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkQ29uZmlnID0gY2hhbmdlZFByb3BzLmdldChcIl9jb25maWdcIikgYXNcbiAgICAgIHwgU3RhdGlzdGljc0dyYXBoQ2FyZENvbmZpZ1xuICAgICAgfCB1bmRlZmluZWQ7XG5cbiAgICBpZiAoXG4gICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwiX2NvbmZpZ1wiKSAmJlxuICAgICAgb2xkQ29uZmlnPy5lbnRpdGllcyAhPT0gdGhpcy5fY29uZmlnLmVudGl0aWVzXG4gICAgKSB7XG4gICAgICB0aGlzLl9nZXRTdGF0aXN0aWNzTWV0YURhdGEodGhpcy5fZW50aXRpZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLl9zZXRGZXRjaFN0YXRpc3RpY3NUaW1lcigpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgY2hhbmdlZFByb3BzLmhhcyhcIl9jb25maWdcIikgJiZcbiAgICAgIChvbGRDb25maWc/LnN0YXRfdHlwZXMgIT09IHRoaXMuX2NvbmZpZy5zdGF0X3R5cGVzIHx8XG4gICAgICAgIG9sZENvbmZpZz8uZGF5c190b19zaG93ICE9PSB0aGlzLl9jb25maWcuZGF5c190b19zaG93IHx8XG4gICAgICAgIG9sZENvbmZpZz8ucGVyaW9kICE9PSB0aGlzLl9jb25maWcucGVyaW9kIHx8XG4gICAgICAgIG9sZENvbmZpZz8udW5pdCAhPT0gdGhpcy5fY29uZmlnLnVuaXQpXG4gICAgKSB7XG4gICAgICB0aGlzLl9zZXRGZXRjaFN0YXRpc3RpY3NUaW1lcigpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3NldEZldGNoU3RhdGlzdGljc1RpbWVyKCkge1xuICAgIHRoaXMuX2dldFN0YXRpc3RpY3MoKTtcbiAgICAvLyBzdGF0aXN0aWNzIGFyZSBjcmVhdGVkIGV2ZXJ5IGhvdXJcbiAgICBjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKTtcbiAgICB0aGlzLl9pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbChcbiAgICAgICgpID0+IHRoaXMuX2dldFN0YXRpc3RpY3MoKSxcbiAgICAgIHRoaXMuX2ludGVydmFsVGltZW91dFxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5oYXNzIHx8ICF0aGlzLl9jb25maWcpIHtcbiAgICAgIHJldHVybiBub3RoaW5nO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNhcmQgLmhlYWRlcj0ke3RoaXMuX2NvbmZpZy50aXRsZX0+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cImNvbnRlbnQgJHtjbGFzc01hcCh7XG4gICAgICAgICAgICBcImhhcy1oZWFkZXJcIjogISF0aGlzLl9jb25maWcudGl0bGUsXG4gICAgICAgICAgfSl9XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxzdGF0aXN0aWNzLWNoYXJ0XG4gICAgICAgICAgICAuaGFzcz0ke3RoaXMuaGFzc31cbiAgICAgICAgICAgIC5pc0xvYWRpbmdEYXRhPSR7IXRoaXMuX3N0YXRpc3RpY3N9XG4gICAgICAgICAgICAuc3RhdGlzdGljc0RhdGE9JHt0aGlzLl9zdGF0aXN0aWNzfVxuICAgICAgICAgICAgLm1ldGFkYXRhPSR7dGhpcy5fbWV0YWRhdGF9XG4gICAgICAgICAgICAucGVyaW9kPSR7dGhpcy5fY29uZmlnLnBlcmlvZH1cbiAgICAgICAgICAgIC5jaGFydFR5cGU9JHt0aGlzLl9jb25maWcuY2hhcnRfdHlwZSB8fCBcImxpbmVcIn1cbiAgICAgICAgICAgIC5zdGF0VHlwZXM9JHt0aGlzLl9zdGF0VHlwZXMhfVxuICAgICAgICAgICAgLm5hbWVzPSR7dGhpcy5fbmFtZXN9XG4gICAgICAgICAgICAudW5pdD0ke3RoaXMuX3VuaXR9XG4gICAgICAgICAgICAuaGlkZUxlZ2VuZD0ke3RoaXMuX2NvbmZpZy5oaWRlX2xlZ2VuZCB8fCBmYWxzZX1cbiAgICAgICAgICAgIC5sb2dhcml0aG1pY1NjYWxlPSR7dGhpcy5fY29uZmlnLmxvZ2FyaXRobWljX3NjYWxlIHx8IGZhbHNlfVxuICAgICAgICAgID48L3N0YXRpc3RpY3MtY2hhcnQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGdldCBfaW50ZXJ2YWxUaW1lb3V0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLl9jb25maWc/LnBlcmlvZCA9PT0gXCI1bWludXRlXCIgPyA1IDogNjApICogMTAwMCAqIDYwO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZ2V0U3RhdGlzdGljc01ldGFEYXRhKHN0YXRpc3RpY0lkczogc3RyaW5nW10gfCB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBzdGF0c01ldGFkYXRhQXJyYXkgPSBhd2FpdCBnZXRTdGF0aXN0aWNNZXRhZGF0YShcbiAgICAgIHRoaXMuaGFzcyEsXG4gICAgICBzdGF0aXN0aWNJZHNcbiAgICApO1xuICAgIGNvbnN0IHN0YXRpc3RpY3NNZXRhRGF0YSA9IHt9O1xuICAgIHN0YXRzTWV0YWRhdGFBcnJheS5mb3JFYWNoKCh4KSA9PiB7XG4gICAgICBzdGF0aXN0aWNzTWV0YURhdGFbeC5zdGF0aXN0aWNfaWRdID0geDtcbiAgICB9KTtcbiAgICB0aGlzLl9tZXRhZGF0YSA9IHN0YXRpc3RpY3NNZXRhRGF0YTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2dldFN0YXRpc3RpY3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICBzdGFydERhdGUuc2V0VGltZShcbiAgICAgIHN0YXJ0RGF0ZS5nZXRUaW1lKCkgLVxuICAgICAgICAxMDAwICpcbiAgICAgICAgICA2MCAqXG4gICAgICAgICAgNjAgKlxuICAgICAgICAgICgyNCAqICh0aGlzLl9jb25maWchLmRheXNfdG9fc2hvdyB8fCBERUZBVUxUX0RBWVNfVE9fU0hPVykgKyAxKVxuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgIGxldCB1bml0Q2xhc3M7XG4gICAgICBpZiAodGhpcy5fY29uZmlnIS51bml0ICYmIHRoaXMuX21ldGFkYXRhKSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gT2JqZWN0LnZhbHVlcyh0aGlzLl9tZXRhZGF0YSkuZmluZChcbiAgICAgICAgICAobWV0YURhdGEpID0+XG4gICAgICAgICAgICBnZXREaXNwbGF5VW5pdCh0aGlzLmhhc3MhLCBtZXRhRGF0YT8uc3RhdGlzdGljX2lkLCBtZXRhRGF0YSkgPT09XG4gICAgICAgICAgICB0aGlzLl9jb25maWchLnVuaXRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgICAgdW5pdENsYXNzID0gbWV0YWRhdGEudW5pdF9jbGFzcztcbiAgICAgICAgICB0aGlzLl91bml0ID0gdGhpcy5fY29uZmlnIS51bml0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXVuaXRDbGFzcyAmJiB0aGlzLl9tZXRhZGF0YSkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuX21ldGFkYXRhW3RoaXMuX2VudGl0aWVzWzBdXTtcbiAgICAgICAgdW5pdENsYXNzID0gbWV0YWRhdGE/LnVuaXRfY2xhc3M7XG4gICAgICAgIHRoaXMuX3VuaXQgPSB1bml0Q2xhc3NcbiAgICAgICAgICA/IGdldERpc3BsYXlVbml0KHRoaXMuaGFzcyEsIG1ldGFkYXRhLnN0YXRpc3RpY19pZCwgbWV0YWRhdGEpIHx8XG4gICAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVuaXRjb25maWcgPSB1bml0Q2xhc3MgPyB7IFt1bml0Q2xhc3NdOiB0aGlzLl91bml0IH0gOiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBzdGF0aXN0aWNzID0gYXdhaXQgZmV0Y2hTdGF0aXN0aWNzKFxuICAgICAgICB0aGlzLmhhc3MhLFxuICAgICAgICBzdGFydERhdGUsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdGhpcy5fZW50aXRpZXMsXG4gICAgICAgIHRoaXMuX2NvbmZpZyEucGVyaW9kLFxuICAgICAgICB1bml0Y29uZmlnLFxuICAgICAgICB0aGlzLl9zdGF0VHlwZXNcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuX3N0YXRpc3RpY3MgPSB7fTtcbiAgICAgIHRoaXMuX2VudGl0aWVzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICAgIGlmIChpZCBpbiBzdGF0aXN0aWNzKSB7XG4gICAgICAgICAgdGhpcy5fc3RhdGlzdGljcyFbaWRdID0gc3RhdGlzdGljc1tpZF07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5fc3RhdGlzdGljcyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHRHcm91cCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG4gICAgICAuY29udGVudCB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICB9XG4gICAgICAuaGFzLWhlYWRlciB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAwO1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zdGF0aXN0aWNzLWdyYXBoLWNhcmRcIjogSHVpU3RhdGlzdGljc0dyYXBoQ2FyZDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/panels/lovelace/cards/hui-statistics-graph-card.ts\n");

/***/ })

};
