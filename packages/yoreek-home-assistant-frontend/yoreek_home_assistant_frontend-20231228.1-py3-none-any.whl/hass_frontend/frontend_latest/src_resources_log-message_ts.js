/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
export const id = "src_resources_log-message_ts";
export const ids = ["src_resources_log-message_ts"];
export const modules = {

/***/ "./src/resources/log-message.ts":
/*!**************************************!*\
  !*** ./src/resources/log-message.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLogMessage: () => (/* binding */ createLogMessage)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_web_url_can_parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.url.can-parse */ \"./node_modules/core-js/modules/web.url.can-parse.js\");\n/* harmony import */ var core_js_modules_web_url_can_parse__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_can_parse__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var stacktrace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! stacktrace-js */ \"./node_modules/stacktrace-js/stacktrace.js\");\n/* harmony import */ var stacktrace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(stacktrace_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ua-parser-js */ \"./node_modules/ua-parser-js/src/ua-parser.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n// URL paths to remove from filenames and max stack trace lines for brevity\nconst REMOVAL_PATHS = /^\\/(?:home-assistant\\/frontend\\/[^/]+|unknown|\\/{2}\\.)\\//;\nconst MAX_STACK_FRAMES = 10;\nconst createLogMessage = async (error, intro, messageFallback, stackFallback) => {\n  const lines = [];\n  // Append the originating browser/OS to any intro for easier identification\n  if (intro) {\n    const parser = new ua_parser_js__WEBPACK_IMPORTED_MODULE_2__.UAParser();\n    const {\n      name: browserName = \"unknown browser\",\n      version: browserVersion = \"\"\n    } = parser.getBrowser();\n    const {\n      name: osName = \"unknown OS\",\n      version: osVersion = \"\"\n    } = parser.getOS();\n    const browser = `${browserName} ${browserVersion}`.trim();\n    const os = `${osName} ${osVersion}`.trim();\n    lines.push(`${intro} from ${browser} on ${os}`);\n  }\n  // In most cases, an Error instance will be thrown, which can have many details to log:\n  // - a standard string coercion to \"ErrorType: Message\"\n  // - a stack added by browsers (which must be converted to original source)\n  // - an optional cause chain\n  // - a possible list of aggregated errors\n  if (error instanceof Error) {\n    lines.push(error.toString() || messageFallback);\n    const stackLines = (await (0,stacktrace_js__WEBPACK_IMPORTED_MODULE_1__.fromError)(error)).slice(0, MAX_STACK_FRAMES).map(frame => {\n      var _frame$fileName;\n      (_frame$fileName = frame.fileName) !== null && _frame$fileName !== void 0 ? _frame$fileName : frame.fileName = \"\";\n      if (URL.canParse(frame.fileName)) {\n        frame.fileName = new URL(frame.fileName).pathname;\n      }\n      frame.fileName = frame.fileName.replace(REMOVAL_PATHS, \"\");\n      return frame.toString();\n    });\n    lines.push(...(stackLines.length > 0 ? stackLines : [stackFallback]));\n    // @ts-expect-error Requires library bump to ES2022\n    if (error.cause) {\n      // @ts-expect-error Requires library bump to ES2022\n      lines.push(`Caused by: ${await createLogMessage(error.cause)}`);\n    }\n    if (error instanceof AggregateError) {\n      const subMessageEntries = error.errors.map(async (e, i) => [i, await createLogMessage(e)]);\n      for await (const [i, m] of subMessageEntries) {\n        lines.push(`Part ${i + 1} of ${error.errors.length}: ${m}`);\n      }\n    }\n  } else {\n    // The error could be anything, so just stringify it and log with fallbacks\n    const errorString = JSON.stringify(error, null, 2);\n    lines.push(messageFallback, errorString === messageFallback ? \"\" : errorString, stackFallback);\n  }\n  return lines.filter(Boolean).join(\"\\n\");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL2xvZy1tZXNzYWdlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9yZXNvdXJjZXMvbG9nLW1lc3NhZ2UudHM/MTkxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5jYW4tcGFyc2VcIjtcbmltcG9ydCB7IGZyb21FcnJvciB9IGZyb20gXCJzdGFja3RyYWNlLWpzXCI7XG5pbXBvcnQgeyBVQVBhcnNlciB9IGZyb20gXCJ1YS1wYXJzZXItanNcIjtcblxuLy8gVVJMIHBhdGhzIHRvIHJlbW92ZSBmcm9tIGZpbGVuYW1lcyBhbmQgbWF4IHN0YWNrIHRyYWNlIGxpbmVzIGZvciBicmV2aXR5XG5jb25zdCBSRU1PVkFMX1BBVEhTID1cbiAgL15cXC8oPzpob21lLWFzc2lzdGFudFxcL2Zyb250ZW5kXFwvW14vXSt8dW5rbm93bnxcXC97Mn1cXC4pXFwvLztcbmNvbnN0IE1BWF9TVEFDS19GUkFNRVMgPSAxMDtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUxvZ01lc3NhZ2UgPSBhc3luYyAoXG4gIGVycm9yOiB1bmtub3duLFxuICBpbnRybz86IHN0cmluZyxcbiAgbWVzc2FnZUZhbGxiYWNrPzogc3RyaW5nLFxuICBzdGFja0ZhbGxiYWNrPzogc3RyaW5nXG4pID0+IHtcbiAgY29uc3QgbGluZXM6IChzdHJpbmcgfCB1bmRlZmluZWQpW10gPSBbXTtcbiAgLy8gQXBwZW5kIHRoZSBvcmlnaW5hdGluZyBicm93c2VyL09TIHRvIGFueSBpbnRybyBmb3IgZWFzaWVyIGlkZW50aWZpY2F0aW9uXG4gIGlmIChpbnRybykge1xuICAgIGNvbnN0IHBhcnNlciA9IG5ldyBVQVBhcnNlcigpO1xuICAgIGNvbnN0IHtcbiAgICAgIG5hbWU6IGJyb3dzZXJOYW1lID0gXCJ1bmtub3duIGJyb3dzZXJcIixcbiAgICAgIHZlcnNpb246IGJyb3dzZXJWZXJzaW9uID0gXCJcIixcbiAgICB9ID0gcGFyc2VyLmdldEJyb3dzZXIoKTtcbiAgICBjb25zdCB7IG5hbWU6IG9zTmFtZSA9IFwidW5rbm93biBPU1wiLCB2ZXJzaW9uOiBvc1ZlcnNpb24gPSBcIlwiIH0gPVxuICAgICAgcGFyc2VyLmdldE9TKCk7XG4gICAgY29uc3QgYnJvd3NlciA9IGAke2Jyb3dzZXJOYW1lfSAke2Jyb3dzZXJWZXJzaW9ufWAudHJpbSgpO1xuICAgIGNvbnN0IG9zID0gYCR7b3NOYW1lfSAke29zVmVyc2lvbn1gLnRyaW0oKTtcbiAgICBsaW5lcy5wdXNoKGAke2ludHJvfSBmcm9tICR7YnJvd3Nlcn0gb24gJHtvc31gKTtcbiAgfVxuICAvLyBJbiBtb3N0IGNhc2VzLCBhbiBFcnJvciBpbnN0YW5jZSB3aWxsIGJlIHRocm93biwgd2hpY2ggY2FuIGhhdmUgbWFueSBkZXRhaWxzIHRvIGxvZzpcbiAgLy8gLSBhIHN0YW5kYXJkIHN0cmluZyBjb2VyY2lvbiB0byBcIkVycm9yVHlwZTogTWVzc2FnZVwiXG4gIC8vIC0gYSBzdGFjayBhZGRlZCBieSBicm93c2VycyAod2hpY2ggbXVzdCBiZSBjb252ZXJ0ZWQgdG8gb3JpZ2luYWwgc291cmNlKVxuICAvLyAtIGFuIG9wdGlvbmFsIGNhdXNlIGNoYWluXG4gIC8vIC0gYSBwb3NzaWJsZSBsaXN0IG9mIGFnZ3JlZ2F0ZWQgZXJyb3JzXG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgbGluZXMucHVzaChlcnJvci50b1N0cmluZygpIHx8IG1lc3NhZ2VGYWxsYmFjayk7XG4gICAgY29uc3Qgc3RhY2tMaW5lcyA9IChhd2FpdCBmcm9tRXJyb3IoZXJyb3IpKVxuICAgICAgLnNsaWNlKDAsIE1BWF9TVEFDS19GUkFNRVMpXG4gICAgICAubWFwKChmcmFtZSkgPT4ge1xuICAgICAgICBmcmFtZS5maWxlTmFtZSA/Pz0gXCJcIjtcbiAgICAgICAgaWYgKFVSTC5jYW5QYXJzZShmcmFtZS5maWxlTmFtZSkpIHtcbiAgICAgICAgICBmcmFtZS5maWxlTmFtZSA9IG5ldyBVUkwoZnJhbWUuZmlsZU5hbWUpLnBhdGhuYW1lO1xuICAgICAgICB9XG4gICAgICAgIGZyYW1lLmZpbGVOYW1lID0gZnJhbWUuZmlsZU5hbWUucmVwbGFjZShSRU1PVkFMX1BBVEhTLCBcIlwiKTtcbiAgICAgICAgcmV0dXJuIGZyYW1lLnRvU3RyaW5nKCk7XG4gICAgICB9KTtcbiAgICBsaW5lcy5wdXNoKC4uLihzdGFja0xpbmVzLmxlbmd0aCA+IDAgPyBzdGFja0xpbmVzIDogW3N0YWNrRmFsbGJhY2tdKSk7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBSZXF1aXJlcyBsaWJyYXJ5IGJ1bXAgdG8gRVMyMDIyXG4gICAgaWYgKGVycm9yLmNhdXNlKSB7XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFJlcXVpcmVzIGxpYnJhcnkgYnVtcCB0byBFUzIwMjJcbiAgICAgIGxpbmVzLnB1c2goYENhdXNlZCBieTogJHthd2FpdCBjcmVhdGVMb2dNZXNzYWdlKGVycm9yLmNhdXNlKX1gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQWdncmVnYXRlRXJyb3IpIHtcbiAgICAgIGNvbnN0IHN1Yk1lc3NhZ2VFbnRyaWVzID0gZXJyb3IuZXJyb3JzLm1hcChcbiAgICAgICAgYXN5bmMgKGUsIGkpID0+IFtpLCBhd2FpdCBjcmVhdGVMb2dNZXNzYWdlKGUpXSBhcyBjb25zdFxuICAgICAgKTtcbiAgICAgIGZvciBhd2FpdCAoY29uc3QgW2ksIG1dIG9mIHN1Yk1lc3NhZ2VFbnRyaWVzKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYFBhcnQgJHtpICsgMX0gb2YgJHtlcnJvci5lcnJvcnMubGVuZ3RofTogJHttfWApO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBUaGUgZXJyb3IgY291bGQgYmUgYW55dGhpbmcsIHNvIGp1c3Qgc3RyaW5naWZ5IGl0IGFuZCBsb2cgd2l0aCBmYWxsYmFja3NcbiAgICBjb25zdCBlcnJvclN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGVycm9yLCBudWxsLCAyKTtcbiAgICBsaW5lcy5wdXNoKFxuICAgICAgbWVzc2FnZUZhbGxiYWNrLFxuICAgICAgZXJyb3JTdHJpbmcgPT09IG1lc3NhZ2VGYWxsYmFjayA/IFwiXCIgOiBlcnJvclN0cmluZyxcbiAgICAgIHN0YWNrRmFsbGJhY2tcbiAgICApO1xuICB9XG4gIHJldHVybiBsaW5lcy5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblwiKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/log-message.ts\n");

/***/ })

};
