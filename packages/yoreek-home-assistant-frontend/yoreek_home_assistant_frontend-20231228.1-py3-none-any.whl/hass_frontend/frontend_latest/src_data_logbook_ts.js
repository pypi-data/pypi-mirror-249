/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
export const id = "src_data_logbook_ts";
export const ids = ["src_data_logbook_ts"];
export const modules = {

/***/ "./src/common/translations/auto_case_noun.ts":
/*!***************************************************!*\
  !*** ./src/common/translations/auto_case_noun.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   autoCaseNoun: () => (/* binding */ autoCaseNoun),\n/* harmony export */   useCapitalizedNouns: () => (/* binding */ useCapitalizedNouns)\n/* harmony export */ });\n/* harmony import */ var _string_capitalize_first_letter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../string/capitalize-first-letter */ \"./src/common/string/capitalize-first-letter.ts\");\n// In a few languages nouns are always capitalized. This helper\n// indicates if for a given language that is the case.\n\n\nconst useCapitalizedNouns = language => {\n  switch (language) {\n    case \"de\":\n    case \"lb\":\n      return true;\n    default:\n      return false;\n  }\n};\nconst autoCaseNoun = (noun, language) => useCapitalizedNouns(language) ? (0,_string_capitalize_first_letter__WEBPACK_IMPORTED_MODULE_0__.capitalizeFirstLetter)(noun) : noun.toLocaleLowerCase(language);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3RyYW5zbGF0aW9ucy9hdXRvX2Nhc2Vfbm91bi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBOztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vdHJhbnNsYXRpb25zL2F1dG9fY2FzZV9ub3VuLnRzPzEyOGUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW4gYSBmZXcgbGFuZ3VhZ2VzIG5vdW5zIGFyZSBhbHdheXMgY2FwaXRhbGl6ZWQuIFRoaXMgaGVscGVyXG4vLyBpbmRpY2F0ZXMgaWYgZm9yIGEgZ2l2ZW4gbGFuZ3VhZ2UgdGhhdCBpcyB0aGUgY2FzZS5cblxuaW1wb3J0IHsgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIH0gZnJvbSBcIi4uL3N0cmluZy9jYXBpdGFsaXplLWZpcnN0LWxldHRlclwiO1xuXG5leHBvcnQgY29uc3QgdXNlQ2FwaXRhbGl6ZWROb3VucyA9IChsYW5ndWFnZTogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHN3aXRjaCAobGFuZ3VhZ2UpIHtcbiAgICBjYXNlIFwiZGVcIjpcbiAgICBjYXNlIFwibGJcIjpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBhdXRvQ2FzZU5vdW4gPSAobm91bjogc3RyaW5nLCBsYW5ndWFnZTogc3RyaW5nKTogc3RyaW5nID0+XG4gIHVzZUNhcGl0YWxpemVkTm91bnMobGFuZ3VhZ2UpXG4gICAgPyBjYXBpdGFsaXplRmlyc3RMZXR0ZXIobm91bilcbiAgICA6IG5vdW4udG9Mb2NhbGVMb3dlckNhc2UobGFuZ3VhZ2UpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/translations/auto_case_noun.ts\n");

/***/ }),

/***/ "./src/data/logbook.ts":
/*!*****************************!*\
  !*** ./src/data/logbook.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CONTINUOUS_DOMAINS: () => (/* binding */ CONTINUOUS_DOMAINS),\n/* harmony export */   createHistoricState: () => (/* binding */ createHistoricState),\n/* harmony export */   filterLogbookCompatibleEntities: () => (/* binding */ filterLogbookCompatibleEntities),\n/* harmony export */   getLogbookDataForContext: () => (/* binding */ getLogbookDataForContext),\n/* harmony export */   localizeStateMessage: () => (/* binding */ localizeStateMessage),\n/* harmony export */   localizeTriggerSource: () => (/* binding */ localizeTriggerSource),\n/* harmony export */   subscribeLogbook: () => (/* binding */ subscribeLogbook)\n/* harmony export */ });\n/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/const */ \"./src/common/const.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/entity/compute_state_domain */ \"./src/common/entity/compute_state_domain.ts\");\n/* harmony import */ var _common_translations_auto_case_noun__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/translations/auto_case_noun */ \"./src/common/translations/auto_case_noun.ts\");\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./entity */ \"./src/data/entity.ts\");\n\n\n\n\n\nconst LOGBOOK_LOCALIZE_PATH = \"ui.components.logbook.messages\";\nconst CONTINUOUS_DOMAINS = [\"counter\", \"proximity\", \"sensor\", \"zone\"];\n//\n// Localization mapping for all the triggers in core\n// in homeassistant.components.homeassistant.triggers\n//\nconst triggerPhrases = {\n  \"numeric state of\": \"triggered_by_numeric_state_of\",\n  // number state trigger\n  \"state of\": \"triggered_by_state_of\",\n  // state trigger\n  event: \"triggered_by_event\",\n  // event trigger\n  time: \"triggered_by_time\",\n  // time trigger\n  \"time pattern\": \"triggered_by_time_pattern\",\n  // time trigger\n  \"Home Assistant stopping\": \"triggered_by_homeassistant_stopping\",\n  // stop event\n  \"Home Assistant starting\": \"triggered_by_homeassistant_starting\" // start event\n};\nconst getLogbookDataForContext = async (hass, startDate, contextId) => getLogbookDataFromServer(hass, startDate, undefined, undefined, contextId);\nconst getLogbookDataFromServer = (hass, startDate, endDate, entityIds, contextId, deviceIds) => {\n  // If all specified filters are empty lists, we can return an empty list.\n  if ((entityIds || deviceIds) && (!entityIds || entityIds.length === 0) && (!deviceIds || deviceIds.length === 0)) {\n    return Promise.resolve([]);\n  }\n  const params = {\n    type: \"logbook/get_events\",\n    start_time: startDate\n  };\n  if (endDate) {\n    params.end_time = endDate;\n  }\n  if (entityIds !== null && entityIds !== void 0 && entityIds.length) {\n    params.entity_ids = entityIds;\n  }\n  if (deviceIds !== null && deviceIds !== void 0 && deviceIds.length) {\n    params.device_ids = deviceIds;\n  }\n  if (contextId) {\n    params.context_id = contextId;\n  }\n  return hass.callWS(params);\n};\nconst subscribeLogbook = (hass, callbackFunction, startDate, endDate, entityIds, deviceIds) => {\n  // If all specified filters are empty lists, we can return an empty list.\n  if ((entityIds || deviceIds) && (!entityIds || entityIds.length === 0) && (!deviceIds || deviceIds.length === 0)) {\n    return Promise.reject(\"No entities or devices\");\n  }\n  const params = {\n    type: \"logbook/event_stream\",\n    start_time: startDate,\n    end_time: endDate\n  };\n  if (entityIds !== null && entityIds !== void 0 && entityIds.length) {\n    params.entity_ids = entityIds;\n  }\n  if (deviceIds !== null && deviceIds !== void 0 && deviceIds.length) {\n    params.device_ids = deviceIds;\n  }\n  return hass.connection.subscribeMessage(message => callbackFunction(message), params);\n};\nconst createHistoricState = (currentStateObj, state) => ({\n  entity_id: currentStateObj.entity_id,\n  state: state,\n  attributes: {\n    // Rebuild the historical state by copying static attributes only\n    device_class: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.device_class,\n    source_type: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.source_type,\n    has_date: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.has_date,\n    has_time: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.has_time,\n    // We do not want to use dynamic entity pictures (e.g., from media player) for the log book rendering,\n    // as they would present a false state in the log (played media right now vs actual historic data).\n    entity_picture_local: _common_const__WEBPACK_IMPORTED_MODULE_0__.DOMAINS_WITH_DYNAMIC_PICTURE.has((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__.computeDomain)(currentStateObj.entity_id)) ? undefined : currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.entity_picture_local,\n    entity_picture: _common_const__WEBPACK_IMPORTED_MODULE_0__.DOMAINS_WITH_DYNAMIC_PICTURE.has((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__.computeDomain)(currentStateObj.entity_id)) ? undefined : currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.entity_picture\n  }\n});\nconst localizeTriggerSource = (localize, source) => {\n  for (const triggerPhrase in triggerPhrases) {\n    if (source.startsWith(triggerPhrase)) {\n      return source.replace(triggerPhrase, `${localize(`ui.components.logbook.${triggerPhrases[triggerPhrase]}`)}`);\n    }\n  }\n  return source;\n};\nconst localizeStateMessage = (hass, localize, state, stateObj, domain) => {\n  switch (domain) {\n    case \"device_tracker\":\n    case \"person\":\n      if (state === \"not_home\") {\n        return localize(`${LOGBOOK_LOCALIZE_PATH}.was_away`);\n      }\n      if (state === \"home\") {\n        return localize(`${LOGBOOK_LOCALIZE_PATH}.was_at_home`);\n      }\n      return localize(`${LOGBOOK_LOCALIZE_PATH}.was_at_state`, {\n        state\n      });\n    case \"sun\":\n      return state === \"above_horizon\" ? localize(`${LOGBOOK_LOCALIZE_PATH}.rose`) : localize(`${LOGBOOK_LOCALIZE_PATH}.set`);\n    case \"binary_sensor\":\n      {\n        const isOn = state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_ON;\n        const isOff = state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_OFF;\n        const device_class = stateObj.attributes.device_class;\n        switch (device_class) {\n          case \"battery\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_low`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_normal`);\n            }\n            break;\n          case \"connectivity\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_connected`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_disconnected`);\n            }\n            break;\n          case \"door\":\n          case \"garage_door\":\n          case \"opening\":\n          case \"window\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_opened`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_closed`);\n            }\n            break;\n          case \"lock\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_unlocked`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_locked`);\n            }\n            break;\n          case \"plug\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_plugged_in`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_unplugged`);\n            }\n            break;\n          case \"presence\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_at_home`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_away`);\n            }\n            break;\n          case \"safety\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_unsafe`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_safe`);\n            }\n            break;\n          case \"cold\":\n          case \"gas\":\n          case \"heat\":\n          case \"moisture\":\n          case \"motion\":\n          case \"occupancy\":\n          case \"power\":\n          case \"problem\":\n          case \"smoke\":\n          case \"sound\":\n          case \"vibration\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.detected_device_class`, {\n                device_class: (0,_common_translations_auto_case_noun__WEBPACK_IMPORTED_MODULE_3__.autoCaseNoun)(localize(`component.binary_sensor.entity_component.${device_class}.name`), hass.language)\n              });\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.cleared_device_class`, {\n                device_class: (0,_common_translations_auto_case_noun__WEBPACK_IMPORTED_MODULE_3__.autoCaseNoun)(localize(`component.binary_sensor.entity_component.${device_class}.name`), hass.language)\n              });\n            }\n            break;\n          case \"tamper\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.detected_tampering`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.cleared_tampering`);\n            }\n            break;\n        }\n        break;\n      }\n    case \"cover\":\n      switch (state) {\n        case \"open\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.was_opened`);\n        case \"opening\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_opening`);\n        case \"closing\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_closing`);\n        case \"closed\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.was_closed`);\n      }\n      break;\n    case \"event\":\n      {\n        var _hass$formatEntityAtt;\n        return localize(`${LOGBOOK_LOCALIZE_PATH}.detected_event_no_type`);\n\n        // TODO: This is not working yet, as we don't get historic attribute values\n\n        const event_type = (_hass$formatEntityAtt = hass.formatEntityAttributeValue(stateObj, \"event_type\")) === null || _hass$formatEntityAtt === void 0 ? void 0 : _hass$formatEntityAtt.toString();\n        if (!event_type) {\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.detected_unknown_event`);\n        }\n        return localize(`${LOGBOOK_LOCALIZE_PATH}.detected_event`, {\n          event_type: (0,_common_translations_auto_case_noun__WEBPACK_IMPORTED_MODULE_3__.autoCaseNoun)(event_type, hass.language)\n        });\n      }\n    case \"lock\":\n      switch (state) {\n        case \"unlocked\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.was_unlocked`);\n        case \"locking\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_locking`);\n        case \"unlocking\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_unlocking`);\n        case \"locked\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.was_locked`);\n        case \"jammed\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_jammed`);\n      }\n      break;\n  }\n  if (state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_ON) {\n    return localize(`${LOGBOOK_LOCALIZE_PATH}.turned_on`);\n  }\n  if (state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_OFF) {\n    return localize(`${LOGBOOK_LOCALIZE_PATH}.turned_off`);\n  }\n  if (state === _entity__WEBPACK_IMPORTED_MODULE_4__.UNKNOWN) {\n    return localize(`${LOGBOOK_LOCALIZE_PATH}.became_unknown`);\n  }\n  if (state === _entity__WEBPACK_IMPORTED_MODULE_4__.UNAVAILABLE) {\n    return localize(`${LOGBOOK_LOCALIZE_PATH}.became_unavailable`);\n  }\n  return hass.localize(`${LOGBOOK_LOCALIZE_PATH}.changed_to_state`, {\n    state: stateObj ? hass.formatEntityState(stateObj, state) : state\n  });\n};\nconst filterLogbookCompatibleEntities = entity => (0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_2__.computeStateDomain)(entity) !== \"sensor\" || entity.attributes.unit_of_measurement === undefined && entity.attributes.state_class === undefined;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9sb2dib29rLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBS0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBaUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQVFBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFRQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFLQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTs7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2RhdGEvbG9nYm9vay50cz82MjhhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhhc3NFbnRpdHkgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQge1xuICBCSU5BUllfU1RBVEVfT0ZGLFxuICBCSU5BUllfU1RBVEVfT04sXG4gIERPTUFJTlNfV0lUSF9EWU5BTUlDX1BJQ1RVUkUsXG59IGZyb20gXCIuLi9jb21tb24vY29uc3RcIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRG9tYWluIH0gZnJvbSBcIi4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kb21haW5cIjtcbmltcG9ydCB7IGF1dG9DYXNlTm91biB9IGZyb20gXCIuLi9jb21tb24vdHJhbnNsYXRpb25zL2F1dG9fY2FzZV9ub3VuXCI7XG5pbXBvcnQgeyBMb2NhbGl6ZUZ1bmMgfSBmcm9tIFwiLi4vY29tbW9uL3RyYW5zbGF0aW9ucy9sb2NhbGl6ZVwiO1xuaW1wb3J0IHsgSGFFbnRpdHlQaWNrZXJFbnRpdHlGaWx0ZXJGdW5jIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZW50aXR5L2hhLWVudGl0eS1waWNrZXJcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IFVOQVZBSUxBQkxFLCBVTktOT1dOIH0gZnJvbSBcIi4vZW50aXR5XCI7XG5cbmNvbnN0IExPR0JPT0tfTE9DQUxJWkVfUEFUSCA9IFwidWkuY29tcG9uZW50cy5sb2dib29rLm1lc3NhZ2VzXCI7XG5leHBvcnQgY29uc3QgQ09OVElOVU9VU19ET01BSU5TID0gW1wiY291bnRlclwiLCBcInByb3hpbWl0eVwiLCBcInNlbnNvclwiLCBcInpvbmVcIl07XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9nYm9va1N0cmVhbU1lc3NhZ2Uge1xuICBldmVudHM6IExvZ2Jvb2tFbnRyeVtdO1xuICBzdGFydF90aW1lPzogbnVtYmVyOyAvLyBTdGFydCB0aW1lIG9mIHRoaXMgaGlzdG9yaWNhbCBjaHVua1xuICBlbmRfdGltZT86IG51bWJlcjsgLy8gRW5kIHRpbWUgb2YgdGhpcyBoaXN0b3JpY2FsIGNodW5rXG4gIHBhcnRpYWw/OiBib29sZWFuOyAvLyBJbmRpY2lhdGVzIG1vcmUgaGlzdG9yaWNhbCBjaHVua3MgYXJlIGNvbWluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvZ2Jvb2tFbnRyeSB7XG4gIC8vIEJhc2UgZGF0YVxuICB3aGVuOiBudW1iZXI7IC8vIFB5dGhvbiB0aW1lc3RhbXAuIERvICoxMDAwIHRvIGdldCBKUyB0aW1lc3RhbXAuXG4gIG5hbWU6IHN0cmluZztcbiAgbWVzc2FnZT86IHN0cmluZztcbiAgZW50aXR5X2lkPzogc3RyaW5nO1xuICBpY29uPzogc3RyaW5nO1xuICBzb3VyY2U/OiBzdHJpbmc7IC8vIFRoZSB0cmlnZ2VyIHNvdXJjZVxuICBkb21haW4/OiBzdHJpbmc7XG4gIHN0YXRlPzogc3RyaW5nOyAvLyBUaGUgc3RhdGUgb2YgdGhlIGVudGl0eVxuICAvLyBDb250ZXh0IGRhdGFcbiAgY29udGV4dF9pZD86IHN0cmluZztcbiAgY29udGV4dF91c2VyX2lkPzogc3RyaW5nO1xuICBjb250ZXh0X2V2ZW50X3R5cGU/OiBzdHJpbmc7XG4gIGNvbnRleHRfZG9tYWluPzogc3RyaW5nO1xuICBjb250ZXh0X3NlcnZpY2U/OiBzdHJpbmc7IC8vIFNlcnZpY2UgY2FsbHMgb25seVxuICBjb250ZXh0X2VudGl0eV9pZD86IHN0cmluZztcbiAgY29udGV4dF9lbnRpdHlfaWRfbmFtZT86IHN0cmluZzsgLy8gTGVnYWN5LCBub3QgbG9uZ2VyIHNlbnRcbiAgY29udGV4dF9uYW1lPzogc3RyaW5nO1xuICBjb250ZXh0X3N0YXRlPzogc3RyaW5nOyAvLyBUaGUgc3RhdGUgb2YgdGhlIGVudGl0eVxuICBjb250ZXh0X3NvdXJjZT86IHN0cmluZzsgLy8gVGhlIHRyaWdnZXIgc291cmNlXG4gIGNvbnRleHRfbWVzc2FnZT86IHN0cmluZztcbn1cblxuLy9cbi8vIExvY2FsaXphdGlvbiBtYXBwaW5nIGZvciBhbGwgdGhlIHRyaWdnZXJzIGluIGNvcmVcbi8vIGluIGhvbWVhc3Npc3RhbnQuY29tcG9uZW50cy5ob21lYXNzaXN0YW50LnRyaWdnZXJzXG4vL1xuY29uc3QgdHJpZ2dlclBocmFzZXMgPSB7XG4gIFwibnVtZXJpYyBzdGF0ZSBvZlwiOiBcInRyaWdnZXJlZF9ieV9udW1lcmljX3N0YXRlX29mXCIsIC8vIG51bWJlciBzdGF0ZSB0cmlnZ2VyXG4gIFwic3RhdGUgb2ZcIjogXCJ0cmlnZ2VyZWRfYnlfc3RhdGVfb2ZcIiwgLy8gc3RhdGUgdHJpZ2dlclxuICBldmVudDogXCJ0cmlnZ2VyZWRfYnlfZXZlbnRcIiwgLy8gZXZlbnQgdHJpZ2dlclxuICB0aW1lOiBcInRyaWdnZXJlZF9ieV90aW1lXCIsIC8vIHRpbWUgdHJpZ2dlclxuICBcInRpbWUgcGF0dGVyblwiOiBcInRyaWdnZXJlZF9ieV90aW1lX3BhdHRlcm5cIiwgLy8gdGltZSB0cmlnZ2VyXG4gIFwiSG9tZSBBc3Npc3RhbnQgc3RvcHBpbmdcIjogXCJ0cmlnZ2VyZWRfYnlfaG9tZWFzc2lzdGFudF9zdG9wcGluZ1wiLCAvLyBzdG9wIGV2ZW50XG4gIFwiSG9tZSBBc3Npc3RhbnQgc3RhcnRpbmdcIjogXCJ0cmlnZ2VyZWRfYnlfaG9tZWFzc2lzdGFudF9zdGFydGluZ1wiLCAvLyBzdGFydCBldmVudFxufTtcblxuZXhwb3J0IGNvbnN0IGdldExvZ2Jvb2tEYXRhRm9yQ29udGV4dCA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGNvbnRleHRJZD86IHN0cmluZ1xuKTogUHJvbWlzZTxMb2dib29rRW50cnlbXT4gPT5cbiAgZ2V0TG9nYm9va0RhdGFGcm9tU2VydmVyKGhhc3MsIHN0YXJ0RGF0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbnRleHRJZCk7XG5cbmNvbnN0IGdldExvZ2Jvb2tEYXRhRnJvbVNlcnZlciA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU/OiBzdHJpbmcsXG4gIGVudGl0eUlkcz86IHN0cmluZ1tdLFxuICBjb250ZXh0SWQ/OiBzdHJpbmcsXG4gIGRldmljZUlkcz86IHN0cmluZ1tdXG4pOiBQcm9taXNlPExvZ2Jvb2tFbnRyeVtdPiA9PiB7XG4gIC8vIElmIGFsbCBzcGVjaWZpZWQgZmlsdGVycyBhcmUgZW1wdHkgbGlzdHMsIHdlIGNhbiByZXR1cm4gYW4gZW1wdHkgbGlzdC5cbiAgaWYgKFxuICAgIChlbnRpdHlJZHMgfHwgZGV2aWNlSWRzKSAmJlxuICAgICghZW50aXR5SWRzIHx8IGVudGl0eUlkcy5sZW5ndGggPT09IDApICYmXG4gICAgKCFkZXZpY2VJZHMgfHwgZGV2aWNlSWRzLmxlbmd0aCA9PT0gMClcbiAgKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gIH1cblxuICBjb25zdCBwYXJhbXM6IGFueSA9IHtcbiAgICB0eXBlOiBcImxvZ2Jvb2svZ2V0X2V2ZW50c1wiLFxuICAgIHN0YXJ0X3RpbWU6IHN0YXJ0RGF0ZSxcbiAgfTtcbiAgaWYgKGVuZERhdGUpIHtcbiAgICBwYXJhbXMuZW5kX3RpbWUgPSBlbmREYXRlO1xuICB9XG4gIGlmIChlbnRpdHlJZHM/Lmxlbmd0aCkge1xuICAgIHBhcmFtcy5lbnRpdHlfaWRzID0gZW50aXR5SWRzO1xuICB9XG4gIGlmIChkZXZpY2VJZHM/Lmxlbmd0aCkge1xuICAgIHBhcmFtcy5kZXZpY2VfaWRzID0gZGV2aWNlSWRzO1xuICB9XG4gIGlmIChjb250ZXh0SWQpIHtcbiAgICBwYXJhbXMuY29udGV4dF9pZCA9IGNvbnRleHRJZDtcbiAgfVxuICByZXR1cm4gaGFzcy5jYWxsV1M8TG9nYm9va0VudHJ5W10+KHBhcmFtcyk7XG59O1xuXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlTG9nYm9vayA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgY2FsbGJhY2tGdW5jdGlvbjogKG1lc3NhZ2U6IExvZ2Jvb2tTdHJlYW1NZXNzYWdlKSA9PiB2b2lkLFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgZW5kRGF0ZTogc3RyaW5nLFxuICBlbnRpdHlJZHM/OiBzdHJpbmdbXSxcbiAgZGV2aWNlSWRzPzogc3RyaW5nW11cbik6IFByb21pc2U8KCkgPT4gUHJvbWlzZTx2b2lkPj4gPT4ge1xuICAvLyBJZiBhbGwgc3BlY2lmaWVkIGZpbHRlcnMgYXJlIGVtcHR5IGxpc3RzLCB3ZSBjYW4gcmV0dXJuIGFuIGVtcHR5IGxpc3QuXG4gIGlmIChcbiAgICAoZW50aXR5SWRzIHx8IGRldmljZUlkcykgJiZcbiAgICAoIWVudGl0eUlkcyB8fCBlbnRpdHlJZHMubGVuZ3RoID09PSAwKSAmJlxuICAgICghZGV2aWNlSWRzIHx8IGRldmljZUlkcy5sZW5ndGggPT09IDApXG4gICkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIk5vIGVudGl0aWVzIG9yIGRldmljZXNcIik7XG4gIH1cbiAgY29uc3QgcGFyYW1zOiBhbnkgPSB7XG4gICAgdHlwZTogXCJsb2dib29rL2V2ZW50X3N0cmVhbVwiLFxuICAgIHN0YXJ0X3RpbWU6IHN0YXJ0RGF0ZSxcbiAgICBlbmRfdGltZTogZW5kRGF0ZSxcbiAgfTtcbiAgaWYgKGVudGl0eUlkcz8ubGVuZ3RoKSB7XG4gICAgcGFyYW1zLmVudGl0eV9pZHMgPSBlbnRpdHlJZHM7XG4gIH1cbiAgaWYgKGRldmljZUlkcz8ubGVuZ3RoKSB7XG4gICAgcGFyYW1zLmRldmljZV9pZHMgPSBkZXZpY2VJZHM7XG4gIH1cbiAgcmV0dXJuIGhhc3MuY29ubmVjdGlvbi5zdWJzY3JpYmVNZXNzYWdlPExvZ2Jvb2tTdHJlYW1NZXNzYWdlPihcbiAgICAobWVzc2FnZSkgPT4gY2FsbGJhY2tGdW5jdGlvbihtZXNzYWdlKSxcbiAgICBwYXJhbXNcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVIaXN0b3JpY1N0YXRlID0gKFxuICBjdXJyZW50U3RhdGVPYmo6IEhhc3NFbnRpdHksXG4gIHN0YXRlPzogc3RyaW5nXG4pOiBIYXNzRW50aXR5ID0+IDxIYXNzRW50aXR5Pig8dW5rbm93bj57XG4gICAgZW50aXR5X2lkOiBjdXJyZW50U3RhdGVPYmouZW50aXR5X2lkLFxuICAgIHN0YXRlOiBzdGF0ZSxcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAvLyBSZWJ1aWxkIHRoZSBoaXN0b3JpY2FsIHN0YXRlIGJ5IGNvcHlpbmcgc3RhdGljIGF0dHJpYnV0ZXMgb25seVxuICAgICAgZGV2aWNlX2NsYXNzOiBjdXJyZW50U3RhdGVPYmo/LmF0dHJpYnV0ZXMuZGV2aWNlX2NsYXNzLFxuICAgICAgc291cmNlX3R5cGU6IGN1cnJlbnRTdGF0ZU9iaj8uYXR0cmlidXRlcy5zb3VyY2VfdHlwZSxcbiAgICAgIGhhc19kYXRlOiBjdXJyZW50U3RhdGVPYmo/LmF0dHJpYnV0ZXMuaGFzX2RhdGUsXG4gICAgICBoYXNfdGltZTogY3VycmVudFN0YXRlT2JqPy5hdHRyaWJ1dGVzLmhhc190aW1lLFxuICAgICAgLy8gV2UgZG8gbm90IHdhbnQgdG8gdXNlIGR5bmFtaWMgZW50aXR5IHBpY3R1cmVzIChlLmcuLCBmcm9tIG1lZGlhIHBsYXllcikgZm9yIHRoZSBsb2cgYm9vayByZW5kZXJpbmcsXG4gICAgICAvLyBhcyB0aGV5IHdvdWxkIHByZXNlbnQgYSBmYWxzZSBzdGF0ZSBpbiB0aGUgbG9nIChwbGF5ZWQgbWVkaWEgcmlnaHQgbm93IHZzIGFjdHVhbCBoaXN0b3JpYyBkYXRhKS5cbiAgICAgIGVudGl0eV9waWN0dXJlX2xvY2FsOiBET01BSU5TX1dJVEhfRFlOQU1JQ19QSUNUVVJFLmhhcyhcbiAgICAgICAgY29tcHV0ZURvbWFpbihjdXJyZW50U3RhdGVPYmouZW50aXR5X2lkKVxuICAgICAgKVxuICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICA6IGN1cnJlbnRTdGF0ZU9iaj8uYXR0cmlidXRlcy5lbnRpdHlfcGljdHVyZV9sb2NhbCxcbiAgICAgIGVudGl0eV9waWN0dXJlOiBET01BSU5TX1dJVEhfRFlOQU1JQ19QSUNUVVJFLmhhcyhcbiAgICAgICAgY29tcHV0ZURvbWFpbihjdXJyZW50U3RhdGVPYmouZW50aXR5X2lkKVxuICAgICAgKVxuICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICA6IGN1cnJlbnRTdGF0ZU9iaj8uYXR0cmlidXRlcy5lbnRpdHlfcGljdHVyZSxcbiAgICB9LFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGxvY2FsaXplVHJpZ2dlclNvdXJjZSA9IChcbiAgbG9jYWxpemU6IExvY2FsaXplRnVuYyxcbiAgc291cmNlOiBzdHJpbmdcbikgPT4ge1xuICBmb3IgKGNvbnN0IHRyaWdnZXJQaHJhc2UgaW4gdHJpZ2dlclBocmFzZXMpIHtcbiAgICBpZiAoc291cmNlLnN0YXJ0c1dpdGgodHJpZ2dlclBocmFzZSkpIHtcbiAgICAgIHJldHVybiBzb3VyY2UucmVwbGFjZShcbiAgICAgICAgdHJpZ2dlclBocmFzZSxcbiAgICAgICAgYCR7bG9jYWxpemUoYHVpLmNvbXBvbmVudHMubG9nYm9vay4ke3RyaWdnZXJQaHJhc2VzW3RyaWdnZXJQaHJhc2VdfWApfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzb3VyY2U7XG59O1xuXG5leHBvcnQgY29uc3QgbG9jYWxpemVTdGF0ZU1lc3NhZ2UgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGxvY2FsaXplOiBMb2NhbGl6ZUZ1bmMsXG4gIHN0YXRlOiBzdHJpbmcsXG4gIHN0YXRlT2JqOiBIYXNzRW50aXR5LFxuICBkb21haW46IHN0cmluZ1xuKTogc3RyaW5nID0+IHtcbiAgc3dpdGNoIChkb21haW4pIHtcbiAgICBjYXNlIFwiZGV2aWNlX3RyYWNrZXJcIjpcbiAgICBjYXNlIFwicGVyc29uXCI6XG4gICAgICBpZiAoc3RhdGUgPT09IFwibm90X2hvbWVcIikge1xuICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfYXdheWApO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlID09PSBcImhvbWVcIikge1xuICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfYXRfaG9tZWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2F0X3N0YXRlYCwgeyBzdGF0ZSB9KTtcblxuICAgIGNhc2UgXCJzdW5cIjpcbiAgICAgIHJldHVybiBzdGF0ZSA9PT0gXCJhYm92ZV9ob3Jpem9uXCJcbiAgICAgICAgPyBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LnJvc2VgKVxuICAgICAgICA6IGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uc2V0YCk7XG5cbiAgICBjYXNlIFwiYmluYXJ5X3NlbnNvclwiOiB7XG4gICAgICBjb25zdCBpc09uID0gc3RhdGUgPT09IEJJTkFSWV9TVEFURV9PTjtcbiAgICAgIGNvbnN0IGlzT2ZmID0gc3RhdGUgPT09IEJJTkFSWV9TVEFURV9PRkY7XG4gICAgICBjb25zdCBkZXZpY2VfY2xhc3MgPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLmRldmljZV9jbGFzcztcblxuICAgICAgc3dpdGNoIChkZXZpY2VfY2xhc3MpIHtcbiAgICAgICAgY2FzZSBcImJhdHRlcnlcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2xvd2ApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19ub3JtYWxgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcImNvbm5lY3Rpdml0eVwiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfY29ubmVjdGVkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2Rpc2Nvbm5lY3RlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiZG9vclwiOlxuICAgICAgICBjYXNlIFwiZ2FyYWdlX2Rvb3JcIjpcbiAgICAgICAgY2FzZSBcIm9wZW5pbmdcIjpcbiAgICAgICAgY2FzZSBcIndpbmRvd1wiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfb3BlbmVkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2Nsb3NlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwibG9ja1wiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfdW5sb2NrZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfbG9ja2VkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJwbHVnXCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19wbHVnZ2VkX2luYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX3VucGx1Z2dlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwicHJlc2VuY2VcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2F0X2hvbWVgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfYXdheWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwic2FmZXR5XCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc191bnNhZmVgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfc2FmZWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiY29sZFwiOlxuICAgICAgICBjYXNlIFwiZ2FzXCI6XG4gICAgICAgIGNhc2UgXCJoZWF0XCI6XG4gICAgICAgIGNhc2UgXCJtb2lzdHVyZVwiOlxuICAgICAgICBjYXNlIFwibW90aW9uXCI6XG4gICAgICAgIGNhc2UgXCJvY2N1cGFuY3lcIjpcbiAgICAgICAgY2FzZSBcInBvd2VyXCI6XG4gICAgICAgIGNhc2UgXCJwcm9ibGVtXCI6XG4gICAgICAgIGNhc2UgXCJzbW9rZVwiOlxuICAgICAgICBjYXNlIFwic291bmRcIjpcbiAgICAgICAgY2FzZSBcInZpYnJhdGlvblwiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5kZXRlY3RlZF9kZXZpY2VfY2xhc3NgLCB7XG4gICAgICAgICAgICAgIGRldmljZV9jbGFzczogYXV0b0Nhc2VOb3VuKFxuICAgICAgICAgICAgICAgIGxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgYGNvbXBvbmVudC5iaW5hcnlfc2Vuc29yLmVudGl0eV9jb21wb25lbnQuJHtkZXZpY2VfY2xhc3N9Lm5hbWVgXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBoYXNzLmxhbmd1YWdlXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5jbGVhcmVkX2RldmljZV9jbGFzc2AsIHtcbiAgICAgICAgICAgICAgZGV2aWNlX2NsYXNzOiBhdXRvQ2FzZU5vdW4oXG4gICAgICAgICAgICAgICAgbG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICBgY29tcG9uZW50LmJpbmFyeV9zZW5zb3IuZW50aXR5X2NvbXBvbmVudC4ke2RldmljZV9jbGFzc30ubmFtZWBcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGhhc3MubGFuZ3VhZ2VcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwidGFtcGVyXCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmRldGVjdGVkX3RhbXBlcmluZ2ApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmNsZWFyZWRfdGFtcGVyaW5nYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlIFwiY292ZXJcIjpcbiAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgY2FzZSBcIm9wZW5cIjpcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfb3BlbmVkYCk7XG4gICAgICAgIGNhc2UgXCJvcGVuaW5nXCI6XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uaXNfb3BlbmluZ2ApO1xuICAgICAgICBjYXNlIFwiY2xvc2luZ1wiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmlzX2Nsb3NpbmdgKTtcbiAgICAgICAgY2FzZSBcImNsb3NlZFwiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19jbG9zZWRgKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcImV2ZW50XCI6IHtcbiAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmRldGVjdGVkX2V2ZW50X25vX3R5cGVgKTtcblxuICAgICAgLy8gVE9ETzogVGhpcyBpcyBub3Qgd29ya2luZyB5ZXQsIGFzIHdlIGRvbid0IGdldCBoaXN0b3JpYyBhdHRyaWJ1dGUgdmFsdWVzXG5cbiAgICAgIGNvbnN0IGV2ZW50X3R5cGUgPSBoYXNzXG4gICAgICAgIC5mb3JtYXRFbnRpdHlBdHRyaWJ1dGVWYWx1ZShzdGF0ZU9iaiwgXCJldmVudF90eXBlXCIpXG4gICAgICAgID8udG9TdHJpbmcoKTtcblxuICAgICAgaWYgKCFldmVudF90eXBlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmRldGVjdGVkX3Vua25vd25fZXZlbnRgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uZGV0ZWN0ZWRfZXZlbnRgLCB7XG4gICAgICAgIGV2ZW50X3R5cGU6IGF1dG9DYXNlTm91bihldmVudF90eXBlLCBoYXNzLmxhbmd1YWdlKSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNhc2UgXCJsb2NrXCI6XG4gICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgIGNhc2UgXCJ1bmxvY2tlZFwiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc191bmxvY2tlZGApO1xuICAgICAgICBjYXNlIFwibG9ja2luZ1wiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmlzX2xvY2tpbmdgKTtcbiAgICAgICAgY2FzZSBcInVubG9ja2luZ1wiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmlzX3VubG9ja2luZ2ApO1xuICAgICAgICBjYXNlIFwibG9ja2VkXCI6XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2xvY2tlZGApO1xuICAgICAgICBjYXNlIFwiamFtbWVkXCI6XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uaXNfamFtbWVkYCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGlmIChzdGF0ZSA9PT0gQklOQVJZX1NUQVRFX09OKSB7XG4gICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0udHVybmVkX29uYCk7XG4gIH1cblxuICBpZiAoc3RhdGUgPT09IEJJTkFSWV9TVEFURV9PRkYpIHtcbiAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS50dXJuZWRfb2ZmYCk7XG4gIH1cblxuICBpZiAoc3RhdGUgPT09IFVOS05PV04pIHtcbiAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5iZWNhbWVfdW5rbm93bmApO1xuICB9XG5cbiAgaWYgKHN0YXRlID09PSBVTkFWQUlMQUJMRSkge1xuICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmJlY2FtZV91bmF2YWlsYWJsZWApO1xuICB9XG5cbiAgcmV0dXJuIGhhc3MubG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5jaGFuZ2VkX3RvX3N0YXRlYCwge1xuICAgIHN0YXRlOiBzdGF0ZU9iaiA/IGhhc3MuZm9ybWF0RW50aXR5U3RhdGUoc3RhdGVPYmosIHN0YXRlKSA6IHN0YXRlLFxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaWx0ZXJMb2dib29rQ29tcGF0aWJsZUVudGl0aWVzOiBIYUVudGl0eVBpY2tlckVudGl0eUZpbHRlckZ1bmMgPSAoXG4gIGVudGl0eVxuKSA9PlxuICBjb21wdXRlU3RhdGVEb21haW4oZW50aXR5KSAhPT0gXCJzZW5zb3JcIiB8fFxuICAoZW50aXR5LmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudCA9PT0gdW5kZWZpbmVkICYmXG4gICAgZW50aXR5LmF0dHJpYnV0ZXMuc3RhdGVfY2xhc3MgPT09IHVuZGVmaW5lZCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/logbook.ts\n");

/***/ })

};
