/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
export const id = "src_components_chart_statistics-chart_ts-src_util_documentation-url_ts";
export const ids = ["src_components_chart_statistics-chart_ts-src_util_documentation-url_ts"];
export const modules = {

/***/ "./src/components/chart/statistics-chart.ts":
/*!**************************************************!*\
  !*** ./src/components/chart/statistics-chart.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StatisticsChart: () => (/* binding */ StatisticsChart),\n/* harmony export */   supportedStatTypeMap: () => (/* binding */ supportedStatTypeMap)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var memoize_one__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! memoize-one */ \"./node_modules/memoize-one/dist/memoize-one.esm.js\");\n/* harmony import */ var _common_color_colors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/color/colors */ \"./src/common/color/colors.ts\");\n/* harmony import */ var _common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/config/is_component_loaded */ \"./src/common/config/is_component_loaded.ts\");\n/* harmony import */ var _common_number_format_number__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/number/format_number */ \"./src/common/number/format_number.ts\");\n/* harmony import */ var _data_recorder__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../data/recorder */ \"./src/data/recorder.ts\");\n/* harmony import */ var _ha_chart_base__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ha-chart-base */ \"./src/components/chart/ha-chart-base.ts\");\n\n\n\n\n\n\n\n\n\nconst supportedStatTypeMap = {\n  mean: \"mean\",\n  min: \"min\",\n  max: \"max\",\n  sum: \"sum\",\n  state: \"sum\",\n  change: \"sum\"\n};\nlet StatisticsChart = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.customElement)(\"statistics-chart\")], function (_initialize, _LitElement) {\n  class StatisticsChart extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: StatisticsChart,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"statisticsData\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"metadata\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"names\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"unit\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"endTime\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Array\n      })],\n      key: \"statTypes\",\n      value() {\n        return [\"sum\", \"min\", \"mean\", \"max\"];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"chartType\",\n      value() {\n        return \"line\";\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean\n      })],\n      key: \"hideLegend\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean\n      })],\n      key: \"logarithmicScale\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean\n      })],\n      key: \"isLoadingData\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"period\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_chartData\",\n      value() {\n        return {\n          datasets: []\n        };\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_statisticIds\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_chartOptions\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.query)(\"ha-chart-base\")],\n      key: \"_chart\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_computedStyle\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"resize\",\n      value() {\n        return options => {\n          var _this$_chart;\n          (_this$_chart = this._chart) === null || _this$_chart === void 0 || _this$_chart.resize(options);\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        return changedProps.size > 1 || !changedProps.has(\"hass\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        if (!this.hasUpdated || changedProps.has(\"unit\") || changedProps.has(\"period\") || changedProps.has(\"chartType\") || changedProps.has(\"logarithmicScale\") || changedProps.has(\"hideLegend\")) {\n          this._createOptions();\n        }\n        if (changedProps.has(\"statisticsData\") || changedProps.has(\"statTypes\") || changedProps.has(\"chartType\") || changedProps.has(\"hideLegend\")) {\n          this._generateData();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated() {\n        this._computedStyle = getComputedStyle(this);\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!(0,_common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_4__.isComponentLoaded)(this.hass, \"history\")) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<div class=\"info\">\n        ${this.hass.localize(\"ui.components.history_charts.history_disabled\")}\n      </div>`;\n        }\n        if (this.isLoadingData && !this.statisticsData) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<div class=\"info\">\n        ${this.hass.localize(\"ui.components.statistics_charts.loading_statistics\")}\n      </div>`;\n        }\n        if (!this.statisticsData || !Object.keys(this.statisticsData).length) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<div class=\"info\">\n        ${this.hass.localize(\"ui.components.statistics_charts.no_statistics_found\")}\n      </div>`;\n        }\n        return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`\n      <ha-chart-base\n        .hass=${this.hass}\n        .data=${this._chartData}\n        .options=${this._chartOptions}\n        .chartType=${this.chartType}\n      ></ha-chart-base>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_createOptions\",\n      value: function _createOptions(unit) {\n        this._chartOptions = {\n          parsing: false,\n          animation: false,\n          interaction: {\n            mode: \"nearest\",\n            axis: \"x\"\n          },\n          scales: {\n            x: {\n              type: \"time\",\n              adapters: {\n                date: {\n                  locale: this.hass.locale,\n                  config: this.hass.config\n                }\n              },\n              ticks: {\n                source: this.chartType === \"bar\" ? \"data\" : undefined,\n                maxRotation: 0,\n                sampleSize: 5,\n                autoSkipPadding: 20,\n                major: {\n                  enabled: true\n                },\n                font: context => context.tick && context.tick.major ? {\n                  weight: \"bold\"\n                } : {}\n              },\n              time: {\n                tooltipFormat: \"datetime\",\n                unit: this.chartType === \"bar\" && this.period && [\"hour\", \"day\", \"week\", \"month\"].includes(this.period) ? this.period : undefined\n              }\n            },\n            y: {\n              beginAtZero: this.chartType === \"bar\",\n              ticks: {\n                maxTicksLimit: 7\n              },\n              title: {\n                display: unit || this.unit,\n                text: unit || this.unit\n              },\n              type: this.logarithmicScale ? \"logarithmic\" : \"linear\"\n            }\n          },\n          plugins: {\n            tooltip: {\n              callbacks: {\n                label: context => `${context.dataset.label}: ${(0,_common_number_format_number__WEBPACK_IMPORTED_MODULE_5__.formatNumber)(context.parsed.y, this.hass.locale, (0,_common_number_format_number__WEBPACK_IMPORTED_MODULE_5__.getNumberFormatOptions)(undefined, this.hass.entities[this._statisticIds[context.datasetIndex]]))} ${\n                // @ts-ignore\n                context.dataset.unit || \"\"}`\n              }\n            },\n            filler: {\n              propagate: true\n            },\n            legend: {\n              display: !this.hideLegend,\n              labels: {\n                usePointStyle: true\n              }\n            }\n          },\n          elements: {\n            line: {\n              tension: 0.4,\n              cubicInterpolationMode: \"monotone\",\n              borderWidth: 1.5\n            },\n            bar: {\n              borderWidth: 1.5,\n              borderRadius: 4\n            },\n            point: {\n              hitRadius: 50\n            }\n          },\n          // @ts-expect-error\n          locale: (0,_common_number_format_number__WEBPACK_IMPORTED_MODULE_5__.numberFormatToLocale)(this.hass.locale)\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_getStatisticsMetaData\",\n      value() {\n        return (0,memoize_one__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(async statisticIds => {\n          const statsMetadataArray = await (0,_data_recorder__WEBPACK_IMPORTED_MODULE_6__.getStatisticMetadata)(this.hass, statisticIds);\n          const statisticsMetaData = {};\n          statsMetadataArray.forEach(x => {\n            statisticsMetaData[x.statistic_id] = x;\n          });\n          return statisticsMetaData;\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_generateData\",\n      value: async function _generateData() {\n        if (!this.statisticsData) {\n          return;\n        }\n        const statisticsMetaData = this.metadata || (await this._getStatisticsMetaData(Object.keys(this.statisticsData)));\n        let colorIndex = 0;\n        const statisticsData = Object.entries(this.statisticsData);\n        const totalDataSets = [];\n        const statisticIds = [];\n        let endTime;\n        if (statisticsData.length === 0) {\n          return;\n        }\n        endTime = this.endTime ||\n        // Get the highest date from the last date of each statistic\n        new Date(Math.max(...statisticsData.map(([_, stats]) => new Date(stats[stats.length - 1].start).getTime())));\n        if (endTime > new Date()) {\n          endTime = new Date();\n        }\n        let unit;\n        const names = this.names || {};\n        statisticsData.forEach(([statistic_id, stats]) => {\n          const meta = statisticsMetaData === null || statisticsMetaData === void 0 ? void 0 : statisticsMetaData[statistic_id];\n          let name = names[statistic_id];\n          if (name === undefined) {\n            name = (0,_data_recorder__WEBPACK_IMPORTED_MODULE_6__.getStatisticLabel)(this.hass, statistic_id, meta);\n          }\n          if (!this.unit) {\n            if (unit === undefined) {\n              unit = (0,_data_recorder__WEBPACK_IMPORTED_MODULE_6__.getDisplayUnit)(this.hass, statistic_id, meta);\n            } else if (unit !== null && unit !== (0,_data_recorder__WEBPACK_IMPORTED_MODULE_6__.getDisplayUnit)(this.hass, statistic_id, meta)) {\n              // Clear unit if not all statistics have same unit\n              unit = null;\n            }\n          }\n\n          // array containing [value1, value2, etc]\n          let prevValues = null;\n          let prevEndTime;\n\n          // The datasets for the current statistic\n          const statDataSets = [];\n          const pushData = (start, end, dataValues) => {\n            if (!dataValues) return;\n            if (start > end) {\n              // Drop data points that are after the requested endTime. This could happen if\n              // endTime is \"now\" and client time is not in sync with server time.\n              return;\n            }\n            statDataSets.forEach((d, i) => {\n              if (this.chartType === \"line\" && prevEndTime && prevValues && prevEndTime.getTime() !== start.getTime()) {\n                // if the end of the previous data doesn't match the start of the current data,\n                // we have to draw a gap so add a value at the end time, and then an empty value.\n                d.data.push({\n                  x: prevEndTime.getTime(),\n                  y: prevValues[i]\n                });\n                // @ts-expect-error\n                d.data.push({\n                  x: prevEndTime.getTime(),\n                  y: null\n                });\n              }\n              d.data.push({\n                x: start.getTime(),\n                y: dataValues[i]\n              });\n            });\n            prevValues = dataValues;\n            prevEndTime = end;\n          };\n          const color = (0,_common_color_colors__WEBPACK_IMPORTED_MODULE_3__.getGraphColorByIndex)(colorIndex, this._computedStyle || getComputedStyle(this));\n          colorIndex++;\n          const statTypes = [];\n          const hasMean = this.statTypes.includes(\"mean\") && (0,_data_recorder__WEBPACK_IMPORTED_MODULE_6__.statisticsHaveType)(stats, \"mean\");\n          const drawBands = hasMean || this.statTypes.includes(\"min\") && (0,_data_recorder__WEBPACK_IMPORTED_MODULE_6__.statisticsHaveType)(stats, \"min\") && this.statTypes.includes(\"max\") && (0,_data_recorder__WEBPACK_IMPORTED_MODULE_6__.statisticsHaveType)(stats, \"max\");\n          const sortedTypes = drawBands ? [...this.statTypes].sort((a, b) => {\n            if (a === \"min\" || b === \"max\") {\n              return -1;\n            }\n            if (a === \"max\" || b === \"min\") {\n              return +1;\n            }\n            return 0;\n          }) : this.statTypes;\n          sortedTypes.forEach(type => {\n            if ((0,_data_recorder__WEBPACK_IMPORTED_MODULE_6__.statisticsHaveType)(stats, type)) {\n              const band = drawBands && (type === \"min\" || type === \"max\");\n              statTypes.push(type);\n              statDataSets.push({\n                label: name ? `${name} (${this.hass.localize(`ui.components.statistics_charts.statistic_types.${type}`)})\n            ` : this.hass.localize(`ui.components.statistics_charts.statistic_types.${type}`),\n                fill: drawBands ? type === \"min\" && hasMean ? \"+1\" : type === \"max\" ? \"-1\" : false : false,\n                borderColor: band && hasMean ? color + (this.hideLegend ? \"00\" : \"7F\") : color,\n                backgroundColor: band ? color + \"3F\" : color + \"7F\",\n                pointRadius: 0,\n                data: [],\n                // @ts-ignore\n                unit: meta === null || meta === void 0 ? void 0 : meta.unit_of_measurement,\n                band\n              });\n              statisticIds.push(statistic_id);\n            }\n          });\n          let prevDate = null;\n          // Process chart data.\n          let firstSum = null;\n          stats.forEach(stat => {\n            const startDate = new Date(stat.start);\n            if (prevDate === startDate) {\n              return;\n            }\n            prevDate = startDate;\n            const dataValues = [];\n            statTypes.forEach(type => {\n              var _val;\n              let val;\n              if (type === \"sum\") {\n                if (firstSum === null || firstSum === undefined) {\n                  val = 0;\n                  firstSum = stat.sum;\n                } else {\n                  val = (stat.sum || 0) - firstSum;\n                }\n              } else {\n                val = stat[type];\n              }\n              dataValues.push((_val = val) !== null && _val !== void 0 ? _val : null);\n            });\n            pushData(startDate, new Date(stat.end), dataValues);\n          });\n\n          // Concat two arrays\n          Array.prototype.push.apply(totalDataSets, statDataSets);\n        });\n        if (unit) {\n          this._createOptions(unit);\n        }\n        this._chartData = {\n          datasets: totalDataSets\n        };\n        this._statisticIds = statisticIds;\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`\n      :host {\n        display: block;\n        min-height: 60px;\n      }\n      .info {\n        text-align: center;\n        line-height: 60px;\n        color: var(--secondary-text-color);\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_1__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGFydC9zdGF0aXN0aWNzLWNoYXJ0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQU1BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBVUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBMmFBO0FBQUE7QUFBQTtBQTNhQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQVFBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBRUE7QUFFQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9jaGFydC9zdGF0aXN0aWNzLWNoYXJ0LnRzPzgxY2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUge1xuICBDaGFydERhdGEsXG4gIENoYXJ0RGF0YXNldCxcbiAgQ2hhcnRPcHRpb25zLFxuICBDaGFydFR5cGUsXG59IGZyb20gXCJjaGFydC5qc1wiO1xuaW1wb3J0IHtcbiAgY3NzLFxuICBDU1NSZXN1bHRHcm91cCxcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxufSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgc3RhdGUsIHF1ZXJ5IH0gZnJvbSBcImxpdC9kZWNvcmF0b3JzXCI7XG5pbXBvcnQgbWVtb2l6ZU9uZSBmcm9tIFwibWVtb2l6ZS1vbmVcIjtcbmltcG9ydCB7IGdldEdyYXBoQ29sb3JCeUluZGV4IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9jb2xvci9jb2xvcnNcIjtcbmltcG9ydCB7IGlzQ29tcG9uZW50TG9hZGVkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9jb25maWcvaXNfY29tcG9uZW50X2xvYWRlZFwiO1xuaW1wb3J0IHtcbiAgZm9ybWF0TnVtYmVyLFxuICBudW1iZXJGb3JtYXRUb0xvY2FsZSxcbiAgZ2V0TnVtYmVyRm9ybWF0T3B0aW9ucyxcbn0gZnJvbSBcIi4uLy4uL2NvbW1vbi9udW1iZXIvZm9ybWF0X251bWJlclwiO1xuaW1wb3J0IHtcbiAgZ2V0RGlzcGxheVVuaXQsXG4gIGdldFN0YXRpc3RpY0xhYmVsLFxuICBnZXRTdGF0aXN0aWNNZXRhZGF0YSxcbiAgU3RhdGlzdGljcyxcbiAgc3RhdGlzdGljc0hhdmVUeXBlLFxuICBTdGF0aXN0aWNzTWV0YURhdGEsXG4gIFN0YXRpc3RpY1R5cGUsXG59IGZyb20gXCIuLi8uLi9kYXRhL3JlY29yZGVyXCI7XG5pbXBvcnQgdHlwZSB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCBcIi4vaGEtY2hhcnQtYmFzZVwiO1xuaW1wb3J0IHR5cGUgeyBDaGFydFJlc2l6ZU9wdGlvbnMsIEhhQ2hhcnRCYXNlIH0gZnJvbSBcIi4vaGEtY2hhcnQtYmFzZVwiO1xuXG5leHBvcnQgY29uc3Qgc3VwcG9ydGVkU3RhdFR5cGVNYXA6IFJlY29yZDxTdGF0aXN0aWNUeXBlLCBTdGF0aXN0aWNUeXBlPiA9IHtcbiAgbWVhbjogXCJtZWFuXCIsXG4gIG1pbjogXCJtaW5cIixcbiAgbWF4OiBcIm1heFwiLFxuICBzdW06IFwic3VtXCIsXG4gIHN0YXRlOiBcInN1bVwiLFxuICBjaGFuZ2U6IFwic3VtXCIsXG59O1xuXG5AY3VzdG9tRWxlbWVudChcInN0YXRpc3RpY3MtY2hhcnRcIilcbmV4cG9ydCBjbGFzcyBTdGF0aXN0aWNzQ2hhcnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgaGFzcyE6IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgc3RhdGlzdGljc0RhdGE/OiBTdGF0aXN0aWNzO1xuXG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIG1ldGFkYXRhPzogUmVjb3JkPFxuICAgIHN0cmluZyxcbiAgICBTdGF0aXN0aWNzTWV0YURhdGFcbiAgPjtcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgbmFtZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyB1bml0Pzogc3RyaW5nO1xuXG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIGVuZFRpbWU/OiBEYXRlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEFycmF5IH0pIHB1YmxpYyBzdGF0VHlwZXM6IEFycmF5PFN0YXRpc3RpY1R5cGU+ID0gW1xuICAgIFwic3VtXCIsXG4gICAgXCJtaW5cIixcbiAgICBcIm1lYW5cIixcbiAgICBcIm1heFwiLFxuICBdO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBjaGFydFR5cGU6IENoYXJ0VHlwZSA9IFwibGluZVwiO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSkgcHVibGljIGhpZGVMZWdlbmQgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pIHB1YmxpYyBsb2dhcml0aG1pY1NjYWxlID0gZmFsc2U7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KSBwdWJsaWMgaXNMb2FkaW5nRGF0YSA9IGZhbHNlO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBwZXJpb2Q/OiBzdHJpbmc7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfY2hhcnREYXRhOiBDaGFydERhdGEgPSB7IGRhdGFzZXRzOiBbXSB9O1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX3N0YXRpc3RpY0lkczogc3RyaW5nW10gPSBbXTtcblxuICBAc3RhdGUoKSBwcml2YXRlIF9jaGFydE9wdGlvbnM/OiBDaGFydE9wdGlvbnM7XG5cbiAgQHF1ZXJ5KFwiaGEtY2hhcnQtYmFzZVwiKSBwcml2YXRlIF9jaGFydD86IEhhQ2hhcnRCYXNlO1xuXG4gIHByaXZhdGUgX2NvbXB1dGVkU3R5bGU/OiBDU1NTdHlsZURlY2xhcmF0aW9uO1xuXG4gIHB1YmxpYyByZXNpemUgPSAob3B0aW9ucz86IENoYXJ0UmVzaXplT3B0aW9ucyk6IHZvaWQgPT4ge1xuICAgIHRoaXMuX2NoYXJ0Py5yZXNpemUob3B0aW9ucyk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGNoYW5nZWRQcm9wcy5zaXplID4gMSB8fCAhY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIik7XG4gIH1cblxuICBwdWJsaWMgd2lsbFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuaGFzVXBkYXRlZCB8fFxuICAgICAgY2hhbmdlZFByb3BzLmhhcyhcInVuaXRcIikgfHxcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJwZXJpb2RcIikgfHxcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJjaGFydFR5cGVcIikgfHxcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJsb2dhcml0aG1pY1NjYWxlXCIpIHx8XG4gICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwiaGlkZUxlZ2VuZFwiKVxuICAgICkge1xuICAgICAgdGhpcy5fY3JlYXRlT3B0aW9ucygpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwic3RhdGlzdGljc0RhdGFcIikgfHxcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJzdGF0VHlwZXNcIikgfHxcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJjaGFydFR5cGVcIikgfHxcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJoaWRlTGVnZW5kXCIpXG4gICAgKSB7XG4gICAgICB0aGlzLl9nZW5lcmF0ZURhdGEoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZmlyc3RVcGRhdGVkKCkge1xuICAgIHRoaXMuX2NvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgaWYgKCFpc0NvbXBvbmVudExvYWRlZCh0aGlzLmhhc3MsIFwiaGlzdG9yeVwiKSkge1xuICAgICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz1cImluZm9cIj5cbiAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5jb21wb25lbnRzLmhpc3RvcnlfY2hhcnRzLmhpc3RvcnlfZGlzYWJsZWRcIil9XG4gICAgICA8L2Rpdj5gO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzTG9hZGluZ0RhdGEgJiYgIXRoaXMuc3RhdGlzdGljc0RhdGEpIHtcbiAgICAgIHJldHVybiBodG1sYDxkaXYgY2xhc3M9XCJpbmZvXCI+XG4gICAgICAgICR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgIFwidWkuY29tcG9uZW50cy5zdGF0aXN0aWNzX2NoYXJ0cy5sb2FkaW5nX3N0YXRpc3RpY3NcIlxuICAgICAgICApfVxuICAgICAgPC9kaXY+YDtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3RhdGlzdGljc0RhdGEgfHwgIU9iamVjdC5rZXlzKHRoaXMuc3RhdGlzdGljc0RhdGEpLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz1cImluZm9cIj5cbiAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgXCJ1aS5jb21wb25lbnRzLnN0YXRpc3RpY3NfY2hhcnRzLm5vX3N0YXRpc3RpY3NfZm91bmRcIlxuICAgICAgICApfVxuICAgICAgPC9kaXY+YDtcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jaGFydC1iYXNlXG4gICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAuZGF0YT0ke3RoaXMuX2NoYXJ0RGF0YX1cbiAgICAgICAgLm9wdGlvbnM9JHt0aGlzLl9jaGFydE9wdGlvbnN9XG4gICAgICAgIC5jaGFydFR5cGU9JHt0aGlzLmNoYXJ0VHlwZX1cbiAgICAgID48L2hhLWNoYXJ0LWJhc2U+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZU9wdGlvbnModW5pdD86IHN0cmluZykge1xuICAgIHRoaXMuX2NoYXJ0T3B0aW9ucyA9IHtcbiAgICAgIHBhcnNpbmc6IGZhbHNlLFxuICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcbiAgICAgIGludGVyYWN0aW9uOiB7XG4gICAgICAgIG1vZGU6IFwibmVhcmVzdFwiLFxuICAgICAgICBheGlzOiBcInhcIixcbiAgICAgIH0sXG4gICAgICBzY2FsZXM6IHtcbiAgICAgICAgeDoge1xuICAgICAgICAgIHR5cGU6IFwidGltZVwiLFxuICAgICAgICAgIGFkYXB0ZXJzOiB7XG4gICAgICAgICAgICBkYXRlOiB7XG4gICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5oYXNzLmxvY2FsZSxcbiAgICAgICAgICAgICAgY29uZmlnOiB0aGlzLmhhc3MuY29uZmlnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICBzb3VyY2U6IHRoaXMuY2hhcnRUeXBlID09PSBcImJhclwiID8gXCJkYXRhXCIgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBtYXhSb3RhdGlvbjogMCxcbiAgICAgICAgICAgIHNhbXBsZVNpemU6IDUsXG4gICAgICAgICAgICBhdXRvU2tpcFBhZGRpbmc6IDIwLFxuICAgICAgICAgICAgbWFqb3I6IHtcbiAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb250OiAoY29udGV4dCkgPT5cbiAgICAgICAgICAgICAgY29udGV4dC50aWNrICYmIGNvbnRleHQudGljay5tYWpvclxuICAgICAgICAgICAgICAgID8gKHsgd2VpZ2h0OiBcImJvbGRcIiB9IGFzIGFueSlcbiAgICAgICAgICAgICAgICA6IHt9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGltZToge1xuICAgICAgICAgICAgdG9vbHRpcEZvcm1hdDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgdW5pdDpcbiAgICAgICAgICAgICAgdGhpcy5jaGFydFR5cGUgPT09IFwiYmFyXCIgJiZcbiAgICAgICAgICAgICAgdGhpcy5wZXJpb2QgJiZcbiAgICAgICAgICAgICAgW1wiaG91clwiLCBcImRheVwiLCBcIndlZWtcIiwgXCJtb250aFwiXS5pbmNsdWRlcyh0aGlzLnBlcmlvZClcbiAgICAgICAgICAgICAgICA/IHRoaXMucGVyaW9kXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgeToge1xuICAgICAgICAgIGJlZ2luQXRaZXJvOiB0aGlzLmNoYXJ0VHlwZSA9PT0gXCJiYXJcIixcbiAgICAgICAgICB0aWNrczoge1xuICAgICAgICAgICAgbWF4VGlja3NMaW1pdDogNyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICBkaXNwbGF5OiB1bml0IHx8IHRoaXMudW5pdCxcbiAgICAgICAgICAgIHRleHQ6IHVuaXQgfHwgdGhpcy51bml0LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHlwZTogdGhpcy5sb2dhcml0aG1pY1NjYWxlID8gXCJsb2dhcml0aG1pY1wiIDogXCJsaW5lYXJcIixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBwbHVnaW5zOiB7XG4gICAgICAgIHRvb2x0aXA6IHtcbiAgICAgICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgICAgIGxhYmVsOiAoY29udGV4dCkgPT5cbiAgICAgICAgICAgICAgYCR7Y29udGV4dC5kYXRhc2V0LmxhYmVsfTogJHtmb3JtYXROdW1iZXIoXG4gICAgICAgICAgICAgICAgY29udGV4dC5wYXJzZWQueSxcbiAgICAgICAgICAgICAgICB0aGlzLmhhc3MubG9jYWxlLFxuICAgICAgICAgICAgICAgIGdldE51bWJlckZvcm1hdE9wdGlvbnMoXG4gICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICB0aGlzLmhhc3MuZW50aXRpZXNbdGhpcy5fc3RhdGlzdGljSWRzW2NvbnRleHQuZGF0YXNldEluZGV4XV1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICl9ICR7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGNvbnRleHQuZGF0YXNldC51bml0IHx8IFwiXCJcbiAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZmlsbGVyOiB7XG4gICAgICAgICAgcHJvcGFnYXRlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICBkaXNwbGF5OiAhdGhpcy5oaWRlTGVnZW5kLFxuICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgdXNlUG9pbnRTdHlsZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgIGxpbmU6IHtcbiAgICAgICAgICB0ZW5zaW9uOiAwLjQsXG4gICAgICAgICAgY3ViaWNJbnRlcnBvbGF0aW9uTW9kZTogXCJtb25vdG9uZVwiLFxuICAgICAgICAgIGJvcmRlcldpZHRoOiAxLjUsXG4gICAgICAgIH0sXG4gICAgICAgIGJhcjogeyBib3JkZXJXaWR0aDogMS41LCBib3JkZXJSYWRpdXM6IDQgfSxcbiAgICAgICAgcG9pbnQ6IHtcbiAgICAgICAgICBoaXRSYWRpdXM6IDUwLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgIGxvY2FsZTogbnVtYmVyRm9ybWF0VG9Mb2NhbGUodGhpcy5oYXNzLmxvY2FsZSksXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldFN0YXRpc3RpY3NNZXRhRGF0YSA9IG1lbW9pemVPbmUoXG4gICAgYXN5bmMgKHN0YXRpc3RpY0lkczogc3RyaW5nW10gfCB1bmRlZmluZWQpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzTWV0YWRhdGFBcnJheSA9IGF3YWl0IGdldFN0YXRpc3RpY01ldGFkYXRhKFxuICAgICAgICB0aGlzLmhhc3MsXG4gICAgICAgIHN0YXRpc3RpY0lkc1xuICAgICAgKTtcbiAgICAgIGNvbnN0IHN0YXRpc3RpY3NNZXRhRGF0YSA9IHt9O1xuICAgICAgc3RhdHNNZXRhZGF0YUFycmF5LmZvckVhY2goKHgpID0+IHtcbiAgICAgICAgc3RhdGlzdGljc01ldGFEYXRhW3guc3RhdGlzdGljX2lkXSA9IHg7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzdGF0aXN0aWNzTWV0YURhdGE7XG4gICAgfVxuICApO1xuXG4gIHByaXZhdGUgYXN5bmMgX2dlbmVyYXRlRGF0YSgpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGlzdGljc0RhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0aXN0aWNzTWV0YURhdGEgPVxuICAgICAgdGhpcy5tZXRhZGF0YSB8fFxuICAgICAgKGF3YWl0IHRoaXMuX2dldFN0YXRpc3RpY3NNZXRhRGF0YShPYmplY3Qua2V5cyh0aGlzLnN0YXRpc3RpY3NEYXRhKSkpO1xuXG4gICAgbGV0IGNvbG9ySW5kZXggPSAwO1xuICAgIGNvbnN0IHN0YXRpc3RpY3NEYXRhID0gT2JqZWN0LmVudHJpZXModGhpcy5zdGF0aXN0aWNzRGF0YSk7XG4gICAgY29uc3QgdG90YWxEYXRhU2V0czogQ2hhcnREYXRhc2V0PFwibGluZVwiPltdID0gW107XG4gICAgY29uc3Qgc3RhdGlzdGljSWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBlbmRUaW1lOiBEYXRlO1xuXG4gICAgaWYgKHN0YXRpc3RpY3NEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVuZFRpbWUgPVxuICAgICAgdGhpcy5lbmRUaW1lIHx8XG4gICAgICAvLyBHZXQgdGhlIGhpZ2hlc3QgZGF0ZSBmcm9tIHRoZSBsYXN0IGRhdGUgb2YgZWFjaCBzdGF0aXN0aWNcbiAgICAgIG5ldyBEYXRlKFxuICAgICAgICBNYXRoLm1heChcbiAgICAgICAgICAuLi5zdGF0aXN0aWNzRGF0YS5tYXAoKFtfLCBzdGF0c10pID0+XG4gICAgICAgICAgICBuZXcgRGF0ZShzdGF0c1tzdGF0cy5sZW5ndGggLSAxXS5zdGFydCkuZ2V0VGltZSgpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuXG4gICAgaWYgKGVuZFRpbWUgPiBuZXcgRGF0ZSgpKSB7XG4gICAgICBlbmRUaW1lID0gbmV3IERhdGUoKTtcbiAgICB9XG5cbiAgICBsZXQgdW5pdDogc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbDtcblxuICAgIGNvbnN0IG5hbWVzID0gdGhpcy5uYW1lcyB8fCB7fTtcbiAgICBzdGF0aXN0aWNzRGF0YS5mb3JFYWNoKChbc3RhdGlzdGljX2lkLCBzdGF0c10pID0+IHtcbiAgICAgIGNvbnN0IG1ldGEgPSBzdGF0aXN0aWNzTWV0YURhdGE/LltzdGF0aXN0aWNfaWRdO1xuICAgICAgbGV0IG5hbWUgPSBuYW1lc1tzdGF0aXN0aWNfaWRdO1xuICAgICAgaWYgKG5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuYW1lID0gZ2V0U3RhdGlzdGljTGFiZWwodGhpcy5oYXNzLCBzdGF0aXN0aWNfaWQsIG1ldGEpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMudW5pdCkge1xuICAgICAgICBpZiAodW5pdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdW5pdCA9IGdldERpc3BsYXlVbml0KHRoaXMuaGFzcywgc3RhdGlzdGljX2lkLCBtZXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICB1bml0ICE9PSBudWxsICYmXG4gICAgICAgICAgdW5pdCAhPT0gZ2V0RGlzcGxheVVuaXQodGhpcy5oYXNzLCBzdGF0aXN0aWNfaWQsIG1ldGEpXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIENsZWFyIHVuaXQgaWYgbm90IGFsbCBzdGF0aXN0aWNzIGhhdmUgc2FtZSB1bml0XG4gICAgICAgICAgdW5pdCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gYXJyYXkgY29udGFpbmluZyBbdmFsdWUxLCB2YWx1ZTIsIGV0Y11cbiAgICAgIGxldCBwcmV2VmFsdWVzOiBBcnJheTxudW1iZXIgfCBudWxsPiB8IG51bGwgPSBudWxsO1xuICAgICAgbGV0IHByZXZFbmRUaW1lOiBEYXRlIHwgdW5kZWZpbmVkO1xuXG4gICAgICAvLyBUaGUgZGF0YXNldHMgZm9yIHRoZSBjdXJyZW50IHN0YXRpc3RpY1xuICAgICAgY29uc3Qgc3RhdERhdGFTZXRzOiBDaGFydERhdGFzZXQ8XCJsaW5lXCI+W10gPSBbXTtcblxuICAgICAgY29uc3QgcHVzaERhdGEgPSAoXG4gICAgICAgIHN0YXJ0OiBEYXRlLFxuICAgICAgICBlbmQ6IERhdGUsXG4gICAgICAgIGRhdGFWYWx1ZXM6IEFycmF5PG51bWJlciB8IG51bGw+IHwgbnVsbFxuICAgICAgKSA9PiB7XG4gICAgICAgIGlmICghZGF0YVZhbHVlcykgcmV0dXJuO1xuICAgICAgICBpZiAoc3RhcnQgPiBlbmQpIHtcbiAgICAgICAgICAvLyBEcm9wIGRhdGEgcG9pbnRzIHRoYXQgYXJlIGFmdGVyIHRoZSByZXF1ZXN0ZWQgZW5kVGltZS4gVGhpcyBjb3VsZCBoYXBwZW4gaWZcbiAgICAgICAgICAvLyBlbmRUaW1lIGlzIFwibm93XCIgYW5kIGNsaWVudCB0aW1lIGlzIG5vdCBpbiBzeW5jIHdpdGggc2VydmVyIHRpbWUuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXREYXRhU2V0cy5mb3JFYWNoKChkLCBpKSA9PiB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jaGFydFR5cGUgPT09IFwibGluZVwiICYmXG4gICAgICAgICAgICBwcmV2RW5kVGltZSAmJlxuICAgICAgICAgICAgcHJldlZhbHVlcyAmJlxuICAgICAgICAgICAgcHJldkVuZFRpbWUuZ2V0VGltZSgpICE9PSBzdGFydC5nZXRUaW1lKClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBlbmQgb2YgdGhlIHByZXZpb3VzIGRhdGEgZG9lc24ndCBtYXRjaCB0aGUgc3RhcnQgb2YgdGhlIGN1cnJlbnQgZGF0YSxcbiAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gZHJhdyBhIGdhcCBzbyBhZGQgYSB2YWx1ZSBhdCB0aGUgZW5kIHRpbWUsIGFuZCB0aGVuIGFuIGVtcHR5IHZhbHVlLlxuICAgICAgICAgICAgZC5kYXRhLnB1c2goeyB4OiBwcmV2RW5kVGltZS5nZXRUaW1lKCksIHk6IHByZXZWYWx1ZXNbaV0hIH0pO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgZC5kYXRhLnB1c2goeyB4OiBwcmV2RW5kVGltZS5nZXRUaW1lKCksIHk6IG51bGwgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGQuZGF0YS5wdXNoKHsgeDogc3RhcnQuZ2V0VGltZSgpLCB5OiBkYXRhVmFsdWVzW2ldISB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByZXZWYWx1ZXMgPSBkYXRhVmFsdWVzO1xuICAgICAgICBwcmV2RW5kVGltZSA9IGVuZDtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNvbG9yID0gZ2V0R3JhcGhDb2xvckJ5SW5kZXgoXG4gICAgICAgIGNvbG9ySW5kZXgsXG4gICAgICAgIHRoaXMuX2NvbXB1dGVkU3R5bGUgfHwgZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzKVxuICAgICAgKTtcbiAgICAgIGNvbG9ySW5kZXgrKztcblxuICAgICAgY29uc3Qgc3RhdFR5cGVzOiB0aGlzW1wic3RhdFR5cGVzXCJdID0gW107XG5cbiAgICAgIGNvbnN0IGhhc01lYW4gPVxuICAgICAgICB0aGlzLnN0YXRUeXBlcy5pbmNsdWRlcyhcIm1lYW5cIikgJiYgc3RhdGlzdGljc0hhdmVUeXBlKHN0YXRzLCBcIm1lYW5cIik7XG4gICAgICBjb25zdCBkcmF3QmFuZHMgPVxuICAgICAgICBoYXNNZWFuIHx8XG4gICAgICAgICh0aGlzLnN0YXRUeXBlcy5pbmNsdWRlcyhcIm1pblwiKSAmJlxuICAgICAgICAgIHN0YXRpc3RpY3NIYXZlVHlwZShzdGF0cywgXCJtaW5cIikgJiZcbiAgICAgICAgICB0aGlzLnN0YXRUeXBlcy5pbmNsdWRlcyhcIm1heFwiKSAmJlxuICAgICAgICAgIHN0YXRpc3RpY3NIYXZlVHlwZShzdGF0cywgXCJtYXhcIikpO1xuXG4gICAgICBjb25zdCBzb3J0ZWRUeXBlcyA9IGRyYXdCYW5kc1xuICAgICAgICA/IFsuLi50aGlzLnN0YXRUeXBlc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEgPT09IFwibWluXCIgfHwgYiA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYSA9PT0gXCJtYXhcIiB8fCBiID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiArMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgIH0pXG4gICAgICAgIDogdGhpcy5zdGF0VHlwZXM7XG5cbiAgICAgIHNvcnRlZFR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgaWYgKHN0YXRpc3RpY3NIYXZlVHlwZShzdGF0cywgdHlwZSkpIHtcbiAgICAgICAgICBjb25zdCBiYW5kID0gZHJhd0JhbmRzICYmICh0eXBlID09PSBcIm1pblwiIHx8IHR5cGUgPT09IFwibWF4XCIpO1xuICAgICAgICAgIHN0YXRUeXBlcy5wdXNoKHR5cGUpO1xuICAgICAgICAgIHN0YXREYXRhU2V0cy5wdXNoKHtcbiAgICAgICAgICAgIGxhYmVsOiBuYW1lXG4gICAgICAgICAgICAgID8gYCR7bmFtZX0gKCR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgYHVpLmNvbXBvbmVudHMuc3RhdGlzdGljc19jaGFydHMuc3RhdGlzdGljX3R5cGVzLiR7dHlwZX1gXG4gICAgICAgICAgICAgICAgKX0pXG4gICAgICAgICAgICBgXG4gICAgICAgICAgICAgIDogdGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgYHVpLmNvbXBvbmVudHMuc3RhdGlzdGljc19jaGFydHMuc3RhdGlzdGljX3R5cGVzLiR7dHlwZX1gXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGZpbGw6IGRyYXdCYW5kc1xuICAgICAgICAgICAgICA/IHR5cGUgPT09IFwibWluXCIgJiYgaGFzTWVhblxuICAgICAgICAgICAgICAgID8gXCIrMVwiXG4gICAgICAgICAgICAgICAgOiB0eXBlID09PSBcIm1heFwiXG4gICAgICAgICAgICAgICAgICA/IFwiLTFcIlxuICAgICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6XG4gICAgICAgICAgICAgIGJhbmQgJiYgaGFzTWVhbiA/IGNvbG9yICsgKHRoaXMuaGlkZUxlZ2VuZCA/IFwiMDBcIiA6IFwiN0ZcIikgOiBjb2xvcixcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFuZCA/IGNvbG9yICsgXCIzRlwiIDogY29sb3IgKyBcIjdGXCIsXG4gICAgICAgICAgICBwb2ludFJhZGl1czogMCxcbiAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdW5pdDogbWV0YT8udW5pdF9vZl9tZWFzdXJlbWVudCxcbiAgICAgICAgICAgIGJhbmQsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdGlzdGljSWRzLnB1c2goc3RhdGlzdGljX2lkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxldCBwcmV2RGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsO1xuICAgICAgLy8gUHJvY2VzcyBjaGFydCBkYXRhLlxuICAgICAgbGV0IGZpcnN0U3VtOiBudW1iZXIgfCBudWxsIHwgdW5kZWZpbmVkID0gbnVsbDtcbiAgICAgIHN0YXRzLmZvckVhY2goKHN0YXQpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoc3RhdC5zdGFydCk7XG4gICAgICAgIGlmIChwcmV2RGF0ZSA9PT0gc3RhcnREYXRlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHByZXZEYXRlID0gc3RhcnREYXRlO1xuICAgICAgICBjb25zdCBkYXRhVmFsdWVzOiBBcnJheTxudW1iZXIgfCBudWxsPiA9IFtdO1xuICAgICAgICBzdGF0VHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICAgIGxldCB2YWw6IG51bWJlciB8IG51bGwgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHR5cGUgPT09IFwic3VtXCIpIHtcbiAgICAgICAgICAgIGlmIChmaXJzdFN1bSA9PT0gbnVsbCB8fCBmaXJzdFN1bSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHZhbCA9IDA7XG4gICAgICAgICAgICAgIGZpcnN0U3VtID0gc3RhdC5zdW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YWwgPSAoc3RhdC5zdW0gfHwgMCkgLSBmaXJzdFN1bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsID0gc3RhdFt0eXBlXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGF0YVZhbHVlcy5wdXNoKHZhbCA/PyBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHB1c2hEYXRhKHN0YXJ0RGF0ZSwgbmV3IERhdGUoc3RhdC5lbmQpLCBkYXRhVmFsdWVzKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDb25jYXQgdHdvIGFycmF5c1xuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodG90YWxEYXRhU2V0cywgc3RhdERhdGFTZXRzKTtcbiAgICB9KTtcblxuICAgIGlmICh1bml0KSB7XG4gICAgICB0aGlzLl9jcmVhdGVPcHRpb25zKHVuaXQpO1xuICAgIH1cblxuICAgIHRoaXMuX2NoYXJ0RGF0YSA9IHtcbiAgICAgIGRhdGFzZXRzOiB0b3RhbERhdGFTZXRzLFxuICAgIH07XG4gICAgdGhpcy5fc3RhdGlzdGljSWRzID0gc3RhdGlzdGljSWRzO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0R3JvdXAge1xuICAgIHJldHVybiBjc3NgXG4gICAgICA6aG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBtaW4taGVpZ2h0OiA2MHB4O1xuICAgICAgfVxuICAgICAgLmluZm8ge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiA2MHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcInN0YXRpc3RpY3MtY2hhcnRcIjogU3RhdGlzdGljc0NoYXJ0O1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/chart/statistics-chart.ts\n");

/***/ }),

/***/ "./src/util/documentation-url.ts":
/*!***************************************!*\
  !*** ./src/util/documentation-url.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   documentationUrl: () => (/* binding */ documentationUrl)\n/* harmony export */ });\nconst documentationUrl = (hass, path) => `https://${hass.config.version.includes(\"b\") ? \"rc\" : hass.config.version.includes(\"dev\") ? \"next\" : \"www\"}.home-assistant.io${path}`;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9kb2N1bWVudGF0aW9uLXVybC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy91dGlsL2RvY3VtZW50YXRpb24tdXJsLnRzPzA3YzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgZG9jdW1lbnRhdGlvblVybCA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBwYXRoOiBzdHJpbmcpID0+XG4gIGBodHRwczovLyR7XG4gICAgaGFzcy5jb25maWcudmVyc2lvbi5pbmNsdWRlcyhcImJcIilcbiAgICAgID8gXCJyY1wiXG4gICAgICA6IGhhc3MuY29uZmlnLnZlcnNpb24uaW5jbHVkZXMoXCJkZXZcIilcbiAgICAgICAgPyBcIm5leHRcIlxuICAgICAgICA6IFwid3d3XCJcbiAgfS5ob21lLWFzc2lzdGFudC5pbyR7cGF0aH1gO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/util/documentation-url.ts\n");

/***/ })

};
