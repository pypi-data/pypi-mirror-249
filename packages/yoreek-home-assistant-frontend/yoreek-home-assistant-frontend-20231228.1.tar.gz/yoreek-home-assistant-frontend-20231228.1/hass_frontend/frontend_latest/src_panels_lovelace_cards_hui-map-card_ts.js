/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
export const id = "src_panels_lovelace_cards_hui-map-card_ts";
export const ids = ["src_panels_lovelace_cards_hui-map-card_ts"];
export const modules = {

/***/ "./node_modules/date-fns/esm/isSameDay/index.js":
/*!******************************************************!*\
  !*** ./node_modules/date-fns/esm/isSameDay/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isSameDay)\n/* harmony export */ });\n/* harmony import */ var _startOfDay_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../startOfDay/index.js */ \"./node_modules/date-fns/esm/startOfDay/index.js\");\n/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_lib/requiredArgs/index.js */ \"./node_modules/date-fns/esm/_lib/requiredArgs/index.js\");\n\n\n/**\n * @name isSameDay\n * @category Day Helpers\n * @summary Are the given dates in the same day (and year and month)?\n *\n * @description\n * Are the given dates in the same day (and year and month)?\n *\n * @param {Date|Number} dateLeft - the first date to check\n * @param {Date|Number} dateRight - the second date to check\n * @returns {Boolean} the dates are in the same day (and year and month)\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))\n * //=> true\n *\n * @example\n * // Are 4 September and 4 October in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))\n * //=> false\n *\n * @example\n * // Are 4 September, 2014 and 4 September, 2015 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))\n * //=> false\n */\nfunction isSameDay(dirtyDateLeft, dirtyDateRight) {\n  (0,_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(2, arguments);\n  var dateLeftStartOfDay = (0,_startOfDay_index_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(dirtyDateLeft);\n  var dateRightStartOfDay = (0,_startOfDay_index_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(dirtyDateRight);\n  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lRGF5L2luZGV4LmpzPzllYmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSBcIi4uL3N0YXJ0T2ZEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpP1xuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciAwNjowMDowMCBhbmQgNCBTZXB0ZW1iZXIgMTg6MDA6MDAgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIGFuZCA0IE9jdG9iZXIgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE0LCA5LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyLCAyMDE0IGFuZCA0IFNlcHRlbWJlciwgMjAxNSBpbiB0aGUgc2FtZSBkYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVEYXkobmV3IERhdGUoMjAxNCwgOCwgNCksIG5ldyBEYXRlKDIwMTUsIDgsIDQpKVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/date-fns/esm/isSameDay/index.js\n");

/***/ }),

/***/ "./node_modules/date-fns/esm/isToday/index.js":
/*!****************************************************!*\
  !*** ./node_modules/date-fns/esm/isToday/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isToday)\n/* harmony export */ });\n/* harmony import */ var _isSameDay_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../isSameDay/index.js */ \"./node_modules/date-fns/esm/isSameDay/index.js\");\n/* harmony import */ var _lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_lib/requiredArgs/index.js */ \"./node_modules/date-fns/esm/_lib/requiredArgs/index.js\");\n\n\n/**\n * @name isToday\n * @category Day Helpers\n * @summary Is the given date today?\n * @pure false\n *\n * @description\n * Is the given date today?\n *\n * > ⚠️ Please note that this function is not present in the FP submodule as\n * > it uses `Date.now()` internally hence impure and can't be safely curried.\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date is today\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // If today is 6 October 2014, is 6 October 14:00:00 today?\n * const result = isToday(new Date(2014, 9, 6, 14, 0))\n * //=> true\n */\nfunction isToday(dirtyDate) {\n  (0,_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(1, arguments);\n  return (0,_isSameDay_index_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(dirtyDate, Date.now());\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanM/ZWIyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaXNTYW1lRGF5IGZyb20gXCIuLi9pc1NhbWVEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzVG9kYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIHRvZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQsIGlzIDYgT2N0b2JlciAxNDowMDowMCB0b2RheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVG9kYXkobmV3IERhdGUoMjAxNCwgOSwgNiwgMTQsIDApKVxuICogLy89PiB0cnVlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/date-fns/esm/isToday/index.js\n");

/***/ }),

/***/ "./src/common/util/parse-aspect-ratio.ts":
/*!***********************************************!*\
  !*** ./src/common/util/parse-aspect-ratio.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ parseAspectRatio)\n/* harmony export */ });\n// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78\n// Ignore everything else\nconst parseOrThrow = num => {\n  const parsed = parseFloat(num);\n  if (isNaN(parsed)) {\n    throw new Error(`${num} is not a number`);\n  }\n  return parsed;\n};\nfunction parseAspectRatio(input) {\n  if (!input) {\n    return null;\n  }\n  try {\n    if (input.endsWith(\"%\")) {\n      return {\n        w: 100,\n        h: parseOrThrow(input.substr(0, input.length - 1))\n      };\n    }\n    const arr = input.replace(\":\", \"x\").split(\"x\");\n    if (arr.length === 0) {\n      return null;\n    }\n    return arr.length === 1 ? {\n      w: parseOrThrow(arr[0]),\n      h: 1\n    } : {\n      w: parseOrThrow(arr[0]),\n      h: parseOrThrow(arr[1])\n    };\n  } catch (err) {\n    // Ignore the error\n  }\n  return null;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vdXRpbC9wYXJzZS1hc3BlY3QtcmF0aW8udHM/MWIyYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBIYW5kbGUgMTZ4OSwgMTY6OSwgMS43OHgxLCAxLjc4OjEsIDEuNzhcbi8vIElnbm9yZSBldmVyeXRoaW5nIGVsc2VcbmNvbnN0IHBhcnNlT3JUaHJvdyA9IChudW0pID0+IHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdChudW0pO1xuICBpZiAoaXNOYU4ocGFyc2VkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtudW19IGlzIG5vdCBhIG51bWJlcmApO1xuICB9XG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZUFzcGVjdFJhdGlvKGlucHV0OiBzdHJpbmcpIHtcbiAgaWYgKCFpbnB1dCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKGlucHV0LmVuZHNXaXRoKFwiJVwiKSkge1xuICAgICAgcmV0dXJuIHsgdzogMTAwLCBoOiBwYXJzZU9yVGhyb3coaW5wdXQuc3Vic3RyKDAsIGlucHV0Lmxlbmd0aCAtIDEpKSB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFyciA9IGlucHV0LnJlcGxhY2UoXCI6XCIsIFwieFwiKS5zcGxpdChcInhcIik7XG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBhcnIubGVuZ3RoID09PSAxXG4gICAgICA/IHsgdzogcGFyc2VPclRocm93KGFyclswXSksIGg6IDEgfVxuICAgICAgOiB7IHc6IHBhcnNlT3JUaHJvdyhhcnJbMF0pLCBoOiBwYXJzZU9yVGhyb3coYXJyWzFdKSB9O1xuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIC8vIElnbm9yZSB0aGUgZXJyb3JcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/util/parse-aspect-ratio.ts\n");

/***/ }),

/***/ "./src/panels/lovelace/cards/hui-map-card.ts":
/*!***************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-map-card.ts ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_HOURS_TO_SHOW: () => (/* binding */ DEFAULT_HOURS_TO_SHOW),\n/* harmony export */   DEFAULT_ZOOM: () => (/* binding */ DEFAULT_ZOOM)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var _babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/esm/get.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! date-fns */ \"./node_modules/date-fns/esm/isToday/index.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var memoize_one__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! memoize-one */ \"./node_modules/memoize-one/dist/memoize-one.esm.js\");\n/* harmony import */ var _common_color_colors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/color/colors */ \"./src/common/color/colors.ts\");\n/* harmony import */ var _common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/config/is_component_loaded */ \"./src/common/config/is_component_loaded.ts\");\n/* harmony import */ var _common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/datetime/format_date_time */ \"./src/common/datetime/format_date_time.ts\");\n/* harmony import */ var _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/datetime/format_time */ \"./src/common/datetime/format_time.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_util_deep_equal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/util/deep-equal */ \"./src/common/util/deep-equal.ts\");\n/* harmony import */ var _common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../common/util/parse-aspect-ratio */ \"./src/common/util/parse-aspect-ratio.ts\");\n/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../components/ha-card */ \"./src/components/ha-card.ts\");\n/* harmony import */ var _components_ha_alert__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../components/ha-alert */ \"./src/components/ha-alert.ts\");\n/* harmony import */ var _components_ha_icon_button__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../components/ha-icon-button */ \"./src/components/ha-icon-button.ts\");\n/* harmony import */ var _components_map_ha_map__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../components/map/ha-map */ \"./src/components/map/ha-map.ts\");\n/* harmony import */ var _data_history__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../data/history */ \"./src/data/history.ts\");\n/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../common/has-changed */ \"./src/panels/lovelace/common/has-changed.ts\");\n/* harmony import */ var _common_find_entities__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/find-entities */ \"./src/panels/lovelace/common/find-entities.ts\");\n/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../common/process-config-entities */ \"./src/panels/lovelace/common/process-config-entities.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_7__, _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__, _data_history__WEBPACK_IMPORTED_MODULE_16__]);\n([_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_7__, _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__, _data_history__WEBPACK_IMPORTED_MODULE_16__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst mdiImageFilterCenterFocus = \"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M19,19H15V21H19A2,2 0 0,0 21,19V15H19M19,3H15V5H19V9H21V5A2,2 0 0,0 19,3M5,5H9V3H5A2,2 0 0,0 3,5V9H5M5,15H3V19A2,2 0 0,0 5,21H9V19H5V15Z\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_HOURS_TO_SHOW = 0;\nconst DEFAULT_ZOOM = 14;\nlet HuiMapCard = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.customElement)(\"hui-map-card\")], function (_initialize, _LitElement) {\n  class HuiMapCard extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HuiMapCard,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        type: Boolean,\n        reflect: true\n      })],\n      key: \"isPanel\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_stateHistory\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_config\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.query)(\"ha-map\")],\n      key: \"_map\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_configEntities\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_mapEntities\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      key: \"_colorDict\",\n      value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      key: \"_colorIndex\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_error\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_subscribed\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"setConfig\",\n      value: function setConfig(config) {\n        var _config$entities;\n        if (!config) {\n          throw new Error(\"Error in card configuration.\");\n        }\n        if (!((_config$entities = config.entities) !== null && _config$entities !== void 0 && _config$entities.length) && !config.geo_location_sources) {\n          throw new Error(\"Either entities or geo_location_sources must be specified\");\n        }\n        if (config.entities && !Array.isArray(config.entities)) {\n          throw new Error(\"Entities need to be an array\");\n        }\n        if (config.geo_location_sources && !Array.isArray(config.geo_location_sources)) {\n          throw new Error(\"Parameter geo_location_sources needs to be an array\");\n        }\n        this._config = config;\n        this._configEntities = config.entities ? (0,_common_process_config_entities__WEBPACK_IMPORTED_MODULE_19__.processConfigEntities)(config.entities) : [];\n        this._mapEntities = this._getMapEntities();\n      }\n    }, {\n      kind: \"method\",\n      key: \"getCardSize\",\n      value: function getCardSize() {\n        var _this$_config;\n        if (!((_this$_config = this._config) !== null && _this$_config !== void 0 && _this$_config.aspect_ratio)) {\n          return 7;\n        }\n        const ratio = (0,_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(this._config.aspect_ratio);\n        const ar = ratio && ratio.w > 0 && ratio.h > 0 ? `${(100 * ratio.h / ratio.w).toFixed(2)}` : \"100\";\n        return 1 + Math.floor(Number(ar) / 25) || 3;\n      }\n    }, {\n      kind: \"method\",\n      static: true,\n      key: \"getConfigElement\",\n      value: async function getConfigElement() {\n        await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_material_mwc-textfield_mwc-textfield-base_js-node_modules_material_mwc-t-b75c5d\"), __webpack_require__.e(\"vendors-node_modules_polymer_polymer_lib_utils_settings_js\"), __webpack_require__.e(\"vendors-node_modules_polymer_polymer_lib_utils_render-status_js-node_modules_polymer_polymer_-c63234\"), __webpack_require__.e(\"vendors-node_modules_vaadin_combo-box_lit_js-node_modules_vaadin_combo-box_theme_material_vaa-dad3c3\"), __webpack_require__.e(\"src_components_ha-combo-box_ts-node_modules_vaadin_vaadin-material-styles_font-icons_js-node_-a3c6e1\"), __webpack_require__.e(\"src_components_ha-selector_ha-selector_ts\"), __webpack_require__.e(\"src_common_string_filter_sequence-matching_ts\"), __webpack_require__.e(\"src_components_entity_ha-entity-picker_ts-src_components_ha-textfield_ts\"), __webpack_require__.e(\"src_components_ha-form_ha-form_ts-src_components_ha-list-item_ts-src_panels_lovelace_componen-bb1570\"), __webpack_require__.e(\"src_panels_lovelace_editor_config-elements_hui-map-card-editor_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../editor/config-elements/hui-map-card-editor */ \"./src/panels/lovelace/editor/config-elements/hui-map-card-editor.ts\"));\n        return document.createElement(\"hui-map-card-editor\");\n      }\n    }, {\n      kind: \"method\",\n      static: true,\n      key: \"getStubConfig\",\n      value: function getStubConfig(hass, entities, entitiesFallback) {\n        const includeDomains = [\"device_tracker\"];\n        const maxEntities = 2;\n        const foundEntities = (0,_common_find_entities__WEBPACK_IMPORTED_MODULE_18__.findEntities)(hass, maxEntities, entities, entitiesFallback, includeDomains);\n        return {\n          type: \"map\",\n          entities: foundEntities\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$_config$default;\n        if (!this._config) {\n          return lit__WEBPACK_IMPORTED_MODULE_3__.nothing;\n        }\n        if (this._error) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<ha-alert alert-type=\"error\">\n        ${this.hass.localize(\"ui.components.map.error\")}: ${this._error.message}\n        (${this._error.code})\n      </ha-alert>`;\n        }\n        return (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`\n      <ha-card id=\"card\" .header=${this._config.title}>\n        <div id=\"root\">\n          <ha-map\n            .hass=${this.hass}\n            .entities=${this._mapEntities}\n            .zoom=${(_this$_config$default = this._config.default_zoom) !== null && _this$_config$default !== void 0 ? _this$_config$default : DEFAULT_ZOOM}\n            .paths=${this._getHistoryPaths(this._config, this._stateHistory)}\n            .autoFit=${this._config.auto_fit || false}\n            .fitZones=${this._config.fit_zones}\n            .darkMode=${this._config.dark_mode}\n            interactiveZones\n            renderPassive\n          ></ha-map>\n          <ha-icon-button\n            .label=${this.hass.localize(\"ui.panel.lovelace.cards.map.reset_focus\")}\n            .path=${mdiImageFilterCenterFocus}\n            @click=${this._fitMap}\n            tabindex=\"0\"\n          ></ha-icon-button>\n        </div>\n      </ha-card>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        var _this$_config2, _this$_config3;\n        if (!changedProps.has(\"hass\") || changedProps.size > 1) {\n          return true;\n        }\n        const oldHass = changedProps.get(\"hass\");\n        if (!oldHass || !this._configEntities) {\n          return true;\n        }\n        if (oldHass.themes.darkMode !== this.hass.themes.darkMode) {\n          return true;\n        }\n        if (changedProps.has(\"_stateHistory\")) {\n          return true;\n        }\n        if ((_this$_config2 = this._config) !== null && _this$_config2 !== void 0 && _this$_config2.geo_location_sources) {\n          if (oldHass.states !== this.hass.states) {\n            return true;\n          }\n        }\n        return (_this$_config3 = this._config) !== null && _this$_config3 !== void 0 && _this$_config3.entities ? (0,_common_has_changed__WEBPACK_IMPORTED_MODULE_17__.hasConfigOrEntitiesChanged)(this, changedProps) : (0,_common_has_changed__WEBPACK_IMPORTED_MODULE_17__.hasConfigChanged)(this, changedProps);\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        var _this$_config4, _changedProps$get;\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiMapCard.prototype), \"willUpdate\", this).call(this, changedProps);\n        if (changedProps.has(\"hass\") && (_this$_config4 = this._config) !== null && _this$_config4 !== void 0 && _this$_config4.geo_location_sources && !(0,_common_util_deep_equal__WEBPACK_IMPORTED_MODULE_10__.deepEqual)(this._getSourceEntities((_changedProps$get = changedProps.get(\"hass\")) === null || _changedProps$get === void 0 ? void 0 : _changedProps$get.states), this._getSourceEntities(this.hass.states))) {\n          this._mapEntities = this._getMapEntities();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        var _this$_configEntities;\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiMapCard.prototype), \"connectedCallback\", this).call(this);\n        if (this.hasUpdated && (_this$_configEntities = this._configEntities) !== null && _this$_configEntities !== void 0 && _this$_configEntities.length) {\n          this._subscribeHistory();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiMapCard.prototype), \"disconnectedCallback\", this).call(this);\n        this._unsubscribeHistory();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_subscribeHistory\",\n      value: function _subscribeHistory() {\n        var _this$_config$hours_t, _this$_config5, _ref;\n        if (!(0,_common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_6__.isComponentLoaded)(this.hass, \"history\") || this._subscribed || !((_this$_config$hours_t = (_this$_config5 = this._config) === null || _this$_config5 === void 0 ? void 0 : _this$_config5.hours_to_show) !== null && _this$_config$hours_t !== void 0 ? _this$_config$hours_t : DEFAULT_HOURS_TO_SHOW)) {\n          return;\n        }\n        this._subscribed = (0,_data_history__WEBPACK_IMPORTED_MODULE_16__.subscribeHistoryStatesTimeWindow)(this.hass, combinedHistory => {\n          if (!this._subscribed) {\n            // Message came in before we had a chance to unload\n            return;\n          }\n          this._stateHistory = combinedHistory;\n        }, (_ref = this._config.hours_to_show) !== null && _ref !== void 0 ? _ref : DEFAULT_HOURS_TO_SHOW, (this._configEntities || []).map(entity => entity.entity), false, false, false).catch(err => {\n          this._subscribed = undefined;\n          this._error = err;\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_unsubscribeHistory\",\n      value: function _unsubscribeHistory() {\n        if (this._subscribed) {\n          this._subscribed.then(unsub => unsub === null || unsub === void 0 ? void 0 : unsub());\n          this._subscribed = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        var _this$_configEntities2;\n        if ((_this$_configEntities2 = this._configEntities) !== null && _this$_configEntities2 !== void 0 && _this$_configEntities2.length) {\n          if (!this._subscribed || changedProps.has(\"_config\")) {\n            this._unsubscribeHistory();\n            this._subscribeHistory();\n          }\n        } else {\n          this._unsubscribeHistory();\n        }\n        if (changedProps.has(\"_config\")) {\n          this._computePadding();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_computePadding\",\n      value: function _computePadding() {\n        const root = this.shadowRoot.getElementById(\"root\");\n        if (!this._config || this.isPanel || !root) {\n          return;\n        }\n        if (!this._config.aspect_ratio) {\n          root.style.paddingBottom = \"100%\";\n          return;\n        }\n        root.style.height = \"auto\";\n        const ratio = (0,_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(this._config.aspect_ratio);\n        root.style.paddingBottom = ratio && ratio.w > 0 && ratio.h > 0 ? `${(100 * ratio.h / ratio.w).toFixed(2)}%` : root.style.paddingBottom = \"100%\";\n      }\n    }, {\n      kind: \"method\",\n      key: \"_fitMap\",\n      value: function _fitMap() {\n        var _this$_map;\n        (_this$_map = this._map) === null || _this$_map === void 0 || _this$_map.fitMap();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getColor\",\n      value: function _getColor(entityId) {\n        let color = this._colorDict[entityId];\n        if (color) {\n          return color;\n        }\n        color = (0,_common_color_colors__WEBPACK_IMPORTED_MODULE_5__.getColorByIndex)(this._colorIndex);\n        this._colorIndex++;\n        this._colorDict[entityId] = color;\n        return color;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getSourceEntities\",\n      value: function _getSourceEntities(states) {\n        var _this$_config6;\n        if (!states || !((_this$_config6 = this._config) !== null && _this$_config6 !== void 0 && _this$_config6.geo_location_sources)) {\n          return [];\n        }\n        const geoEntities = [];\n        // Calculate visible geo location sources\n        const includesAll = this._config.geo_location_sources.includes(\"all\");\n        for (const stateObj of Object.values(states)) {\n          if ((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__.computeDomain)(stateObj.entity_id) === \"geo_location\" && (includesAll || this._config.geo_location_sources.includes(stateObj.attributes.source))) {\n            geoEntities.push(stateObj.entity_id);\n          }\n        }\n        return geoEntities;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getMapEntities\",\n      value: function _getMapEntities() {\n        var _this$hass;\n        return [...(this._configEntities || []).map(entityConf => ({\n          entity_id: entityConf.entity,\n          color: this._getColor(entityConf.entity),\n          label_mode: entityConf.label_mode,\n          focus: entityConf.focus,\n          name: entityConf.name\n        })), ...this._getSourceEntities((_this$hass = this.hass) === null || _this$hass === void 0 ? void 0 : _this$hass.states).map(entity => ({\n          entity_id: entity,\n          color: this._getColor(entity)\n        }))];\n      }\n    }, {\n      kind: \"field\",\n      key: \"_getHistoryPaths\",\n      value() {\n        return (0,memoize_one__WEBPACK_IMPORTED_MODULE_20__[\"default\"])((config, history) => {\n          var _config$hours_to_show;\n          if (!history || !((_config$hours_to_show = config.hours_to_show) !== null && _config$hours_to_show !== void 0 ? _config$hours_to_show : DEFAULT_HOURS_TO_SHOW)) {\n            return undefined;\n          }\n          const paths = [];\n          for (const entityId of Object.keys(history)) {\n            if ((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_9__.computeDomain)(entityId) === \"zone\") {\n              continue;\n            }\n            const entityStates = history[entityId];\n            if (!(entityStates !== null && entityStates !== void 0 && entityStates.length)) {\n              continue;\n            }\n            // filter location data from states and remove all invalid locations\n            const points = [];\n            for (const entityState of entityStates) {\n              var _ref2;\n              const latitude = entityState.a.latitude;\n              const longitude = entityState.a.longitude;\n              if (!latitude || !longitude) {\n                continue;\n              }\n              const p = {};\n              p.point = [latitude, longitude];\n              const t = new Date(entityState.lu * 1000);\n              if (((_ref2 = config.hours_to_show) !== null && _ref2 !== void 0 ? _ref2 : DEFAULT_HOURS_TO_SHOW) > 144) {\n                // if showing > 6 days in the history trail, show the full\n                // date and time\n                p.tooltip = (0,_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_7__.formatDateTime)(t, this.hass.locale, this.hass.config);\n              } else if ((0,date_fns__WEBPACK_IMPORTED_MODULE_21__[\"default\"])(t)) {\n                p.tooltip = (0,_common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__.formatTimeWithSeconds)(t, this.hass.locale, this.hass.config);\n              } else {\n                p.tooltip = (0,_common_datetime_format_time__WEBPACK_IMPORTED_MODULE_8__.formatTimeWeekday)(t, this.hass.locale, this.hass.config);\n              }\n              points.push(p);\n            }\n            paths.push({\n              points,\n              color: this._getColor(entityId),\n              gradualOpacity: 0.8\n            });\n          }\n          return paths;\n        });\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_3__.css)`\n      ha-card {\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n\n      ha-map {\n        z-index: 0;\n        border: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: inherit;\n      }\n\n      ha-icon-button {\n        position: absolute;\n        top: 75px;\n        left: 3px;\n        outline: none;\n      }\n\n      #root {\n        position: relative;\n        height: 100%;\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_3__.LitElement);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1tYXAtY2FyZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFHQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFJQTtBQUtBO0FBQ0E7QUFLQTtBQUNBO0FBQUE7QUFPQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBK1lBO0FBQUE7QUFBQTtBQS9ZQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLW1hcC1jYXJkLnRzPzQxMDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWRpSW1hZ2VGaWx0ZXJDZW50ZXJGb2N1cyB9IGZyb20gXCJAbWRpL2pzXCI7XG5pbXBvcnQgeyBpc1RvZGF5IH0gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQgeyBIYXNzRW50aXRpZXMgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBMYXRMbmdUdXBsZSB9IGZyb20gXCJsZWFmbGV0XCI7XG5pbXBvcnQge1xuICBjc3MsXG4gIENTU1Jlc3VsdEdyb3VwLFxuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgbm90aGluZyxcbn0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHF1ZXJ5LCBzdGF0ZSB9IGZyb20gXCJsaXQvZGVjb3JhdG9yc1wiO1xuaW1wb3J0IG1lbW9pemVPbmUgZnJvbSBcIm1lbW9pemUtb25lXCI7XG5pbXBvcnQgeyBnZXRDb2xvckJ5SW5kZXggfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbG9yL2NvbG9yc1wiO1xuaW1wb3J0IHsgaXNDb21wb25lbnRMb2FkZWQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbmZpZy9pc19jb21wb25lbnRfbG9hZGVkXCI7XG5pbXBvcnQgeyBmb3JtYXREYXRlVGltZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZGF0ZXRpbWUvZm9ybWF0X2RhdGVfdGltZVwiO1xuaW1wb3J0IHtcbiAgZm9ybWF0VGltZVdpdGhTZWNvbmRzLFxuICBmb3JtYXRUaW1lV2Vla2RheSxcbn0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYXRldGltZS9mb3JtYXRfdGltZVwiO1xuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBkZWVwRXF1YWwgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3V0aWwvZGVlcC1lcXVhbFwiO1xuaW1wb3J0IHBhcnNlQXNwZWN0UmF0aW8gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi91dGlsL3BhcnNlLWFzcGVjdC1yYXRpb1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jYXJkXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWFsZXJ0XCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL2hhLWljb24tYnV0dG9uXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9jb21wb25lbnRzL21hcC9oYS1tYXBcIjtcbmltcG9ydCB0eXBlIHtcbiAgSGFNYXAsXG4gIEhhTWFwRW50aXR5LFxuICBIYU1hcFBhdGhQb2ludCxcbiAgSGFNYXBQYXRocyxcbn0gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvbWFwL2hhLW1hcFwiO1xuaW1wb3J0IHtcbiAgSGlzdG9yeVN0YXRlcyxcbiAgc3Vic2NyaWJlSGlzdG9yeVN0YXRlc1RpbWVXaW5kb3csXG59IGZyb20gXCIuLi8uLi8uLi9kYXRhL2hpc3RvcnlcIjtcbmltcG9ydCB7XG4gIGhhc0NvbmZpZ0NoYW5nZWQsXG4gIGhhc0NvbmZpZ09yRW50aXRpZXNDaGFuZ2VkLFxufSBmcm9tIFwiLi4vY29tbW9uL2hhcy1jaGFuZ2VkXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmaW5kRW50aXRpZXMgfSBmcm9tIFwiLi4vY29tbW9uL2ZpbmQtZW50aXRpZXNcIjtcbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcbmltcG9ydCB7IEVudGl0eUNvbmZpZyB9IGZyb20gXCIuLi9lbnRpdHktcm93cy90eXBlc1wiO1xuaW1wb3J0IHsgTG92ZWxhY2VDYXJkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBNYXBDYXJkQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfSE9VUlNfVE9fU0hPVyA9IDA7XG5leHBvcnQgY29uc3QgREVGQVVMVF9aT09NID0gMTQ7XG5cbmludGVyZmFjZSBNYXBFbnRpdHlDb25maWcgZXh0ZW5kcyBFbnRpdHlDb25maWcge1xuICBsYWJlbF9tb2RlPzogXCJzdGF0ZVwiIHwgXCJuYW1lXCI7XG4gIGZvY3VzPzogYm9vbGVhbjtcbn1cblxuQGN1c3RvbUVsZW1lbnQoXCJodWktbWFwLWNhcmRcIilcbmNsYXNzIEh1aU1hcENhcmQgZXh0ZW5kcyBMaXRFbGVtZW50IGltcGxlbWVudHMgTG92ZWxhY2VDYXJkIHtcbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgaGFzcyE6IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgcmVmbGVjdDogdHJ1ZSB9KVxuICBwdWJsaWMgaXNQYW5lbCA9IGZhbHNlO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX3N0YXRlSGlzdG9yeT86IEhpc3RvcnlTdGF0ZXM7XG5cbiAgQHN0YXRlKClcbiAgcHJpdmF0ZSBfY29uZmlnPzogTWFwQ2FyZENvbmZpZztcblxuICBAcXVlcnkoXCJoYS1tYXBcIilcbiAgcHJpdmF0ZSBfbWFwPzogSGFNYXA7XG5cbiAgcHJpdmF0ZSBfY29uZmlnRW50aXRpZXM/OiBNYXBFbnRpdHlDb25maWdbXTtcblxuICBAc3RhdGUoKSBwcml2YXRlIF9tYXBFbnRpdGllczogSGFNYXBFbnRpdHlbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2NvbG9yRGljdDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gIHByaXZhdGUgX2NvbG9ySW5kZXggPSAwO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2Vycm9yPzogeyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U6IHN0cmluZyB9O1xuXG4gIHByaXZhdGUgX3N1YnNjcmliZWQ/OiBQcm9taXNlPCgoKSA9PiBQcm9taXNlPHZvaWQ+KSB8IHZvaWQ+O1xuXG4gIHB1YmxpYyBzZXRDb25maWcoY29uZmlnOiBNYXBDYXJkQ29uZmlnKTogdm9pZCB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGluIGNhcmQgY29uZmlndXJhdGlvbi5cIik7XG4gICAgfVxuXG4gICAgaWYgKCFjb25maWcuZW50aXRpZXM/Lmxlbmd0aCAmJiAhY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiRWl0aGVyIGVudGl0aWVzIG9yIGdlb19sb2NhdGlvbl9zb3VyY2VzIG11c3QgYmUgc3BlY2lmaWVkXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChjb25maWcuZW50aXRpZXMgJiYgIUFycmF5LmlzQXJyYXkoY29uZmlnLmVudGl0aWVzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW50aXRpZXMgbmVlZCB0byBiZSBhbiBhcnJheVwiKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgY29uZmlnLmdlb19sb2NhdGlvbl9zb3VyY2VzICYmXG4gICAgICAhQXJyYXkuaXNBcnJheShjb25maWcuZ2VvX2xvY2F0aW9uX3NvdXJjZXMpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbWV0ZXIgZ2VvX2xvY2F0aW9uX3NvdXJjZXMgbmVlZHMgdG8gYmUgYW4gYXJyYXlcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2NvbmZpZ0VudGl0aWVzID0gY29uZmlnLmVudGl0aWVzXG4gICAgICA/IHByb2Nlc3NDb25maWdFbnRpdGllczxNYXBFbnRpdHlDb25maWc+KGNvbmZpZy5lbnRpdGllcylcbiAgICAgIDogW107XG4gICAgdGhpcy5fbWFwRW50aXRpZXMgPSB0aGlzLl9nZXRNYXBFbnRpdGllcygpO1xuICB9XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl9jb25maWc/LmFzcGVjdF9yYXRpbykge1xuICAgICAgcmV0dXJuIDc7XG4gICAgfVxuXG4gICAgY29uc3QgcmF0aW8gPSBwYXJzZUFzcGVjdFJhdGlvKHRoaXMuX2NvbmZpZy5hc3BlY3RfcmF0aW8pO1xuICAgIGNvbnN0IGFyID1cbiAgICAgIHJhdGlvICYmIHJhdGlvLncgPiAwICYmIHJhdGlvLmggPiAwXG4gICAgICAgID8gYCR7KCgxMDAgKiByYXRpby5oKSAvIHJhdGlvLncpLnRvRml4ZWQoMil9YFxuICAgICAgICA6IFwiMTAwXCI7XG5cbiAgICByZXR1cm4gMSArIE1hdGguZmxvb3IoTnVtYmVyKGFyKSAvIDI1KSB8fCAzO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRDb25maWdFbGVtZW50KCkge1xuICAgIGF3YWl0IGltcG9ydChcIi4uL2VkaXRvci9jb25maWctZWxlbWVudHMvaHVpLW1hcC1jYXJkLWVkaXRvclwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh1aS1tYXAtY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoXG4gICAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgICBlbnRpdGllczogc3RyaW5nW10sXG4gICAgZW50aXRpZXNGYWxsYmFjazogc3RyaW5nW11cbiAgKTogTWFwQ2FyZENvbmZpZyB7XG4gICAgY29uc3QgaW5jbHVkZURvbWFpbnMgPSBbXCJkZXZpY2VfdHJhY2tlclwiXTtcbiAgICBjb25zdCBtYXhFbnRpdGllcyA9IDI7XG4gICAgY29uc3QgZm91bmRFbnRpdGllcyA9IGZpbmRFbnRpdGllcyhcbiAgICAgIGhhc3MsXG4gICAgICBtYXhFbnRpdGllcyxcbiAgICAgIGVudGl0aWVzLFxuICAgICAgZW50aXRpZXNGYWxsYmFjayxcbiAgICAgIGluY2x1ZGVEb21haW5zXG4gICAgKTtcblxuICAgIHJldHVybiB7IHR5cGU6IFwibWFwXCIsIGVudGl0aWVzOiBmb3VuZEVudGl0aWVzIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCkge1xuICAgIGlmICghdGhpcy5fY29uZmlnKSB7XG4gICAgICByZXR1cm4gbm90aGluZztcbiAgICB9XG4gICAgaWYgKHRoaXMuX2Vycm9yKSB7XG4gICAgICByZXR1cm4gaHRtbGA8aGEtYWxlcnQgYWxlcnQtdHlwZT1cImVycm9yXCI+XG4gICAgICAgICR7dGhpcy5oYXNzLmxvY2FsaXplKFwidWkuY29tcG9uZW50cy5tYXAuZXJyb3JcIil9OiAke3RoaXMuX2Vycm9yLm1lc3NhZ2V9XG4gICAgICAgICgke3RoaXMuX2Vycm9yLmNvZGV9KVxuICAgICAgPC9oYS1hbGVydD5gO1xuICAgIH1cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIGlkPVwiY2FyZFwiIC5oZWFkZXI9JHt0aGlzLl9jb25maWcudGl0bGV9PlxuICAgICAgICA8ZGl2IGlkPVwicm9vdFwiPlxuICAgICAgICAgIDxoYS1tYXBcbiAgICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgICAgLmVudGl0aWVzPSR7dGhpcy5fbWFwRW50aXRpZXN9XG4gICAgICAgICAgICAuem9vbT0ke3RoaXMuX2NvbmZpZy5kZWZhdWx0X3pvb20gPz8gREVGQVVMVF9aT09NfVxuICAgICAgICAgICAgLnBhdGhzPSR7dGhpcy5fZ2V0SGlzdG9yeVBhdGhzKHRoaXMuX2NvbmZpZywgdGhpcy5fc3RhdGVIaXN0b3J5KX1cbiAgICAgICAgICAgIC5hdXRvRml0PSR7dGhpcy5fY29uZmlnLmF1dG9fZml0IHx8IGZhbHNlfVxuICAgICAgICAgICAgLmZpdFpvbmVzPSR7dGhpcy5fY29uZmlnLmZpdF96b25lc31cbiAgICAgICAgICAgIC5kYXJrTW9kZT0ke3RoaXMuX2NvbmZpZy5kYXJrX21vZGV9XG4gICAgICAgICAgICBpbnRlcmFjdGl2ZVpvbmVzXG4gICAgICAgICAgICByZW5kZXJQYXNzaXZlXG4gICAgICAgICAgPjwvaGEtbWFwPlxuICAgICAgICAgIDxoYS1pY29uLWJ1dHRvblxuICAgICAgICAgICAgLmxhYmVsPSR7dGhpcy5oYXNzIS5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgXCJ1aS5wYW5lbC5sb3ZlbGFjZS5jYXJkcy5tYXAucmVzZXRfZm9jdXNcIlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIC5wYXRoPSR7bWRpSW1hZ2VGaWx0ZXJDZW50ZXJGb2N1c31cbiAgICAgICAgICAgIEBjbGljaz0ke3RoaXMuX2ZpdE1hcH1cbiAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgPjwvaGEtaWNvbi1idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICBpZiAoIWNoYW5nZWRQcm9wcy5oYXMoXCJoYXNzXCIpIHx8IGNoYW5nZWRQcm9wcy5zaXplID4gMSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkSGFzcyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpIGFzIEhvbWVBc3Npc3RhbnQgfCB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIW9sZEhhc3MgfHwgIXRoaXMuX2NvbmZpZ0VudGl0aWVzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAob2xkSGFzcy50aGVtZXMuZGFya01vZGUgIT09IHRoaXMuaGFzcy50aGVtZXMuZGFya01vZGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiX3N0YXRlSGlzdG9yeVwiKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NvbmZpZz8uZ2VvX2xvY2F0aW9uX3NvdXJjZXMpIHtcbiAgICAgIGlmIChvbGRIYXNzLnN0YXRlcyAhPT0gdGhpcy5oYXNzLnN0YXRlcykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY29uZmlnPy5lbnRpdGllc1xuICAgICAgPyBoYXNDb25maWdPckVudGl0aWVzQ2hhbmdlZCh0aGlzLCBjaGFuZ2VkUHJvcHMpXG4gICAgICA6IGhhc0NvbmZpZ0NoYW5nZWQodGhpcywgY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB3aWxsVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiB2b2lkIHtcbiAgICBzdXBlci53aWxsVXBkYXRlKGNoYW5nZWRQcm9wcyk7XG4gICAgaWYgKFxuICAgICAgY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikgJiZcbiAgICAgIHRoaXMuX2NvbmZpZz8uZ2VvX2xvY2F0aW9uX3NvdXJjZXMgJiZcbiAgICAgICFkZWVwRXF1YWwoXG4gICAgICAgIHRoaXMuX2dldFNvdXJjZUVudGl0aWVzKGNoYW5nZWRQcm9wcy5nZXQoXCJoYXNzXCIpPy5zdGF0ZXMpLFxuICAgICAgICB0aGlzLl9nZXRTb3VyY2VFbnRpdGllcyh0aGlzLmhhc3Muc3RhdGVzKVxuICAgICAgKVxuICAgICkge1xuICAgICAgdGhpcy5fbWFwRW50aXRpZXMgPSB0aGlzLl9nZXRNYXBFbnRpdGllcygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIGlmICh0aGlzLmhhc1VwZGF0ZWQgJiYgdGhpcy5fY29uZmlnRW50aXRpZXM/Lmxlbmd0aCkge1xuICAgICAgdGhpcy5fc3Vic2NyaWJlSGlzdG9yeSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX3Vuc3Vic2NyaWJlSGlzdG9yeSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3Vic2NyaWJlSGlzdG9yeSgpIHtcbiAgICBpZiAoXG4gICAgICAhaXNDb21wb25lbnRMb2FkZWQodGhpcy5oYXNzISwgXCJoaXN0b3J5XCIpIHx8XG4gICAgICB0aGlzLl9zdWJzY3JpYmVkIHx8XG4gICAgICAhKHRoaXMuX2NvbmZpZz8uaG91cnNfdG9fc2hvdyA/PyBERUZBVUxUX0hPVVJTX1RPX1NIT1cpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N1YnNjcmliZWQgPSBzdWJzY3JpYmVIaXN0b3J5U3RhdGVzVGltZVdpbmRvdyhcbiAgICAgIHRoaXMuaGFzcyEsXG4gICAgICAoY29tYmluZWRIaXN0b3J5KSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5fc3Vic2NyaWJlZCkge1xuICAgICAgICAgIC8vIE1lc3NhZ2UgY2FtZSBpbiBiZWZvcmUgd2UgaGFkIGEgY2hhbmNlIHRvIHVubG9hZFxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdGF0ZUhpc3RvcnkgPSBjb21iaW5lZEhpc3Rvcnk7XG4gICAgICB9LFxuICAgICAgdGhpcy5fY29uZmlnIS5ob3Vyc190b19zaG93ISA/PyBERUZBVUxUX0hPVVJTX1RPX1NIT1csXG4gICAgICAodGhpcy5fY29uZmlnRW50aXRpZXMgfHwgW10pLm1hcCgoZW50aXR5KSA9PiBlbnRpdHkuZW50aXR5KSEsXG4gICAgICBmYWxzZSxcbiAgICAgIGZhbHNlLFxuICAgICAgZmFsc2VcbiAgICApLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHRoaXMuX3N1YnNjcmliZWQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLl9lcnJvciA9IGVycjtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3Vuc3Vic2NyaWJlSGlzdG9yeSgpIHtcbiAgICBpZiAodGhpcy5fc3Vic2NyaWJlZCkge1xuICAgICAgdGhpcy5fc3Vic2NyaWJlZC50aGVuKCh1bnN1YikgPT4gdW5zdWI/LigpKTtcbiAgICAgIHRoaXMuX3N1YnNjcmliZWQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZWQoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jb25maWdFbnRpdGllcz8ubGVuZ3RoKSB7XG4gICAgICBpZiAoIXRoaXMuX3N1YnNjcmliZWQgfHwgY2hhbmdlZFByb3BzLmhhcyhcIl9jb25maWdcIikpIHtcbiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmVIaXN0b3J5KCk7XG4gICAgICAgIHRoaXMuX3N1YnNjcmliZUhpc3RvcnkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdW5zdWJzY3JpYmVIaXN0b3J5KCk7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiX2NvbmZpZ1wiKSkge1xuICAgICAgdGhpcy5fY29tcHV0ZVBhZGRpbmcoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jb21wdXRlUGFkZGluZygpOiB2b2lkIHtcbiAgICBjb25zdCByb290ID0gdGhpcy5zaGFkb3dSb290IS5nZXRFbGVtZW50QnlJZChcInJvb3RcIik7XG4gICAgaWYgKCF0aGlzLl9jb25maWcgfHwgdGhpcy5pc1BhbmVsIHx8ICFyb290KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9jb25maWcuYXNwZWN0X3JhdGlvKSB7XG4gICAgICByb290LnN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIjEwMCVcIjtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByb290LnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xuXG4gICAgY29uc3QgcmF0aW8gPSBwYXJzZUFzcGVjdFJhdGlvKHRoaXMuX2NvbmZpZy5hc3BlY3RfcmF0aW8pO1xuXG4gICAgcm9vdC5zdHlsZS5wYWRkaW5nQm90dG9tID1cbiAgICAgIHJhdGlvICYmIHJhdGlvLncgPiAwICYmIHJhdGlvLmggPiAwXG4gICAgICAgID8gYCR7KCgxMDAgKiByYXRpby5oKSAvIHJhdGlvLncpLnRvRml4ZWQoMil9JWBcbiAgICAgICAgOiAocm9vdC5zdHlsZS5wYWRkaW5nQm90dG9tID0gXCIxMDAlXCIpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZml0TWFwKCkge1xuICAgIHRoaXMuX21hcD8uZml0TWFwKCk7XG4gIH1cblxuICBwcml2YXRlIF9nZXRDb2xvcihlbnRpdHlJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgY29sb3IgPSB0aGlzLl9jb2xvckRpY3RbZW50aXR5SWRdO1xuICAgIGlmIChjb2xvcikge1xuICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgICBjb2xvciA9IGdldENvbG9yQnlJbmRleCh0aGlzLl9jb2xvckluZGV4KTtcbiAgICB0aGlzLl9jb2xvckluZGV4Kys7XG4gICAgdGhpcy5fY29sb3JEaWN0W2VudGl0eUlkXSA9IGNvbG9yO1xuICAgIHJldHVybiBjb2xvcjtcbiAgfVxuXG4gIHByaXZhdGUgX2dldFNvdXJjZUVudGl0aWVzKHN0YXRlcz86IEhhc3NFbnRpdGllcyk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXN0YXRlcyB8fCAhdGhpcy5fY29uZmlnPy5nZW9fbG9jYXRpb25fc291cmNlcykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGdlb0VudGl0aWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIC8vIENhbGN1bGF0ZSB2aXNpYmxlIGdlbyBsb2NhdGlvbiBzb3VyY2VzXG4gICAgY29uc3QgaW5jbHVkZXNBbGwgPSB0aGlzLl9jb25maWcuZ2VvX2xvY2F0aW9uX3NvdXJjZXMuaW5jbHVkZXMoXCJhbGxcIik7XG4gICAgZm9yIChjb25zdCBzdGF0ZU9iaiBvZiBPYmplY3QudmFsdWVzKHN0YXRlcykpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY29tcHV0ZURvbWFpbihzdGF0ZU9iai5lbnRpdHlfaWQpID09PSBcImdlb19sb2NhdGlvblwiICYmXG4gICAgICAgIChpbmNsdWRlc0FsbCB8fFxuICAgICAgICAgIHRoaXMuX2NvbmZpZy5nZW9fbG9jYXRpb25fc291cmNlcy5pbmNsdWRlcyhcbiAgICAgICAgICAgIHN0YXRlT2JqLmF0dHJpYnV0ZXMuc291cmNlXG4gICAgICAgICAgKSlcbiAgICAgICkge1xuICAgICAgICBnZW9FbnRpdGllcy5wdXNoKHN0YXRlT2JqLmVudGl0eV9pZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBnZW9FbnRpdGllcztcbiAgfVxuXG4gIHByaXZhdGUgX2dldE1hcEVudGl0aWVzKCk6IEhhTWFwRW50aXR5W10ge1xuICAgIHJldHVybiBbXG4gICAgICAuLi4odGhpcy5fY29uZmlnRW50aXRpZXMgfHwgW10pLm1hcCgoZW50aXR5Q29uZikgPT4gKHtcbiAgICAgICAgZW50aXR5X2lkOiBlbnRpdHlDb25mLmVudGl0eSxcbiAgICAgICAgY29sb3I6IHRoaXMuX2dldENvbG9yKGVudGl0eUNvbmYuZW50aXR5KSxcbiAgICAgICAgbGFiZWxfbW9kZTogZW50aXR5Q29uZi5sYWJlbF9tb2RlLFxuICAgICAgICBmb2N1czogZW50aXR5Q29uZi5mb2N1cyxcbiAgICAgICAgbmFtZTogZW50aXR5Q29uZi5uYW1lLFxuICAgICAgfSkpLFxuICAgICAgLi4udGhpcy5fZ2V0U291cmNlRW50aXRpZXModGhpcy5oYXNzPy5zdGF0ZXMpLm1hcCgoZW50aXR5KSA9PiAoe1xuICAgICAgICBlbnRpdHlfaWQ6IGVudGl0eSxcbiAgICAgICAgY29sb3I6IHRoaXMuX2dldENvbG9yKGVudGl0eSksXG4gICAgICB9KSksXG4gICAgXTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldEhpc3RvcnlQYXRocyA9IG1lbW9pemVPbmUoXG4gICAgKFxuICAgICAgY29uZmlnOiBNYXBDYXJkQ29uZmlnLFxuICAgICAgaGlzdG9yeT86IEhpc3RvcnlTdGF0ZXNcbiAgICApOiBIYU1hcFBhdGhzW10gfCB1bmRlZmluZWQgPT4ge1xuICAgICAgaWYgKCFoaXN0b3J5IHx8ICEoY29uZmlnLmhvdXJzX3RvX3Nob3cgPz8gREVGQVVMVF9IT1VSU19UT19TSE9XKSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXRoczogSGFNYXBQYXRoc1tdID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgT2JqZWN0LmtleXMoaGlzdG9yeSkpIHtcbiAgICAgICAgaWYgKGNvbXB1dGVEb21haW4oZW50aXR5SWQpID09PSBcInpvbmVcIikge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVudGl0eVN0YXRlcyA9IGhpc3RvcnlbZW50aXR5SWRdO1xuICAgICAgICBpZiAoIWVudGl0eVN0YXRlcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmlsdGVyIGxvY2F0aW9uIGRhdGEgZnJvbSBzdGF0ZXMgYW5kIHJlbW92ZSBhbGwgaW52YWxpZCBsb2NhdGlvbnNcbiAgICAgICAgY29uc3QgcG9pbnRzOiBIYU1hcFBhdGhQb2ludFtdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZW50aXR5U3RhdGUgb2YgZW50aXR5U3RhdGVzKSB7XG4gICAgICAgICAgY29uc3QgbGF0aXR1ZGUgPSBlbnRpdHlTdGF0ZS5hLmxhdGl0dWRlO1xuICAgICAgICAgIGNvbnN0IGxvbmdpdHVkZSA9IGVudGl0eVN0YXRlLmEubG9uZ2l0dWRlO1xuICAgICAgICAgIGlmICghbGF0aXR1ZGUgfHwgIWxvbmdpdHVkZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHAgPSB7fSBhcyBIYU1hcFBhdGhQb2ludDtcbiAgICAgICAgICBwLnBvaW50ID0gW2xhdGl0dWRlLCBsb25naXR1ZGVdIGFzIExhdExuZ1R1cGxlO1xuICAgICAgICAgIGNvbnN0IHQgPSBuZXcgRGF0ZShlbnRpdHlTdGF0ZS5sdSAqIDEwMDApO1xuICAgICAgICAgIGlmICgoY29uZmlnLmhvdXJzX3RvX3Nob3chID8/IERFRkFVTFRfSE9VUlNfVE9fU0hPVykgPiAxNDQpIHtcbiAgICAgICAgICAgIC8vIGlmIHNob3dpbmcgPiA2IGRheXMgaW4gdGhlIGhpc3RvcnkgdHJhaWwsIHNob3cgdGhlIGZ1bGxcbiAgICAgICAgICAgIC8vIGRhdGUgYW5kIHRpbWVcbiAgICAgICAgICAgIHAudG9vbHRpcCA9IGZvcm1hdERhdGVUaW1lKHQsIHRoaXMuaGFzcy5sb2NhbGUsIHRoaXMuaGFzcy5jb25maWcpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNUb2RheSh0KSkge1xuICAgICAgICAgICAgcC50b29sdGlwID0gZm9ybWF0VGltZVdpdGhTZWNvbmRzKFxuICAgICAgICAgICAgICB0LFxuICAgICAgICAgICAgICB0aGlzLmhhc3MubG9jYWxlLFxuICAgICAgICAgICAgICB0aGlzLmhhc3MuY29uZmlnXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwLnRvb2x0aXAgPSBmb3JtYXRUaW1lV2Vla2RheShcbiAgICAgICAgICAgICAgdCxcbiAgICAgICAgICAgICAgdGhpcy5oYXNzLmxvY2FsZSxcbiAgICAgICAgICAgICAgdGhpcy5oYXNzLmNvbmZpZ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcG9pbnRzLnB1c2gocCk7XG4gICAgICAgIH1cbiAgICAgICAgcGF0aHMucHVzaCh7XG4gICAgICAgICAgcG9pbnRzLFxuICAgICAgICAgIGNvbG9yOiB0aGlzLl9nZXRDb2xvcihlbnRpdHlJZCksXG4gICAgICAgICAgZ3JhZHVhbE9wYWNpdHk6IDAuOCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGF0aHM7XG4gICAgfVxuICApO1xuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdEdyb3VwIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgaGEtY2FyZCB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIGhhLW1hcCB7XG4gICAgICAgIHotaW5kZXg6IDA7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGJhY2tncm91bmQ6IGluaGVyaXQ7XG4gICAgICB9XG5cbiAgICAgIGhhLWljb24tYnV0dG9uIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDc1cHg7XG4gICAgICAgIGxlZnQ6IDNweDtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgI3Jvb3Qge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJodWktbWFwLWNhcmRcIjogSHVpTWFwQ2FyZDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/panels/lovelace/cards/hui-map-card.ts\n");

/***/ })

};
