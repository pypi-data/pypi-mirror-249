/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
export const id = "src_external_app_external_app_entrypoint_ts";
export const ids = ["src_external_app_external_app_entrypoint_ts"];
export const modules = {

/***/ "./src/external_app/external_app_entrypoint.ts":
/*!*****************************************************!*\
  !*** ./src/external_app/external_app_entrypoint.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attachExternalToApp: () => (/* binding */ attachExternalToApp)\n/* harmony export */ });\n/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/dom/fire_event */ \"./src/common/dom/fire_event.ts\");\n/* harmony import */ var _common_dom_get_main_window__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/dom/get_main_window */ \"./src/common/dom/get_main_window.ts\");\n/*\nAll commands that do UI stuff need to be loaded from the app bundle as UI stuff\nin core bundle slows things down and causes duplicate registration.\n\nThis is the entry point for providing external app stuff from app entrypoint.\n*/\n\n\n\nconst attachExternalToApp = hassMainEl => {\n  window.addEventListener(\"haptic\", ev => hassMainEl.hass.auth.external.fireMessage({\n    type: \"haptic\",\n    payload: {\n      hapticType: ev.detail\n    }\n  }));\n  hassMainEl.hass.auth.external.addCommandHandler(msg => handleExternalMessage(hassMainEl, msg));\n};\nconst handleExternalMessage = (hassMainEl, msg) => {\n  const bus = hassMainEl.hass.auth.external;\n  if (msg.command === \"restart\") {\n    hassMainEl.hass.connection.reconnect(true);\n    bus.fireMessage({\n      id: msg.id,\n      type: \"result\",\n      success: true,\n      result: null\n    });\n  } else if (msg.command === \"notifications/show\") {\n    (0,_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__.fireEvent)(hassMainEl, \"hass-show-notifications\");\n    bus.fireMessage({\n      id: msg.id,\n      type: \"result\",\n      success: true,\n      result: null\n    });\n  } else if (msg.command === \"sidebar/toggle\") {\n    var _mainWindow$history$s;\n    if ((_mainWindow$history$s = _common_dom_get_main_window__WEBPACK_IMPORTED_MODULE_1__.mainWindow.history.state) !== null && _mainWindow$history$s !== void 0 && _mainWindow$history$s.open) {\n      bus.fireMessage({\n        id: msg.id,\n        type: \"result\",\n        success: false,\n        error: {\n          code: \"not_allowed\",\n          message: \"dialog open\"\n        }\n      });\n      return true;\n    }\n    (0,_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__.fireEvent)(hassMainEl, \"hass-toggle-menu\");\n    bus.fireMessage({\n      id: msg.id,\n      type: \"result\",\n      success: true,\n      result: null\n    });\n  } else if (msg.command === \"sidebar/show\") {\n    var _mainWindow$history$s2;\n    if ((_mainWindow$history$s2 = _common_dom_get_main_window__WEBPACK_IMPORTED_MODULE_1__.mainWindow.history.state) !== null && _mainWindow$history$s2 !== void 0 && _mainWindow$history$s2.open) {\n      bus.fireMessage({\n        id: msg.id,\n        type: \"result\",\n        success: false,\n        error: {\n          code: \"not_allowed\",\n          message: \"dialog open\"\n        }\n      });\n      return true;\n    }\n    (0,_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__.fireEvent)(hassMainEl, \"hass-toggle-menu\", {\n      open: true\n    });\n    bus.fireMessage({\n      id: msg.id,\n      type: \"result\",\n      success: true,\n      result: null\n    });\n  } else {\n    return false;\n  }\n  return true;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXh0ZXJuYWxfYXBwL2V4dGVybmFsX2FwcF9lbnRyeXBvaW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBRUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9leHRlcm5hbF9hcHAvZXh0ZXJuYWxfYXBwX2VudHJ5cG9pbnQudHM/NGVlMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIGNvbW1hbmRzIHRoYXQgZG8gVUkgc3R1ZmYgbmVlZCB0byBiZSBsb2FkZWQgZnJvbSB0aGUgYXBwIGJ1bmRsZSBhcyBVSSBzdHVmZlxuaW4gY29yZSBidW5kbGUgc2xvd3MgdGhpbmdzIGRvd24gYW5kIGNhdXNlcyBkdXBsaWNhdGUgcmVnaXN0cmF0aW9uLlxuXG5UaGlzIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgcHJvdmlkaW5nIGV4dGVybmFsIGFwcCBzdHVmZiBmcm9tIGFwcCBlbnRyeXBvaW50LlxuKi9cblxuaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgbWFpbldpbmRvdyB9IGZyb20gXCIuLi9jb21tb24vZG9tL2dldF9tYWluX3dpbmRvd1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudE1haW4gfSBmcm9tIFwiLi4vbGF5b3V0cy9ob21lLWFzc2lzdGFudC1tYWluXCI7XG5pbXBvcnQgdHlwZSB7IEVNSW5jb21pbmdNZXNzYWdlQ29tbWFuZHMgfSBmcm9tIFwiLi9leHRlcm5hbF9tZXNzYWdpbmdcIjtcblxuZXhwb3J0IGNvbnN0IGF0dGFjaEV4dGVybmFsVG9BcHAgPSAoaGFzc01haW5FbDogSG9tZUFzc2lzdGFudE1haW4pID0+IHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJoYXB0aWNcIiwgKGV2KSA9PlxuICAgIGhhc3NNYWluRWwuaGFzcy5hdXRoLmV4dGVybmFsIS5maXJlTWVzc2FnZSh7XG4gICAgICB0eXBlOiBcImhhcHRpY1wiLFxuICAgICAgcGF5bG9hZDogeyBoYXB0aWNUeXBlOiBldi5kZXRhaWwgfSxcbiAgICB9KVxuICApO1xuXG4gIGhhc3NNYWluRWwuaGFzcy5hdXRoLmV4dGVybmFsIS5hZGRDb21tYW5kSGFuZGxlcigobXNnKSA9PlxuICAgIGhhbmRsZUV4dGVybmFsTWVzc2FnZShoYXNzTWFpbkVsLCBtc2cpXG4gICk7XG59O1xuXG5jb25zdCBoYW5kbGVFeHRlcm5hbE1lc3NhZ2UgPSAoXG4gIGhhc3NNYWluRWw6IEhvbWVBc3Npc3RhbnRNYWluLFxuICBtc2c6IEVNSW5jb21pbmdNZXNzYWdlQ29tbWFuZHNcbik6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBidXMgPSBoYXNzTWFpbkVsLmhhc3MuYXV0aC5leHRlcm5hbCE7XG5cbiAgaWYgKG1zZy5jb21tYW5kID09PSBcInJlc3RhcnRcIikge1xuICAgIGhhc3NNYWluRWwuaGFzcy5jb25uZWN0aW9uLnJlY29ubmVjdCh0cnVlKTtcbiAgICBidXMuZmlyZU1lc3NhZ2Uoe1xuICAgICAgaWQ6IG1zZy5pZCxcbiAgICAgIHR5cGU6IFwicmVzdWx0XCIsXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcmVzdWx0OiBudWxsLFxuICAgIH0pO1xuICB9IGVsc2UgaWYgKG1zZy5jb21tYW5kID09PSBcIm5vdGlmaWNhdGlvbnMvc2hvd1wiKSB7XG4gICAgZmlyZUV2ZW50KGhhc3NNYWluRWwsIFwiaGFzcy1zaG93LW5vdGlmaWNhdGlvbnNcIik7XG4gICAgYnVzLmZpcmVNZXNzYWdlKHtcbiAgICAgIGlkOiBtc2cuaWQsXG4gICAgICB0eXBlOiBcInJlc3VsdFwiLFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHJlc3VsdDogbnVsbCxcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChtc2cuY29tbWFuZCA9PT0gXCJzaWRlYmFyL3RvZ2dsZVwiKSB7XG4gICAgaWYgKG1haW5XaW5kb3cuaGlzdG9yeS5zdGF0ZT8ub3Blbikge1xuICAgICAgYnVzLmZpcmVNZXNzYWdlKHtcbiAgICAgICAgaWQ6IG1zZy5pZCxcbiAgICAgICAgdHlwZTogXCJyZXN1bHRcIixcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6IFwibm90X2FsbG93ZWRcIiwgbWVzc2FnZTogXCJkaWFsb2cgb3BlblwiIH0sXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmaXJlRXZlbnQoaGFzc01haW5FbCwgXCJoYXNzLXRvZ2dsZS1tZW51XCIpO1xuICAgIGJ1cy5maXJlTWVzc2FnZSh7XG4gICAgICBpZDogbXNnLmlkLFxuICAgICAgdHlwZTogXCJyZXN1bHRcIixcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICByZXN1bHQ6IG51bGwsXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAobXNnLmNvbW1hbmQgPT09IFwic2lkZWJhci9zaG93XCIpIHtcbiAgICBpZiAobWFpbldpbmRvdy5oaXN0b3J5LnN0YXRlPy5vcGVuKSB7XG4gICAgICBidXMuZmlyZU1lc3NhZ2Uoe1xuICAgICAgICBpZDogbXNnLmlkLFxuICAgICAgICB0eXBlOiBcInJlc3VsdFwiLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHsgY29kZTogXCJub3RfYWxsb3dlZFwiLCBtZXNzYWdlOiBcImRpYWxvZyBvcGVuXCIgfSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZpcmVFdmVudChoYXNzTWFpbkVsLCBcImhhc3MtdG9nZ2xlLW1lbnVcIiwgeyBvcGVuOiB0cnVlIH0pO1xuICAgIGJ1cy5maXJlTWVzc2FnZSh7XG4gICAgICBpZDogbXNnLmlkLFxuICAgICAgdHlwZTogXCJyZXN1bHRcIixcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICByZXN1bHQ6IG51bGwsXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/external_app/external_app_entrypoint.ts\n");

/***/ })

};
